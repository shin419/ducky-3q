var Kh=Object.defineProperty;var Zh=(e,t,n)=>t in e?Kh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ya=(e,t,n)=>Zh(e,typeof t!="symbol"?t+"":t,n);import{i as qs,e as gt,z as Hu,g as Fe,r as z,a as v,j as ht,o as Wo,A as Ds,R as zu,h as S,Q as Et,s as mr,B as wi,C as Uu,D as Ke,c as Ie,E as pr,F as dt,G as Bu,w as De,H as $u,b as ct,p as Xh,I as ju,J as Gu,K as Qu,L as Jh,M as ef,N as tf,O as nf,P as sf,S as Yi,T as dn,U as si,f as Lt,V as rf,W as Ps,q as of,X as Ku,Y as lf,Z as af,_ as uf,$ as rt,a0 as ho,a1 as Zi,a2 as Zu,a3 as wa,a4 as cf,n as Xu,a5 as df,a6 as hf,a7 as ei,a8 as ff,a9 as mf,aa as Qn,l as Ju,ab as Ae,ac as ec,ad as Yr,ae as pf,af as gf,ag as vf,ah as ba,ai as _f,aj as yf,d as wf,ak as us,al as Yo,am as bf,an as kf,ao as Sf,ap as Ho,aq as gr,ar as x,as as Cf,at as xf,au as Tf,av as tc,aw as Ef,ax as If,ay as mi,az as tn,aA as Vs,aB as $e,aC as Rf,aD as Mf,aE as Df,aF as Pf,aG as cs,aH as zo,aI as Nf,aJ as Of,aK as ka,aL as Af,aM as Lf,aN as Ff,aO as qf,aP as Sa,aQ as nc,aR as Vf,aS as Wf,aT as Yf,aU as Hf,aV as zf,t as Kn,u as pt,v as Me,y as L,aW as O,aX as Zn,aY as bn,aZ as ks,a_ as Te,a$ as Hr,b0 as zr,b1 as Uf,b2 as Ca}from"./index-BOuNfrjK.js";import{u as Fn,a as qn,b as ic,c as Uo,d as sc,e as rc,r as xa,f as Bf,g as oc,h as lc,i as $f,j as Ta,k as jf,l as Gf,G as Qf,Q as Ss}from"./index-CFLNWvXP.js";import{Q as Kf,c as Zf,s as ac,g as uc,b as Xf,a as Jf,h as em,_ as tm}from"./_plugin-vue_export-helper-BnlnIES_.js";let nm=0;const im=["click","keydown"],sm={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${nm++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function rm(e,t,n,i){const s=qs(Hu,gt);if(s===gt)return console.error("QTab/QRouteTab component needs to be child of QTabs"),gt;const{proxy:r}=Fe(),o=z(null),l=z(null),a=z(null),u=v(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),c=v(()=>s.currentModel.value===e.name),d=v(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),h=v(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),m=v(()=>e.disable===!0||s.hasFocus.value===!0||c.value===!1&&s.hasActiveTab.value===!0?-1:e.tabindex||0);function p(_,b){if(b!==!0&&_?.qAvoidFocus!==!0&&o.value?.focus(),e.disable!==!0){s.updateModel({name:e.name}),n("click",_);return}}function y(_){wi(_,[13,32])?p(_,!0):Uu(_)!==!0&&_.keyCode>=35&&_.keyCode<=40&&_.altKey!==!0&&_.metaKey!==!0&&s.onKbdNavigate(_.keyCode,r.$el)===!0&&Ke(_),n("keydown",_)}function w(){const _=s.tabProps.value.narrowIndicator,b=[],V=S("div",{ref:a,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});e.icon!==void 0&&b.push(S(Et,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&b.push(S("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&b.push(e.alertIcon!==void 0?S(Et,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):S("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),_===!0&&b.push(V);const B=[S("div",{class:"q-focus-helper",tabindex:-1,ref:o}),S("div",{class:h.value},mr(t.default,b))];return _===!1&&B.push(V),B}const Y={name:v(()=>e.name),rootRef:l,tabIndicatorRef:a,routeData:i};ht(()=>{s.unregisterTab(Y)}),Wo(()=>{s.registerTab(Y)});function N(_,b){const V={ref:l,class:d.value,tabindex:m.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:y,...b};return Ds(S(_,V,w()),[[zu,u.value]])}return{renderTab:N,$tabs:s}}const Ea=Ie({name:"QTab",props:sm,emits:im,setup(e,{slots:t,emit:n}){const{renderTab:i}=rm(e,t,n);return()=>i("div")}});function ri(){let e;const t=Fe();function n(){e=void 0}return pr(n),ht(n),{removeTick:n,registerTick(i){e=i,dt(()=>{e===i&&(Bu(t)===!1&&e(),e=void 0)})}}}function pi(){let e=null;const t=Fe();function n(){e!==null&&(clearTimeout(e),e=null)}return pr(n),ht(n),{removeTimeout:n,registerTimeout(i,s){n(),Bu(t)===!1&&(e=setTimeout(()=>{e=null,i()},s))}}}let Xi=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Xi=e.scrollLeft>=0,e.remove()}function om(e,t,n){const i=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const lm=["left","center","right","justify"],am=Ie({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>lm.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:i}=Fe(),{$q:s}=i,{registerTick:r}=ri(),{registerTick:o}=ri(),{registerTick:l}=ri(),{registerTimeout:a,removeTimeout:u}=pi(),{registerTimeout:c,removeTimeout:d}=pi(),h=z(null),m=z(null),p=z(e.modelValue),y=z(!1),w=z(!0),Y=z(!1),N=z(!1),_=[],b=z(0),V=z(!1);let B=null,$=null,K;const we=v(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:om(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),qe=v(()=>{const C=b.value,q=p.value;for(let j=0;j<C;j++)if(_[j].name.value===q)return!0;return!1}),Xe=v(()=>`q-tabs__content--align-${y.value===!0?"left":N.value===!0?"justify":e.align}`),ve=v(()=>`q-tabs row no-wrap items-center q-tabs--${y.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),je=v(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Xe.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),H=v(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Q=v(()=>e.vertical!==!0&&s.lang.rtl===!0),se=v(()=>Xi===!1&&Q.value===!0);De(Q,T),De(()=>e.modelValue,C=>{Pe({name:C,setCurrent:!0,skipEmit:!0})}),De(()=>e.outsideArrows,Ve);function Pe({name:C,setCurrent:q,skipEmit:j}){p.value!==C&&(j!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",C),(q===!0||e["onUpdate:modelValue"]===void 0)&&(tt(p.value,C),p.value=C))}function Ve(){r(()=>{h.value&&We({width:h.value.offsetWidth,height:h.value.offsetHeight})})}function We(C){if(H.value===void 0||m.value===null)return;const q=C[H.value.container],j=Math.min(m.value[H.value.scroll],Array.prototype.reduce.call(m.value.children,(xe,ue)=>xe+(ue[H.value.content]||0),0)),Re=q>0&&j>q;y.value=Re,Re===!0&&o(T),N.value=q<parseInt(e.breakpoint,10)}function tt(C,q){const j=C!=null&&C!==""?_.find(xe=>xe.name.value===C):null,Re=q!=null&&q!==""?_.find(xe=>xe.name.value===q):null;if(nt===!0)nt=!1;else if(j&&Re){const xe=j.tabIndicatorRef.value,ue=Re.tabIndicatorRef.value;B!==null&&(clearTimeout(B),B=null),xe.style.transition="none",xe.style.transform="none",ue.style.transition="none",ue.style.transform="none";const oe=xe.getBoundingClientRect(),ze=ue.getBoundingClientRect();ue.style.transform=e.vertical===!0?`translate3d(0,${oe.top-ze.top}px,0) scale3d(1,${ze.height?oe.height/ze.height:1},1)`:`translate3d(${oe.left-ze.left}px,0,0) scale3d(${ze.width?oe.width/ze.width:1},1,1)`,l(()=>{B=setTimeout(()=>{B=null,ue.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",ue.style.transform="none"},70)})}Re&&y.value===!0&&g(Re.rootRef.value)}function g(C){const{left:q,width:j,top:Re,height:xe}=m.value.getBoundingClientRect(),ue=C.getBoundingClientRect();let oe=e.vertical===!0?ue.top-Re:ue.left-q;if(oe<0){m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(oe),T();return}oe+=e.vertical===!0?ue.height-xe:ue.width-j,oe>0&&(m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(oe),T())}function T(){const C=m.value;if(C===null)return;const q=C.getBoundingClientRect(),j=e.vertical===!0?C.scrollTop:Math.abs(C.scrollLeft);Q.value===!0?(w.value=Math.ceil(j+q.width)<C.scrollWidth-1,Y.value=j>0):(w.value=j>0,Y.value=e.vertical===!0?Math.ceil(j+q.height)<C.scrollHeight:Math.ceil(j+q.width)<C.scrollWidth)}function F(C){$!==null&&clearInterval($),$=setInterval(()=>{I(C)===!0&&E()},5)}function Z(){F(se.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){F(se.value===!0?0:Number.MAX_SAFE_INTEGER)}function E(){$!==null&&(clearInterval($),$=null)}function A(C,q){const j=Array.prototype.filter.call(m.value.children,ze=>ze===q||ze.matches&&ze.matches(".q-tab.q-focusable")===!0),Re=j.length;if(Re===0)return;if(C===36)return g(j[0]),j[0].focus(),!0;if(C===35)return g(j[Re-1]),j[Re-1].focus(),!0;const xe=C===(e.vertical===!0?38:37),ue=C===(e.vertical===!0?40:39),oe=xe===!0?-1:ue===!0?1:void 0;if(oe!==void 0){const ze=Q.value===!0?-1:1,Ge=j.indexOf(q)+oe*ze;return Ge>=0&&Ge<Re&&(g(j[Ge]),j[Ge].focus({preventScroll:!0})),!0}}const de=v(()=>se.value===!0?{get:C=>Math.abs(C.scrollLeft),set:(C,q)=>{C.scrollLeft=-q}}:e.vertical===!0?{get:C=>C.scrollTop,set:(C,q)=>{C.scrollTop=q}}:{get:C=>C.scrollLeft,set:(C,q)=>{C.scrollLeft=q}});function I(C){const q=m.value,{get:j,set:Re}=de.value;let xe=!1,ue=j(q);const oe=C<ue?-1:1;return ue+=oe*5,ue<0?(xe=!0,ue=0):(oe===-1&&ue<=C||oe===1&&ue>=C)&&(xe=!0,ue=C),Re(q,ue),T(),xe}function Ce(C,q){for(const j in C)if(C[j]!==q[j])return!1;return!0}function mt(){let C=null,q={matchedLen:0,queryDiff:9999,hrefLen:0};const j=_.filter(oe=>oe.routeData?.hasRouterLink.value===!0),{hash:Re,query:xe}=i.$route,ue=Object.keys(xe).length;for(const oe of j){const ze=oe.routeData.exact.value===!0;if(oe.routeData[ze===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ge,query:Ot,matched:Un,href:qr}=oe.routeData.resolvedLink.value,yn=Object.keys(Ot).length;if(ze===!0){if(Ge!==Re||yn!==ue||Ce(xe,Ot)===!1)continue;C=oe.name.value;break}if(Ge!==""&&Ge!==Re||yn!==0&&Ce(Ot,xe)===!1)continue;const bt={matchedLen:Un.length,queryDiff:ue-yn,hrefLen:qr.length-Ge.length};if(bt.matchedLen>q.matchedLen){C=oe.name.value,q=bt;continue}else if(bt.matchedLen!==q.matchedLen)continue;if(bt.queryDiff<q.queryDiff)C=oe.name.value,q=bt;else if(bt.queryDiff!==q.queryDiff)continue;bt.hrefLen>q.hrefLen&&(C=oe.name.value,q=bt)}if(C===null&&_.some(oe=>oe.routeData===void 0&&oe.name.value===p.value)===!0){nt=!1;return}Pe({name:C,setCurrent:!0})}function rn(C){if(u(),V.value!==!0&&h.value!==null&&C.target&&typeof C.target.closest=="function"){const q=C.target.closest(".q-tab");q&&h.value.contains(q)===!0&&(V.value=!0,y.value===!0&&g(q))}}function wt(){a(()=>{V.value=!1},30)}function Pt(){on.avoidRouteWatcher===!1?c(mt):d()}function Nt(){if(K===void 0){const C=De(()=>i.$route.fullPath,Pt);K=()=>{C(),K=void 0}}}function Yt(C){_.push(C),b.value++,Ve(),C.routeData===void 0||i.$route===void 0?c(()=>{if(y.value===!0){const q=p.value,j=q!=null&&q!==""?_.find(Re=>Re.name.value===q):null;j&&g(j.rootRef.value)}}):(Nt(),C.routeData.hasRouterLink.value===!0&&Pt())}function Hn(C){_.splice(_.indexOf(C),1),b.value--,Ve(),K!==void 0&&C.routeData!==void 0&&(_.every(q=>q.routeData===void 0)===!0&&K(),Pt())}const on={currentModel:p,tabProps:we,hasFocus:V,hasActiveTab:qe,registerTab:Yt,unregisterTab:Hn,verifyRouteModel:Pt,updateModel:Pe,onKbdNavigate:A,avoidRouteWatcher:!1};Xh(Hu,on);function zn(){B!==null&&clearTimeout(B),E(),K?.()}let ln,nt;return ht(zn),pr(()=>{ln=K!==void 0,zn()}),$u(()=>{ln===!0&&(Nt(),nt=!0,Pt()),Ve()}),()=>S("div",{ref:h,class:ve.value,role:"tablist",onFocusin:rn,onFocusout:wt},[S(Kf,{onResize:We}),S("div",{ref:m,class:je.value,onScroll:T},ct(t.default)),S(Et,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(w.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||s.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Z,onTouchstartPassive:Z,onMouseupPassive:E,onMouseleavePassive:E,onTouchendPassive:E}),S(Et,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Y.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||s.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:E,onMouseleavePassive:E,onTouchendPassive:E})])}}),an=Ie({name:"QSpace",setup(){const e=S("div",{class:"q-space"});return()=>e}}),um={xs:8,sm:10,md:14,lg:20,xl:24},fo=Ie({name:"QChip",props:{...Fn,...ju,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Fe(),s=qn(e,i),r=Gu(e,um),o=v(()=>e.selected===!0||e.icon!==void 0),l=v(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),a=v(()=>e.iconRemove||i.iconSet.chip.remove),u=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=v(()=>{const w=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(w?` text-${w} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),d=v(()=>{const w=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},Y={...w,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||i.lang.label.remove};return{chip:w,remove:Y}});function h(w){w.keyCode===13&&m(w)}function m(w){e.disable||(n("update:selected",!e.selected),n("click",w))}function p(w){(w.keyCode===void 0||w.keyCode===13)&&(Ke(w),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function y(){const w=[];u.value===!0&&w.push(S("div",{class:"q-focus-helper"})),o.value===!0&&w.push(S(Et,{class:"q-chip__icon q-chip__icon--left",name:l.value}));const Y=e.label!==void 0?[S("div",{class:"ellipsis"},[e.label])]:void 0;return w.push(S("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Jh(t.default,Y))),e.iconRight&&w.push(S(Et,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&w.push(S(Et,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:a.value,...d.value.remove,onClick:p,onKeyup:p})),w}return()=>{if(e.modelValue===!1)return;const w={class:c.value,style:r.value};return u.value===!0&&Object.assign(w,d.value.chip,{onClick:m,onKeyup:h}),Qu("div",w,y(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[zu,e.ripple]])}}}),cm=Ie({name:"QField",inheritAttrs:!1,props:{...Uo,tag:{type:String,default:"label"}},emits:ic,setup(){return sc(rc({tagProp:!0}))}}),dm=Ie({name:"QItem",props:{...Fn,...ef,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Fe(),s=qn(e,i),{hasLink:r,linkAttrs:o,linkClass:l,linkTag:a,navigateOnClick:u}=tf(),c=z(null),d=z(null),h=v(()=>e.clickable===!0||r.value===!0||e.tag==="label"),m=v(()=>e.disable!==!0&&h.value===!0),p=v(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(s.value===!0?" q-item--dark":"")+(r.value===!0&&e.active===null?l.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(m.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),y=v(()=>e.insetLevel===void 0?null:{["padding"+(i.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function w(_){m.value===!0&&(d.value!==null&&_.qAvoidFocus!==!0&&(_.qKeyEvent!==!0&&document.activeElement===c.value?d.value.focus():document.activeElement===d.value&&c.value.focus()),u(_))}function Y(_){if(m.value===!0&&wi(_,[13,32])===!0){Ke(_),_.qKeyEvent=!0;const b=new MouseEvent("click",_);b.qKeyEvent=!0,c.value.dispatchEvent(b)}n("keyup",_)}function N(){const _=nf(t.default,[]);return m.value===!0&&_.unshift(S("div",{class:"q-focus-helper",tabindex:-1,ref:d})),_}return()=>{const _={ref:c,class:p.value,style:y.value,role:"listitem",onClick:w,onKeyup:Y};return m.value===!0?(_.tabindex=e.tabindex||"0",Object.assign(_,o.value)):h.value===!0&&(_["aria-disabled"]="true"),S(a.value,_,N())}}}),hm=Ie({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=v(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>S("div",{class:n.value},ct(t.default))}}),fm=Ie({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=v(()=>parseInt(e.lines,10)),i=v(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),s=v(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>S("div",{style:s.value,class:i.value},ct(t.default))}});function Ws(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),sf.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const cc={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},mm={...cc,contextMenu:Boolean};function dc({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:s,emit:r}=Fe(),o=z(null);let l=null;function a(m){return o.value===null?!1:m===void 0||m.touches===void 0||m.touches.length<=1}const u={};n===void 0&&(Object.assign(u,{hide(m){s.hide(m)},toggle(m){s.toggle(m),m.qAnchorHandled=!0},toggleKey(m){wi(m,13)===!0&&u.toggle(m)},contextClick(m){s.hide(m),Yi(m),dt(()=>{s.show(m),m.qAnchorHandled=!0})},prevent:Yi,mobileTouch(m){if(u.mobileCleanup(m),a(m)!==!0)return;s.hide(m),o.value.classList.add("non-selectable");const p=m.target;dn(u,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),l=setTimeout(()=>{l=null,s.show(m),m.qAnchorHandled=!0},300)},mobileCleanup(m){o.value.classList.remove("non-selectable"),l!==null&&(clearTimeout(l),l=null),e.value===!0&&m!==void 0&&Ws()}}),n=function(m=i.contextMenu){if(i.noParentEvent===!0||o.value===null)return;let p;m===!0?s.$q.platform.is.mobile===!0?p=[[o.value,"touchstart","mobileTouch","passive"]]:p=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:p=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],dn(u,"anchor",p)});function c(){si(u,"anchor")}function d(m){for(o.value=m;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;n()}function h(){if(i.target===!1||i.target===""||s.$el.parentNode===null)o.value=null;else if(i.target===!0)d(s.$el.parentNode);else{let m=i.target;if(typeof i.target=="string")try{m=document.querySelector(i.target)}catch{m=void 0}m!=null?(o.value=m.$el||m,n()):(o.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return De(()=>i.contextMenu,m=>{o.value!==null&&(c(),n(m))}),De(()=>i.target,()=>{o.value!==null&&c(),h()}),De(()=>i.noParentEvent,m=>{o.value!==null&&(m===!0?c():n())}),Wo(()=>{h(),t!==!0&&i.modelValue===!0&&o.value===null&&r("update:modelValue",!1)}),ht(()=>{l!==null&&clearTimeout(l),c()}),{anchorEl:o,canShow:a,anchorEvents:u}}function hc(e,t){const n=z(null);let i;function s(l,a){const u=`${a!==void 0?"add":"remove"}EventListener`,c=a!==void 0?a:i;l!==window&&l[u]("scroll",c,Lt.passive),window[u]("scroll",c,Lt.passive),i=a}function r(){n.value!==null&&(s(n.value),n.value=null)}const o=De(()=>e.noParentEvent,()=>{n.value!==null&&(r(),t())});return ht(o),{localScrollTarget:n,unconfigureScrollTarget:r,changeScrollEvent:s}}const Bo={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},$o=["beforeShow","show","beforeHide","hide"];function jo({showing:e,canShow:t,hideOnRouteChange:n,handleShow:i,handleHide:s,processOnMount:r}){const o=Fe(),{props:l,emit:a,proxy:u}=o;let c;function d(N){e.value===!0?p(N):h(N)}function h(N){if(l.disable===!0||N?.qAnchorHandled===!0||t!==void 0&&t(N)!==!0)return;const _=l["onUpdate:modelValue"]!==void 0;_===!0&&(a("update:modelValue",!0),c=N,dt(()=>{c===N&&(c=void 0)})),(l.modelValue===null||_===!1)&&m(N)}function m(N){e.value!==!0&&(e.value=!0,a("beforeShow",N),i!==void 0?i(N):a("show",N))}function p(N){if(l.disable===!0)return;const _=l["onUpdate:modelValue"]!==void 0;_===!0&&(a("update:modelValue",!1),c=N,dt(()=>{c===N&&(c=void 0)})),(l.modelValue===null||_===!1)&&y(N)}function y(N){e.value!==!1&&(e.value=!1,a("beforeHide",N),s!==void 0?s(N):a("hide",N))}function w(N){l.disable===!0&&N===!0?l["onUpdate:modelValue"]!==void 0&&a("update:modelValue",!1):N===!0!==e.value&&(N===!0?m:y)(c)}De(()=>l.modelValue,w),n!==void 0&&rf(o)===!0&&De(()=>u.$route.fullPath,()=>{n.value===!0&&e.value===!0&&p()}),Wo(()=>{w(l.modelValue)});const Y={show:h,hide:p,toggle:d};return Object.assign(u,Y),Y}const oi=[];function pm(e){return oi.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function fc(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return Ps(e)}else if(e.__qPortal===!0){const n=Ps(e);return n?.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=Ps(e)}while(e!=null)}function gm(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=fc(e,t);continue}e.hide(t)}e=Ps(e)}}const vm=Ie({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function _m(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Go(e,t,n,i){const s=z(!1),r=z(!1);let o=null;const l={},a=i==="dialog"&&_m(e);function u(d){if(d===!0){xa(l),r.value=!0;return}r.value=!1,s.value===!1&&(a===!1&&o===null&&(o=af(!1,i)),s.value=!0,oi.push(e.proxy),Bf(l))}function c(d){if(r.value=!1,d!==!0)return;xa(l),s.value=!1;const h=oi.indexOf(e.proxy);h!==-1&&oi.splice(h,1),o!==null&&(uf(o),o=null)}return of(()=>{c(!0)}),e.proxy.__qPortal=!0,Ku(e.proxy,"contentEl",()=>t.value),{showPortal:u,hidePortal:c,portalIsActive:s,portalIsAccessible:r,renderPortal:()=>a===!0?n():s.value===!0?[S(lf,{to:o},S(vm,n))]:void 0}}const Hi={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Qo(e,t=()=>{},n=()=>{}){return{transitionProps:v(()=>{const i=`q-transition--${e.transitionShow||t()}`,s=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:v(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const In=[];let gi;function ym(e){gi=e.keyCode===27}function wm(){gi===!0&&(gi=!1)}function bm(e){gi===!0&&(gi=!1,wi(e,27)===!0&&In[In.length-1](e))}function mc(e){window[e]("keydown",ym),window[e]("blur",wm),window[e]("keyup",bm),gi=!1}function pc(e){rt.is.desktop===!0&&(In.push(e),In.length===1&&mc("addEventListener"))}function Ys(e){const t=In.indexOf(e);t!==-1&&(In.splice(t,1),In.length===0&&mc("removeEventListener"))}const Rn=[];function gc(e){Rn[Rn.length-1](e)}function vc(e){rt.is.desktop===!0&&(Rn.push(e),Rn.length===1&&document.body.addEventListener("focusin",gc))}function mo(e){const t=Rn.indexOf(e);t!==-1&&(Rn.splice(t,1),Rn.length===0&&document.body.removeEventListener("focusin",gc))}const{notPassiveCapture:Hs}=Lt,Mn=[];function zs(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=oi.length-1;for(;n>=0;){const i=oi[n].$;if(i.type.name==="QTooltip"){n--;continue}if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=Mn.length-1;i>=0;i--){const s=Mn[i];if((s.anchorEl.value===null||s.anchorEl.value.contains(t)===!1)&&(t===document.body||s.innerRef.value!==null&&s.innerRef.value.contains(t)===!1))e.qClickOutside=!0,s.onClickOutside(e);else return}}function _c(e){Mn.push(e),Mn.length===1&&(document.addEventListener("mousedown",zs,Hs),document.addEventListener("touchstart",zs,Hs))}function Us(e){const t=Mn.findIndex(n=>n===e);t!==-1&&(Mn.splice(t,1),Mn.length===0&&(document.removeEventListener("mousedown",zs,Hs),document.removeEventListener("touchstart",zs,Hs)))}let Ia,Ra;function Bs(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function yc(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const po={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{po[`${e}#ltr`]=e,po[`${e}#rtl`]=e});function $s(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:po[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function km(e,t){let{top:n,left:i,right:s,bottom:r,width:o,height:l}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],r+=t[1],s+=t[0],o+=t[0],l+=t[1]),{top:n,bottom:r,height:l,left:i,right:s,width:o,middle:i+(s-i)/2,center:n+(r-n)/2}}function Sm(e,t,n){let{top:i,left:s}=e.getBoundingClientRect();return i+=t.top,s+=t.left,n!==void 0&&(i+=n[1],s+=n[0]),{top:i,bottom:i+1,height:1,left:s,right:s+1,width:1,middle:s,center:i}}function Cm(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Ma(e,t,n,i){return{top:e[n.vertical]-t[i.vertical],left:e[n.horizontal]-t[i.horizontal]}}function Ko(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ko(e,t+1)},10);return}const{targetEl:n,offset:i,anchorEl:s,anchorOrigin:r,selfOrigin:o,absoluteOffset:l,fit:a,cover:u,maxHeight:c,maxWidth:d}=e;if(rt.is.ios===!0&&window.visualViewport!==void 0){const B=document.body.style,{offsetLeft:$,offsetTop:K}=window.visualViewport;$!==Ia&&(B.setProperty("--q-pe-left",$+"px"),Ia=$),K!==Ra&&(B.setProperty("--q-pe-top",K+"px"),Ra=K)}const{scrollLeft:h,scrollTop:m}=n,p=l===void 0?km(s,u===!0?[0,0]:i):Sm(s,l,i);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:d,maxHeight:c,visibility:"visible"});const{offsetWidth:y,offsetHeight:w}=n,{elWidth:Y,elHeight:N}=a===!0||u===!0?{elWidth:Math.max(p.width,y),elHeight:u===!0?Math.max(p.height,w):w}:{elWidth:y,elHeight:w};let _={maxWidth:d,maxHeight:c};(a===!0||u===!0)&&(_.minWidth=p.width+"px",u===!0&&(_.minHeight=p.height+"px")),Object.assign(n.style,_);const b=Cm(Y,N);let V=Ma(p,b,r,o);if(l===void 0||i===void 0)Ur(V,p,b,r,o);else{const{top:B,left:$}=V;Ur(V,p,b,r,o);let K=!1;if(V.top!==B){K=!0;const we=2*i[1];p.center=p.top-=we,p.bottom-=we+2}if(V.left!==$){K=!0;const we=2*i[0];p.middle=p.left-=we,p.right-=we+2}K===!0&&(V=Ma(p,b,r,o),Ur(V,p,b,r,o))}_={top:V.top+"px",left:V.left+"px"},V.maxHeight!==void 0&&(_.maxHeight=V.maxHeight+"px",p.height>V.maxHeight&&(_.minHeight=_.maxHeight)),V.maxWidth!==void 0&&(_.maxWidth=V.maxWidth+"px",p.width>V.maxWidth&&(_.minWidth=_.maxWidth)),Object.assign(n.style,_),n.scrollTop!==m&&(n.scrollTop=m),n.scrollLeft!==h&&(n.scrollLeft=h)}function Ur(e,t,n,i,s){const r=n.bottom,o=n.right,l=Zf(),a=window.innerHeight-l,u=document.body.clientWidth;if(e.top<0||e.top+r>a)if(s.vertical==="center")e.top=t[i.vertical]>a/2?Math.max(0,a-r):0,e.maxHeight=Math.min(r,a);else if(t[i.vertical]>a/2){const c=Math.min(a,i.vertical==="center"?t.center:i.vertical===s.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,c),e.top=Math.max(0,c-r)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===s.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,a-e.top);if(e.left<0||e.left+o>u)if(e.maxWidth=Math.min(o,u),s.horizontal==="middle")e.left=t[i.horizontal]>u/2?Math.max(0,u-o):0;else if(t[i.horizontal]>u/2){const c=Math.min(u,i.horizontal==="middle"?t.middle:i.horizontal===s.horizontal?t.right:t.left);e.maxWidth=Math.min(o,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===s.horizontal?t.left:t.right),e.maxWidth=Math.min(o,u-e.left)}const wc=Ie({name:"QMenu",inheritAttrs:!1,props:{...mm,...Bo,...Fn,...Hi,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Bs},self:{type:String,validator:Bs},offset:{type:Array,validator:yc},scrollTarget:ac,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...$o,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){let s=null,r,o,l;const a=Fe(),{proxy:u}=a,{$q:c}=u,d=z(null),h=z(!1),m=v(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),p=qn(e,c),{registerTick:y,removeTick:w}=ri(),{registerTimeout:Y}=pi(),{transitionProps:N,transitionStyle:_}=Qo(e),{localScrollTarget:b,changeScrollEvent:V,unconfigureScrollTarget:B}=hc(e,F),{anchorEl:$,canShow:K}=dc({showing:h}),{hide:we}=jo({showing:h,canShow:K,handleShow:tt,handleHide:g,hideOnRouteChange:m,processOnMount:!0}),{showPortal:qe,hidePortal:Xe,renderPortal:ve}=Go(a,d,de,"menu"),je={anchorEl:$,innerRef:d,onClickOutside(I){if(e.persistent!==!0&&h.value===!0)return we(I),(I.type==="touchstart"||I.target.classList.contains("q-dialog__backdrop"))&&Ke(I),!0}},H=v(()=>$s(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),Q=v(()=>e.cover===!0?H.value:$s(e.self||"top start",c.lang.rtl)),se=v(()=>(e.square===!0?" q-menu--square":"")+(p.value===!0?" q-menu--dark q-dark":"")),Pe=v(()=>e.autoClose===!0?{onClick:Z}:{}),Ve=v(()=>h.value===!0&&e.persistent!==!0);De(Ve,I=>{I===!0?(pc(E),_c(je)):(Ys(E),Us(je))});function We(){oc(()=>{let I=d.value;I&&I.contains(document.activeElement)!==!0&&(I=I.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||I.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||I.querySelector("[autofocus], [data-autofocus]")||I,I.focus({preventScroll:!0}))})}function tt(I){if(s=e.noRefocus===!1?document.activeElement:null,vc(ie),qe(),F(),r=void 0,I!==void 0&&(e.touchPosition||e.contextMenu)){const Ce=ho(I);if(Ce.left!==void 0){const{top:mt,left:rn}=$.value.getBoundingClientRect();r={left:Ce.left-rn,top:Ce.top-mt}}}o===void 0&&(o=De(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,A)),e.noFocus!==!0&&document.activeElement.blur(),y(()=>{A(),e.noFocus!==!0&&We()}),Y(()=>{c.platform.is.ios===!0&&(l=e.autoClose,d.value.click()),A(),qe(!0),n("show",I)},e.transitionDuration)}function g(I){w(),Xe(),T(!0),s!==null&&(I===void 0||I.qClickOutside!==!0)&&(((I?.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),Y(()=>{Xe(!0),n("hide",I)},e.transitionDuration)}function T(I){r=void 0,o!==void 0&&(o(),o=void 0),(I===!0||h.value===!0)&&(mo(ie),B(),Us(je),Ys(E)),I!==!0&&(s=null)}function F(){($.value!==null||e.scrollTarget!==void 0)&&(b.value=uc($.value,e.scrollTarget),V(b.value,A))}function Z(I){l!==!0?(fc(u,I),n("click",I)):l=!1}function ie(I){Ve.value===!0&&e.noFocus!==!0&&Zu(d.value,I.target)!==!0&&We()}function E(I){e.noEscDismiss!==!0&&(n("escapeKey"),we(I))}function A(){Ko({targetEl:d.value,offset:e.offset,anchorEl:$.value,anchorOrigin:H.value,selfOrigin:Q.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function de(){return S(Zi,N.value,()=>h.value===!0?S("div",{role:"menu",...i,ref:d,tabindex:-1,class:["q-menu q-position-engine scroll"+se.value,i.class],style:[i.style,_.value],...Pe.value},ct(t.default)):null)}return ht(T),Object.assign(u,{focus:We,updatePosition:A}),ve}});function xm(e,t,n){let i;function s(){i!==void 0&&(wa.remove(i),i=void 0)}return ht(()=>{e.value===!0&&s()}),{removeFromHistory:s,addToHistory(){i={condition:()=>n.value===!0,handler:t},wa.add(i)}}}let Ii=0,Br,$r,Wi,jr=!1,Da,Pa,Na,kn=null;function Tm(e){Em(e)&&Ke(e)}function Em(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=cf(e),n=e.shiftKey&&!e.deltaX,i=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),s=n||i?e.deltaY:e.deltaX;for(let r=0;r<t.length;r++){const o=t[r];if(em(o,i))return i?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function Oa(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Cs(e){jr!==!0&&(jr=!0,requestAnimationFrame(()=>{jr=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:i}=document.scrollingElement;(Wi===void 0||t!==window.innerHeight)&&(Wi=n-t,document.scrollingElement.scrollTop=i),i>Wi&&(document.scrollingElement.scrollTop-=Math.ceil((i-Wi)/8))}))}function Aa(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:i,overflowX:s}=window.getComputedStyle(t);Br=Xf(window),$r=Jf(window),Da=t.style.left,Pa=t.style.top,Na=window.location.href,t.style.left=`-${Br}px`,t.style.top=`-${$r}px`,s!=="hidden"&&(s==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,rt.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Cs,Lt.passiveCapture),window.visualViewport.addEventListener("scroll",Cs,Lt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Oa,Lt.passiveCapture))}rt.is.desktop===!0&&rt.is.mac===!0&&window[`${e}EventListener`]("wheel",Tm,Lt.notPassive),e==="remove"&&(rt.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Cs,Lt.passiveCapture),window.visualViewport.removeEventListener("scroll",Cs,Lt.passiveCapture)):window.removeEventListener("scroll",Oa,Lt.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=Da,t.style.top=Pa,window.location.href===Na&&window.scrollTo(Br,$r),Wi=void 0)}function Im(e){let t="add";if(e===!0){if(Ii++,kn!==null){clearTimeout(kn),kn=null;return}if(Ii>1)return}else{if(Ii===0||(Ii--,Ii>0))return;if(t="remove",rt.is.ios===!0&&rt.is.nativeMobile===!0){kn!==null&&clearTimeout(kn),kn=setTimeout(()=>{Aa(t),kn=null},100);return}}Aa(t)}function Rm(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,Im(t))}}}let xs=0;const Mm={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},La={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},go=Ie({name:"QDialog",inheritAttrs:!1,props:{...Bo,...Hi,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...$o,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){const s=Fe(),r=z(null),o=z(!1),l=z(!1);let a=null,u=null,c,d;const h=v(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:m}=Rm(),{registerTimeout:p}=pi(),{registerTick:y,removeTick:w}=ri(),{transitionProps:Y,transitionStyle:N}=Qo(e,()=>La[e.position][0],()=>La[e.position][1]),_=v(()=>N.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:b,hidePortal:V,portalIsAccessible:B,renderPortal:$}=Go(s,r,ie,"dialog"),{hide:K}=jo({showing:o,hideOnRouteChange:h,handleShow:Q,handleHide:se,processOnMount:!0}),{addToHistory:we,removeFromHistory:qe}=xm(o,K,h),Xe=v(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Mm[e.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),ve=v(()=>o.value===!0&&e.seamless!==!0),je=v(()=>e.autoClose===!0?{onClick:T}:{}),H=v(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${ve.value===!0?"modal":"seamless"}`,i.class]);De(()=>e.maximized,E=>{o.value===!0&&g(E)}),De(ve,E=>{m(E),E===!0?(vc(Z),pc(We)):(mo(Z),Ys(We))});function Q(E){we(),u=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,g(e.maximized),b(),l.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),y(Pe)):w(),p(()=>{if(s.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:A,bottom:de}=document.activeElement.getBoundingClientRect(),{innerHeight:I}=window,Ce=window.visualViewport!==void 0?window.visualViewport.height:I;A>0&&de>Ce/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Ce,de>=I?1/0:Math.ceil(document.scrollingElement.scrollTop+de-Ce/2))),document.activeElement.scrollIntoView()}d=!0,r.value.click(),d=!1}b(!0),l.value=!1,n("show",E)},e.transitionDuration)}function se(E){w(),qe(),tt(!0),l.value=!0,V(),u!==null&&(((E?.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),p(()=>{V(!0),l.value=!1,n("hide",E)},e.transitionDuration)}function Pe(E){oc(()=>{let A=r.value;if(A!==null){if(E!==void 0){const de=A.querySelector(E);if(de!==null){de.focus({preventScroll:!0});return}}A.contains(document.activeElement)!==!0&&(A=A.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||A.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||A.querySelector("[autofocus], [data-autofocus]")||A,A.focus({preventScroll:!0}))}})}function Ve(E){E&&typeof E.focus=="function"?E.focus({preventScroll:!0}):Pe(),n("shake");const A=r.value;A!==null&&(A.classList.remove("q-animate--scale"),A.classList.add("q-animate--scale"),a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,r.value!==null&&(A.classList.remove("q-animate--scale"),Pe())},170))}function We(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&Ve():(n("escapeKey"),K()))}function tt(E){a!==null&&(clearTimeout(a),a=null),(E===!0||o.value===!0)&&(g(!1),e.seamless!==!0&&(m(!1),mo(Z),Ys(We))),E!==!0&&(u=null)}function g(E){E===!0?c!==!0&&(xs<1&&document.body.classList.add("q-body--dialog"),xs++,c=!0):c===!0&&(xs<2&&document.body.classList.remove("q-body--dialog"),xs--,c=!1)}function T(E){d!==!0&&(K(E),n("click",E))}function F(E){e.persistent!==!0&&e.noBackdropDismiss!==!0?K(E):e.noShake!==!0&&Ve()}function Z(E){e.allowFocusOutside!==!0&&B.value===!0&&Zu(r.value,E.target)!==!0&&Pe('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:Pe,shake:Ve,__updateRefocusTarget(E){u=E||null}}),ht(tt);function ie(){return S("div",{role:"dialog","aria-modal":ve.value===!0?"true":"false",...i,class:H.value},[S(Zi,{name:"q-transition--fade",appear:!0},()=>ve.value===!0?S("div",{class:"q-dialog__backdrop fixed-full",style:_.value,"aria-hidden":"true",tabindex:-1,onClick:F}):null),S(Zi,Y.value,()=>o.value===!0?S("div",{ref:r,class:Xe.value,style:N.value,tabindex:-1,...je.value},ct(t.default)):null)])}return $}}),kt=1e3,Dm=["start","center","end","start-force","center-force","end-force"],bc=Array.prototype.filter,Pm=window.getComputedStyle(document.body).overflowAnchor===void 0?Xu:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];bc.call(n,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const i=n[t];i?.dataset&&(i.dataset.qVsAnchor="")}))};function li(e,t){return e+t}function Gr(e,t,n,i,s,r,o,l){const a=e===window?document.scrollingElement||document.documentElement:e,u=s===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-o-l,scrollMaxSize:0,offsetStart:-o,offsetEnd:-l};if(s===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=a.scrollLeft,c.scrollViewSize+=a.clientWidth),c.scrollMaxSize=a.scrollWidth,r===!0&&(c.scrollStart=(Xi===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=a.scrollTop,c.scrollViewSize+=a.clientHeight),c.scrollMaxSize=a.scrollHeight),n!==null)for(let d=n.previousElementSibling;d!==null;d=d.previousElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=d[u]);if(i!==null)for(let d=i.nextElementSibling;d!==null;d=d.nextElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=d[u]);if(t!==e){const d=a.getBoundingClientRect(),h=t.getBoundingClientRect();s===!0?(c.offsetStart+=h.left-d.left,c.offsetEnd-=h.width):(c.offsetStart+=h.top-d.top,c.offsetEnd-=h.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Fa(e,t,n,i){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(i===!0&&(t=(Xi===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(i===!0&&(t=(Xi===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Ri(e,t,n,i){if(n>=i)return 0;const s=t.length,r=Math.floor(n/kt),o=Math.floor((i-1)/kt)+1;let l=e.slice(r,o).reduce(li,0);return n%kt!==0&&(l-=t.slice(r*kt,n).reduce(li,0)),i%kt!==0&&i!==s&&(l-=t.slice(i,o*kt).reduce(li,0)),l}const Nm={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},qa={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Nm};function Om({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:i}){const s=Fe(),{props:r,emit:o,proxy:l}=s,{$q:a}=l;let u,c,d,h=[],m;const p=z(0),y=z(0),w=z({}),Y=z(null),N=z(null),_=z(null),b=z({from:0,to:0}),V=v(()=>r.tableColspan!==void 0?r.tableColspan:100);i===void 0&&(i=v(()=>r.virtualScrollItemSize));const B=v(()=>i.value+";"+r.virtualScrollHorizontal),$=v(()=>B.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);De($,()=>{se()}),De(B,K);function K(){Q(c,!0)}function we(g){Q(g===void 0?c:g)}function qe(g,T){const F=t();if(F==null||F.nodeType===8)return;const Z=Gr(F,n(),Y.value,N.value,r.virtualScrollHorizontal,a.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);d!==Z.scrollViewSize&&se(Z.scrollViewSize),ve(F,Z,Math.min(e.value-1,Math.max(0,parseInt(g,10)||0)),0,Dm.indexOf(T)!==-1?T:c!==-1&&g>c?"end":"start")}function Xe(){const g=t();if(g==null||g.nodeType===8)return;const T=Gr(g,n(),Y.value,N.value,r.virtualScrollHorizontal,a.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),F=e.value-1,Z=T.scrollMaxSize-T.offsetStart-T.offsetEnd-y.value;if(u===T.scrollStart)return;if(T.scrollMaxSize<=0){ve(g,T,0,0);return}d!==T.scrollViewSize&&se(T.scrollViewSize),je(b.value.from);const ie=Math.floor(T.scrollMaxSize-Math.max(T.scrollViewSize,T.offsetEnd)-Math.min(m[F],T.scrollViewSize/2));if(ie>0&&Math.ceil(T.scrollStart)>=ie){ve(g,T,F,T.scrollMaxSize-T.offsetEnd-h.reduce(li,0));return}let E=0,A=T.scrollStart-T.offsetStart,de=A;if(A<=Z&&A+T.scrollViewSize>=p.value)A-=p.value,E=b.value.from,de=A;else for(let I=0;A>=h[I]&&E<F;I++)A-=h[I],E+=kt;for(;A>0&&E<F;)A-=m[E],A>-T.scrollViewSize?(E++,de=A):de=m[E]+A;ve(g,T,E,de)}function ve(g,T,F,Z,ie){const E=typeof ie=="string"&&ie.indexOf("-force")!==-1,A=E===!0?ie.replace("-force",""):ie,de=A!==void 0?A:"start";let I=Math.max(0,F-w.value[de]),Ce=I+w.value.total;Ce>e.value&&(Ce=e.value,I=Math.max(0,Ce-w.value.total)),u=T.scrollStart;const mt=I!==b.value.from||Ce!==b.value.to;if(mt===!1&&A===void 0){Ve(F);return}const{activeElement:rn}=document,wt=_.value;mt===!0&&wt!==null&&wt!==rn&&wt.contains(rn)===!0&&(wt.addEventListener("focusout",H),setTimeout(()=>{wt?.removeEventListener("focusout",H)})),Pm(wt,F-I);const Pt=A!==void 0?m.slice(I,F).reduce(li,0):0;if(mt===!0){const Nt=Ce>=b.value.from&&I<=b.value.to?b.value.to:Ce;b.value={from:I,to:Nt},p.value=Ri(h,m,0,I),y.value=Ri(h,m,Ce,e.value),requestAnimationFrame(()=>{b.value.to!==Ce&&u===T.scrollStart&&(b.value={from:b.value.from,to:Ce},y.value=Ri(h,m,Ce,e.value))})}requestAnimationFrame(()=>{if(u!==T.scrollStart)return;mt===!0&&je(I);const Nt=m.slice(I,F).reduce(li,0),Yt=Nt+T.offsetStart+p.value,Hn=Yt+m[F];let on=Yt+Z;if(A!==void 0){const zn=Nt-Pt,ln=T.scrollStart+zn;on=E!==!0&&ln<Yt&&Hn<ln+T.scrollViewSize?ln:A==="end"?Hn-T.scrollViewSize:Yt-(A==="start"?0:Math.round((T.scrollViewSize-m[F])/2))}u=on,Fa(g,on,r.virtualScrollHorizontal,a.lang.rtl),Ve(F)})}function je(g){const T=_.value;if(T){const F=bc.call(T.children,I=>I.classList&&I.classList.contains("q-virtual-scroll--skip")===!1),Z=F.length,ie=r.virtualScrollHorizontal===!0?I=>I.getBoundingClientRect().width:I=>I.offsetHeight;let E=g,A,de;for(let I=0;I<Z;){for(A=ie(F[I]),I++;I<Z&&F[I].classList.contains("q-virtual-scroll--with-prev")===!0;)A+=ie(F[I]),I++;de=A-m[E],de!==0&&(m[E]+=de,h[Math.floor(E/kt)]+=de),E++}}}function H(){_.value?.focus()}function Q(g,T){const F=1*i.value;(T===!0||Array.isArray(m)===!1)&&(m=[]);const Z=m.length;m.length=e.value;for(let E=e.value-1;E>=Z;E--)m[E]=F;const ie=Math.floor((e.value-1)/kt);h=[];for(let E=0;E<=ie;E++){let A=0;const de=Math.min((E+1)*kt,e.value);for(let I=E*kt;I<de;I++)A+=m[I];h.push(A)}c=-1,u=void 0,p.value=Ri(h,m,0,b.value.from),y.value=Ri(h,m,b.value.to,e.value),g>=0?(je(b.value.from),dt(()=>{qe(g)})):We()}function se(g){if(g===void 0&&typeof window<"u"){const A=t();A!=null&&A.nodeType!==8&&(g=Gr(A,n(),Y.value,N.value,r.virtualScrollHorizontal,a.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}d=g;const T=parseFloat(r.virtualScrollSliceRatioBefore)||0,F=parseFloat(r.virtualScrollSliceRatioAfter)||0,Z=1+T+F,ie=g===void 0||g<=0?1:Math.ceil(g/i.value),E=Math.max(1,ie,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/Z));w.value={total:Math.ceil(E*Z),start:Math.ceil(E*T),center:Math.ceil(E*(.5+T)),end:Math.ceil(E*(1+T)),view:ie}}function Pe(g,T){const F=r.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+F]:i.value+"px"};return[g==="tbody"?S(g,{class:"q-virtual-scroll__padding",key:"before",ref:Y},[S("tr",[S("td",{style:{[F]:`${p.value}px`,...Z},colspan:V.value})])]):S(g,{class:"q-virtual-scroll__padding",key:"before",ref:Y,style:{[F]:`${p.value}px`,...Z}}),S(g,{class:"q-virtual-scroll__content",key:"content",ref:_,tabindex:-1},T.flat()),g==="tbody"?S(g,{class:"q-virtual-scroll__padding",key:"after",ref:N},[S("tr",[S("td",{style:{[F]:`${y.value}px`,...Z},colspan:V.value})])]):S(g,{class:"q-virtual-scroll__padding",key:"after",ref:N,style:{[F]:`${y.value}px`,...Z}})]}function Ve(g){c!==g&&(r.onVirtualScroll!==void 0&&o("virtualScroll",{index:g,from:b.value.from,to:b.value.to-1,direction:g<c?"decrease":"increase",ref:l}),c=g)}se();const We=df(Xe,a.platform.is.ios===!0?120:35);hf(()=>{se()});let tt=!1;return pr(()=>{tt=!0}),$u(()=>{if(tt!==!0)return;const g=t();u!==void 0&&g!==void 0&&g!==null&&g.nodeType!==8?Fa(g,u,r.virtualScrollHorizontal,a.lang.rtl):qe(c)}),ht(()=>{We.cancel()}),Object.assign(l,{scrollTo:qe,reset:K,refresh:we}),{virtualScrollSliceRange:b,virtualScrollSliceSizeComputed:w,setVirtualScrollSize:se,onVirtualScrollEvt:We,localResetVirtualScroll:Q,padVirtualScroll:Pe,scrollTo:qe,reset:K,refresh:we}}function Va(e,t,n){if(n<=t)return t;const i=n-t+1;let s=t+(e-t)%i;return s<t&&(s=i+s),s===0?0:s}const Wa=e=>["add","add-unique","toggle"].includes(e),Am=".*+?^${}()|[]\\",Lm=Object.keys(Uo);function Qr(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return i=>i!==null&&typeof i=="object"&&n in i?i[n]:i}const Ya=Ie({name:"QSelect",inheritAttrs:!1,props:{...qa,...lc,...Uo,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Wa},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:qa.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...ic,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:i}=Fe(),{$q:s}=i,r=z(!1),o=z(!1),l=z(-1),a=z(""),u=z(!1),c=z(!1);let d=null,h=null,m,p,y,w=null,Y,N,_,b;const V=z(null),B=z(null),$=z(null),K=z(null),we=z(null),qe=$f(e),Xe=jf(ma),ve=v(()=>Array.isArray(e.options)?e.options.length:0),je=v(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:H,virtualScrollSliceSizeComputed:Q,localResetVirtualScroll:se,padVirtualScroll:Pe,onVirtualScrollEvt:Ve,scrollTo:We,setVirtualScrollSize:tt}=Om({virtualScrollLength:ve,getVirtualScrollTarget:Fh,getVirtualScrollEl:ha,virtualScrollItemSizeComputed:je}),g=rc(),T=v(()=>{const f=e.mapOptions===!0&&e.multiple!==!0,M=e.modelValue!==void 0&&(e.modelValue!==null||f===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const D=e.mapOptions===!0&&m!==void 0?m:[],ee=M.map(_e=>qr(_e,D));return e.modelValue===null&&f===!0?ee.filter(_e=>_e!==null):ee}return M}),F=v(()=>{const f={};return Lm.forEach(M=>{const D=e[M];D!==void 0&&(f[M]=D)}),f}),Z=v(()=>e.optionsDark===null?g.isDark.value:e.optionsDark),ie=v(()=>Ta(T.value)),E=v(()=>{let f="q-field__input q-placeholder col";return e.hideSelected===!0||T.value.length===0?[f,e.inputClass]:(f+=" q-field__input--padding",e.inputClass===void 0?f:[f,e.inputClass])}),A=v(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),de=v(()=>ve.value===0),I=v(()=>T.value.map(f=>C.value(f)).join(", ")),Ce=v(()=>e.displayValue!==void 0?e.displayValue:I.value),mt=v(()=>e.optionsHtml===!0?()=>!0:f=>f?.html===!0),rn=v(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||T.value.some(mt.value))),wt=v(()=>g.focused.value===!0?e.tabindex:-1),Pt=v(()=>{const f={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${g.targetUid.value}_lb`};return l.value>=0&&(f["aria-activedescendant"]=`${g.targetUid.value}_${l.value}`),f}),Nt=v(()=>({id:`${g.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Yt=v(()=>T.value.map((f,M)=>({index:M,opt:f,html:mt.value(f),selected:!0,removeAtIndex:oe,toggleOption:Ge,tabindex:wt.value}))),Hn=v(()=>{if(ve.value===0)return[];const{from:f,to:M}=H.value;return e.options.slice(f,M).map((D,ee)=>{const _e=q.value(D)===!0,pe=yn(D)===!0,Qe=f+ee,Oe={clickable:!0,active:pe,activeClass:ln.value,manualFocus:!0,focused:!1,disable:_e,tabindex:-1,dense:e.optionsDense,dark:Z.value,role:"option","aria-selected":pe===!0?"true":"false",id:`${g.targetUid.value}_${Qe}`,onClick:()=>{Ge(D)}};return _e!==!0&&(l.value===Qe&&(Oe.focused=!0),s.platform.is.desktop===!0&&(Oe.onMousemove=()=>{r.value===!0&&Ot(Qe)})),{index:Qe,opt:D,html:mt.value(D),label:C.value(D),selected:Oe.active,focused:Oe.focused,toggleOption:Ge,setOptionIndex:Ot,itemProps:Oe}})}),on=v(()=>e.dropdownIcon!==void 0?e.dropdownIcon:s.iconSet.arrow.dropdown),zn=v(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ln=v(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),nt=v(()=>Qr(e.optionValue,"value")),C=v(()=>Qr(e.optionLabel,"label")),q=v(()=>Qr(e.optionDisable,"disable")),j=v(()=>T.value.map(nt.value)),Re=v(()=>{const f={onInput:ma,onChange:Xe,onKeydown:da,onKeyup:ua,onKeypress:ca,onFocus:bt,onClick(M){p===!0&&Qn(M)}};return f.onCompositionstart=f.onCompositionupdate=f.onCompositionend=Xe,f});De(T,f=>{m=f,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&g.innerLoading.value!==!0&&(o.value!==!0&&r.value!==!0||ie.value!==!0)&&(y!==!0&&Gn(),(o.value===!0||r.value===!0)&&Bn(""))},{immediate:!0}),De(()=>e.fillInput,Gn),De(r,Vr),De(ve,Qh);function xe(f){return e.emitValue===!0?nt.value(f):f}function ue(f){if(f!==-1&&f<T.value.length)if(e.multiple===!0){const M=e.modelValue.slice();n("remove",{index:f,value:M.splice(f,1)[0]}),n("update:modelValue",M)}else n("update:modelValue",null)}function oe(f){ue(f),g.focus()}function ze(f,M){const D=xe(f);if(e.multiple!==!0){e.fillInput===!0&&Ei(C.value(f),!0,!0),n("update:modelValue",D);return}if(T.value.length===0){n("add",{index:0,value:D}),n("update:modelValue",e.multiple===!0?[D]:D);return}if(M===!0&&yn(f)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const ee=e.modelValue.slice();n("add",{index:ee.length,value:D}),ee.push(D),n("update:modelValue",ee)}function Ge(f,M){if(g.editable.value!==!0||f===void 0||q.value(f)===!0)return;const D=nt.value(f);if(e.multiple!==!0){M!==!0&&(Ei(e.fillInput===!0?C.value(f):"",!0,!0),wn()),B.value?.focus(),(T.value.length===0||ei(nt.value(T.value[0]),D)!==!0)&&n("update:modelValue",e.emitValue===!0?D:f);return}if((p!==!0||u.value===!0)&&g.focus(),bt(),T.value.length===0){const pe=e.emitValue===!0?D:f;n("add",{index:0,value:pe}),n("update:modelValue",e.multiple===!0?[pe]:pe);return}const ee=e.modelValue.slice(),_e=j.value.findIndex(pe=>ei(pe,D));if(_e!==-1)n("remove",{index:_e,value:ee.splice(_e,1)[0]});else{if(e.maxValues!==void 0&&ee.length>=e.maxValues)return;const pe=e.emitValue===!0?D:f;n("add",{index:ee.length,value:pe}),ee.push(pe)}n("update:modelValue",ee)}function Ot(f){if(s.platform.is.desktop!==!0)return;const M=f!==-1&&f<ve.value?f:-1;l.value!==M&&(l.value=M)}function Un(f=1,M){if(r.value===!0){let D=l.value;do D=Va(D+f,-1,ve.value-1);while(D!==-1&&D!==l.value&&q.value(e.options[D])===!0);l.value!==D&&(Ot(D),We(D),M!==!0&&e.useInput===!0&&e.fillInput===!0&&bs(D>=0?C.value(e.options[D]):Y,!0))}}function qr(f,M){const D=ee=>ei(nt.value(ee),f);return e.options.find(D)||M.find(D)||f}function yn(f){const M=nt.value(f);return j.value.find(D=>ei(D,M))!==void 0}function bt(f){e.useInput===!0&&B.value!==null&&(f===void 0||B.value===f.target&&f.target.value===I.value)&&B.value.select()}function aa(f){wi(f,27)===!0&&r.value===!0&&(Qn(f),wn(),Gn()),n("keyup",f)}function ua(f){const{value:M}=f.target;if(f.keyCode!==void 0){aa(f);return}if(f.target.value="",d!==null&&(clearTimeout(d),d=null),h!==null&&(clearTimeout(h),h=null),Gn(),typeof M=="string"&&M.length!==0){const D=M.toLocaleLowerCase(),ee=pe=>{const Qe=e.options.find(Oe=>String(pe.value(Oe)).toLocaleLowerCase()===D);return Qe===void 0?!1:(T.value.indexOf(Qe)===-1?Ge(Qe):wn(),!0)},_e=pe=>{ee(nt)!==!0&&pe!==!0&&ee(C)!==!0&&Bn(M,!0,()=>_e(!0))};_e()}else g.clearValue(f)}function ca(f){n("keypress",f)}function da(f){if(n("keydown",f),Uu(f)===!0)return;const M=a.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),D=f.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(l.value!==-1||M===!0);if(f.keyCode===27){Yi(f);return}if(f.keyCode===9&&D===!1){$n();return}if(f.target===void 0||f.target.id!==g.targetUid.value||g.editable.value!==!0)return;if(f.keyCode===40&&g.innerLoading.value!==!0&&r.value===!1){Ke(f),jn();return}if(f.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&a.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ue(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(f.keyCode===35||f.keyCode===36)&&(typeof a.value!="string"||a.value.length===0)&&(Ke(f),l.value=-1,Un(f.keyCode===36?1:-1,e.multiple)),(f.keyCode===33||f.keyCode===34)&&Q.value!==void 0&&(Ke(f),l.value=Math.max(-1,Math.min(ve.value,l.value+(f.keyCode===33?-1:1)*Q.value.view)),Un(f.keyCode===33?1:-1,e.multiple)),(f.keyCode===38||f.keyCode===40)&&(Ke(f),Un(f.keyCode===38?-1:1,e.multiple));const ee=ve.value;if((_===void 0||b<Date.now())&&(_=""),ee>0&&e.useInput!==!0&&f.key!==void 0&&f.key.length===1&&f.altKey===!1&&f.ctrlKey===!1&&f.metaKey===!1&&(f.keyCode!==32||_.length!==0)){r.value!==!0&&jn(f);const _e=f.key.toLocaleLowerCase(),pe=_.length===1&&_[0]===_e;b=Date.now()+1500,pe===!1&&(Ke(f),_+=_e);const Qe=new RegExp("^"+_.split("").map(Wr=>Am.indexOf(Wr)!==-1?"\\"+Wr:Wr).join(".*"),"i");let Oe=l.value;if(pe===!0||Oe<0||Qe.test(C.value(e.options[Oe]))!==!0)do Oe=Va(Oe+1,-1,ee-1);while(Oe!==l.value&&(q.value(e.options[Oe])===!0||Qe.test(C.value(e.options[Oe]))!==!0));l.value!==Oe&&dt(()=>{Ot(Oe),We(Oe),Oe>=0&&e.useInput===!0&&e.fillInput===!0&&bs(C.value(e.options[Oe]),!0)});return}if(!(f.keyCode!==13&&(f.keyCode!==32||e.useInput===!0||_!=="")&&(f.keyCode!==9||D===!1))){if(f.keyCode!==9&&Ke(f),l.value!==-1&&l.value<ee){Ge(e.options[l.value]);return}if(M===!0){const _e=(pe,Qe)=>{if(Qe){if(Wa(Qe)!==!0)return}else Qe=e.newValueMode;if(Ei("",e.multiple!==!0,!0),pe==null)return;(Qe==="toggle"?Ge:ze)(pe,Qe==="add-unique"),e.multiple!==!0&&(B.value?.focus(),wn())};if(e.onNewValue!==void 0?n("newValue",a.value,_e):_e(a.value),e.multiple!==!0)return}r.value===!0?$n():g.innerLoading.value!==!0&&jn()}}function ha(){return p===!0?we.value:$.value!==null&&$.value.contentEl!==null?$.value.contentEl:void 0}function Fh(){return ha()}function qh(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?Yt.value.map(f=>t["selected-item"](f)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?Yt.value.map((f,M)=>S(fo,{key:"option-"+M,removable:g.editable.value===!0&&q.value(f.opt)!==!0,dense:!0,textColor:e.color,tabindex:wt.value,onRemove(){f.removeAtIndex(M)}},()=>S("span",{class:"ellipsis",[f.html===!0?"innerHTML":"textContent"]:C.value(f.opt)}))):[S("span",{class:"ellipsis",[rn.value===!0?"innerHTML":"textContent"]:Ce.value})]}function fa(){if(de.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:a.value}):void 0;const f=t.option!==void 0?t.option:D=>S(dm,{key:D.index,...D.itemProps},()=>S(hm,()=>S(fm,()=>S("span",{[D.html===!0?"innerHTML":"textContent"]:D.label}))));let M=Pe("div",Hn.value.map(f));return t["before-options"]!==void 0&&(M=t["before-options"]().concat(M)),mr(t["after-options"],M)}function Vh(f,M){const D=M===!0?{...Pt.value,...g.splitAttrs.attributes.value}:void 0,ee={ref:M===!0?B:void 0,key:"i_t",class:E.value,style:e.inputStyle,value:a.value!==void 0?a.value:"",type:"search",...D,id:M===!0?g.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":f===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Re.value};return f!==!0&&p===!0&&(Array.isArray(ee.class)===!0?ee.class=[...ee.class,"no-pointer-events"]:ee.class+=" no-pointer-events"),S("input",ee)}function ma(f){d!==null&&(clearTimeout(d),d=null),h!==null&&(clearTimeout(h),h=null),!(f&&f.target&&f.target.qComposing===!0)&&(bs(f.target.value||""),y=!0,Y=a.value,g.focused.value!==!0&&(p!==!0||u.value===!0)&&g.focus(),e.onFilter!==void 0&&(d=setTimeout(()=>{d=null,Bn(a.value)},e.inputDebounce)))}function bs(f,M){a.value!==f&&(a.value=f,M===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",f):h=setTimeout(()=>{h=null,n("inputValue",f)},e.inputDebounce))}function Ei(f,M,D){y=D!==!0,e.useInput===!0&&(bs(f,!0),(M===!0||D!==!0)&&(Y=f),M!==!0&&Bn(f))}function Bn(f,M,D){if(e.onFilter===void 0||M!==!0&&g.focused.value!==!0)return;g.innerLoading.value===!0?n("filterAbort"):(g.innerLoading.value=!0,c.value=!0),f!==""&&e.multiple!==!0&&T.value.length!==0&&y!==!0&&f===C.value(T.value[0])&&(f="");const ee=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);w!==null&&clearTimeout(w),w=ee,n("filter",f,(_e,pe)=>{(M===!0||g.focused.value===!0)&&w===ee&&(clearTimeout(w),typeof _e=="function"&&_e(),c.value=!1,dt(()=>{g.innerLoading.value=!1,g.editable.value===!0&&(M===!0?r.value===!0&&wn():r.value===!0?Vr(!0):r.value=!0),typeof pe=="function"&&dt(()=>{pe(i)}),typeof D=="function"&&dt(()=>{D(i)})}))},()=>{g.focused.value===!0&&w===ee&&(clearTimeout(w),g.innerLoading.value=!1,c.value=!1),r.value===!0&&(r.value=!1)})}function Wh(){return S(wc,{ref:$,class:A.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&de.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:Z.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:zn.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Nt.value,onScrollPassive:Ve,onBeforeShow:ga,onBeforeHide:Yh,onShow:Hh},fa)}function Yh(f){va(f),$n()}function Hh(){tt()}function zh(f){Qn(f),B.value?.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Uh(f){Qn(f),dt(()=>{u.value=!1})}function Bh(){const f=[S(cm,{class:`col-auto ${g.fieldClass.value}`,...F.value,for:g.targetUid.value,dark:Z.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:a.value.length!==0,...g.splitAttrs.listeners.value,onFocus:zh,onBlur:Uh},{...t,rawControl:()=>g.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&f.push(S("div",{ref:we,class:A.value+" scroll",style:e.popupContentStyle,...Nt.value,onClick:Yi,onScrollPassive:Ve},fa())),S(go,{ref:K,modelValue:o.value,position:e.useInput===!0?"top":void 0,transitionShow:N,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:ga,onBeforeHide:$h,onHide:jh,onShow:Gh},()=>S("div",{class:"q-select__dialog"+(Z.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},f))}function $h(f){va(f),K.value!==null&&K.value.__updateRefocusTarget(g.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),g.focused.value=!1}function jh(f){wn(),g.focused.value===!1&&n("blur",f),Gn()}function Gh(){const f=document.activeElement;(f===null||f.id!==g.targetUid.value)&&B.value!==null&&B.value!==f&&B.value.focus(),tt()}function $n(){o.value!==!0&&(l.value=-1,r.value===!0&&(r.value=!1),g.focused.value===!1&&(w!==null&&(clearTimeout(w),w=null),g.innerLoading.value===!0&&(n("filterAbort"),g.innerLoading.value=!1,c.value=!1)))}function jn(f){g.editable.value===!0&&(p===!0?(g.onControlFocusin(f),o.value=!0,dt(()=>{g.focus()})):g.focus(),e.onFilter!==void 0?Bn(a.value):(de.value!==!0||t["no-option"]!==void 0)&&(r.value=!0))}function wn(){o.value=!1,$n()}function Gn(){e.useInput===!0&&Ei(e.multiple!==!0&&e.fillInput===!0&&T.value.length!==0&&C.value(T.value[0])||"",!0,!0)}function Vr(f){let M=-1;if(f===!0){if(T.value.length!==0){const D=nt.value(T.value[0]);M=e.options.findIndex(ee=>ei(nt.value(ee),D))}se(M)}Ot(M)}function Qh(f,M){r.value===!0&&g.innerLoading.value===!1&&(se(-1,!0),dt(()=>{r.value===!0&&g.innerLoading.value===!1&&(f>M?se():Vr(!0))}))}function pa(){o.value===!1&&$.value!==null&&$.value.updatePosition()}function ga(f){f!==void 0&&Qn(f),n("popupShow",f),g.hasPopupOpen=!0,g.onControlFocusin(f)}function va(f){f!==void 0&&Qn(f),n("popupHide",f),g.hasPopupOpen=!1,g.onControlFocusout(f)}function _a(){p=s.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||de.value===!1:!0),N=s.platform.is.ios===!0&&p===!0&&e.useInput===!0?"fade":e.transitionShow}return ff(_a),mf(pa),_a(),ht(()=>{d!==null&&clearTimeout(d),h!==null&&clearTimeout(h)}),Object.assign(i,{showPopup:jn,hidePopup:wn,removeAtIndex:ue,add:ze,toggleOption:Ge,getOptionIndex:()=>l.value,setOptionIndex:Ot,moveOptionSelection:Un,filter:Bn,updateMenuPosition:pa,updateInputValue:Ei,isOptionSelected:yn,getEmittingOptionValue:xe,isOptionDisabled:(...f)=>q.value.apply(null,f)===!0,getOptionValue:(...f)=>nt.value.apply(null,f),getOptionLabel:(...f)=>C.value.apply(null,f)}),Object.assign(g,{innerValue:T,fieldClass:v(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:V,targetRef:B,hasValue:ie,showPopup:jn,floatingLabel:v(()=>e.hideSelected!==!0&&ie.value===!0||typeof a.value=="number"||a.value.length!==0||Ta(e.displayValue)),getControlChild:()=>{if(g.editable.value!==!1&&(o.value===!0||de.value!==!0||t["no-option"]!==void 0))return p===!0?Bh():Wh();g.hasPopupOpen===!0&&(g.hasPopupOpen=!1)},controlEvents:{onFocusin(f){g.onControlFocusin(f)},onFocusout(f){g.onControlFocusout(f,()=>{Gn(),$n()})},onClick(f){if(Yi(f),p!==!0&&r.value===!0){$n(),B.value?.focus();return}jn(f)}},getControl:f=>{const M=qh(),D=f===!0||o.value!==!0||p!==!0;if(e.useInput===!0)M.push(Vh(f,D));else if(g.editable.value===!0){const _e=D===!0?Pt.value:void 0;M.push(S("input",{ref:D===!0?B:void 0,key:"d_t",class:"q-select__focus-target",id:D===!0?g.targetUid.value:void 0,value:Ce.value,readonly:!0,"data-autofocus":f===!0||e.autofocus===!0||void 0,..._e,onKeydown:da,onKeyup:aa,onKeypress:ca})),D===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&M.push(S("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ua}))}if(qe.value!==void 0&&e.disable!==!0&&j.value.length!==0){const _e=j.value.map(pe=>S("option",{value:pe,selected:!0}));M.push(S("select",{class:"hidden",name:qe.value,multiple:e.multiple},_e))}const ee=e.useInput===!0||D!==!0?void 0:g.splitAttrs.attributes.value;return S("div",{class:"q-field__native row items-center",...ee,...g.splitAttrs.listeners.value},M)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[S(Et,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:on.value})]:null}),sc(g)}}),Fm=Ie({name:"QTooltip",inheritAttrs:!1,props:{...cc,...Bo,...Hi,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Hi.transitionShow,default:"jump-down"},transitionHide:{...Hi.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Bs},self:{type:String,default:"top middle",validator:Bs},offset:{type:Array,default:()=>[14,14],validator:yc},scrollTarget:ac,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...$o],setup(e,{slots:t,emit:n,attrs:i}){let s,r;const o=Fe(),{proxy:{$q:l}}=o,a=z(null),u=z(!1),c=v(()=>$s(e.anchor,l.lang.rtl)),d=v(()=>$s(e.self,l.lang.rtl)),h=v(()=>e.persistent!==!0),{registerTick:m,removeTick:p}=ri(),{registerTimeout:y}=pi(),{transitionProps:w,transitionStyle:Y}=Qo(e),{localScrollTarget:N,changeScrollEvent:_,unconfigureScrollTarget:b}=hc(e,tt),{anchorEl:V,canShow:B,anchorEvents:$}=dc({showing:u,configureAnchorEl:We}),{show:K,hide:we}=jo({showing:u,canShow:B,handleShow:je,handleHide:H,hideOnRouteChange:h,processOnMount:!0});Object.assign($,{delayShow:Pe,delayHide:Ve});const{showPortal:qe,hidePortal:Xe,renderPortal:ve}=Go(o,a,T,"tooltip");if(l.platform.is.mobile===!0){const F={anchorEl:V,innerRef:a,onClickOutside(ie){return we(ie),ie.target.classList.contains("q-dialog__backdrop")&&Ke(ie),!0}},Z=v(()=>e.modelValue===null&&e.persistent!==!0&&u.value===!0);De(Z,ie=>{(ie===!0?_c:Us)(F)}),ht(()=>{Us(F)})}function je(F){qe(),m(()=>{r=new MutationObserver(()=>se()),r.observe(a.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),se(),tt()}),s===void 0&&(s=De(()=>l.screen.width+"|"+l.screen.height+"|"+e.self+"|"+e.anchor+"|"+l.lang.rtl,se)),y(()=>{qe(!0),n("show",F)},e.transitionDuration)}function H(F){p(),Xe(),Q(),y(()=>{Xe(!0),n("hide",F)},e.transitionDuration)}function Q(){r!==void 0&&(r.disconnect(),r=void 0),s!==void 0&&(s(),s=void 0),b(),si($,"tooltipTemp")}function se(){Ko({targetEl:a.value,offset:e.offset,anchorEl:V.value,anchorOrigin:c.value,selfOrigin:d.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Pe(F){if(l.platform.is.mobile===!0){Ws(),document.body.classList.add("non-selectable");const Z=V.value,ie=["touchmove","touchcancel","touchend","click"].map(E=>[Z,E,"delayHide","passiveCapture"]);dn($,"tooltipTemp",ie)}y(()=>{K(F)},e.delay)}function Ve(F){l.platform.is.mobile===!0&&(si($,"tooltipTemp"),Ws(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{we(F)},e.hideDelay)}function We(){if(e.noParentEvent===!0||V.value===null)return;const F=l.platform.is.mobile===!0?[[V.value,"touchstart","delayShow","passive"]]:[[V.value,"mouseenter","delayShow","passive"],[V.value,"mouseleave","delayHide","passive"]];dn($,"anchor",F)}function tt(){if(V.value!==null||e.scrollTarget!==void 0){N.value=uc(V.value,e.scrollTarget);const F=e.noParentEvent===!0?se:we;_(N.value,F)}}function g(){return u.value===!0?S("div",{...i,ref:a,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,Y.value],role:"tooltip"},ct(t.default)):null}function T(){return S(Zi,w.value,g)}return ht(Q),Object.assign(o.proxy,{updatePosition:se}),ve}}),qm={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Vm(){const{props:e,proxy:{$q:t}}=Fe(),n=qs(Ju,gt);if(n===gt)return console.error("QPageSticky needs to be child of QLayout"),gt;const i=v(()=>{const d=e.position;return{top:d.indexOf("top")!==-1,right:d.indexOf("right")!==-1,bottom:d.indexOf("bottom")!==-1,left:d.indexOf("left")!==-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),s=v(()=>n.header.offset),r=v(()=>n.right.offset),o=v(()=>n.footer.offset),l=v(()=>n.left.offset),a=v(()=>{let d=0,h=0;const m=i.value,p=t.lang.rtl===!0?-1:1;m.top===!0&&s.value!==0?h=`${s.value}px`:m.bottom===!0&&o.value!==0&&(h=`${-o.value}px`),m.left===!0&&l.value!==0?d=`${p*l.value}px`:m.right===!0&&r.value!==0&&(d=`${-p*r.value}px`);const y={transform:`translate(${d}, ${h})`};return e.offset&&(y.margin=`${e.offset[1]}px ${e.offset[0]}px`),m.vertical===!0?(l.value!==0&&(y[t.lang.rtl===!0?"right":"left"]=`${l.value}px`),r.value!==0&&(y[t.lang.rtl===!0?"left":"right"]=`${r.value}px`)):m.horizontal===!0&&(s.value!==0&&(y.top=`${s.value}px`),o.value!==0&&(y.bottom=`${o.value}px`)),y}),u=v(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function c(d){const h=ct(d.default);return S("div",{class:u.value,style:a.value},e.expand===!0?h:[S("div",h)])}return{$layout:n,getStickyContent:c}}const Wm=Ie({name:"QPageSticky",props:qm,setup(e,{slots:t}){const{getStickyContent:n}=Vm();return()=>n(t)}}),Ym=["top","middle","bottom"],Hm=Ie({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Ym.includes(e)}},setup(e,{slots:t}){const n=v(()=>e.align!==void 0?{verticalAlign:e.align}:null),i=v(()=>{const s=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(s!==void 0?` text-${s}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>S("div",{class:i.value,style:n.value,role:"status","aria-label":e.label},mr(t.default,e.label!==void 0?[e.label]:[]))}});function zi(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const i=e.valueOf();if(Object(i)!==i){const s=new e.constructor(i);return t.set(e,s),s}}return t.set(e,n),e instanceof Set?e.forEach(i=>{n.add(zi(i,t))}):e instanceof Map&&e.forEach((i,s)=>{n.set(s,zi(i,t))}),Object.assign(n,...Object.keys(e).map(i=>({[i]:zi(e[i],t)})))}const zm=Ie({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:i}=Fe(),{$q:s}=i,r=z(null),o=z(""),l=z("");let a=!1;const u=v(()=>Ku({initialValue:o.value,validate:e.validate,set:c,cancel:d,updatePosition:h},"value",()=>l.value,b=>{l.value=b}));function c(){e.validate(l.value)!==!1&&(m()===!0&&(n("save",l.value,o.value),n("update:modelValue",l.value)),p())}function d(){m()===!0&&n("cancel",l.value,o.value),p()}function h(){dt(()=>{r.value.updatePosition()})}function m(){return ei(l.value,o.value)===!1}function p(){a=!0,r.value.hide()}function y(){a=!1,o.value=zi(e.modelValue),l.value=zi(e.modelValue),n("beforeShow")}function w(){n("show")}function Y(){a===!1&&m()===!0&&(e.autoSave===!0&&e.validate(l.value)===!0?(n("save",l.value,o.value),n("update:modelValue",l.value)):n("cancel",l.value,o.value)),n("beforeHide")}function N(){n("hide")}function _(){const b=t.default!==void 0?[].concat(t.default(u.value)):[];return e.title&&b.unshift(S("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&b.push(S("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[S(Ae,{flat:!0,color:e.color,label:e.labelCancel||s.lang.label.cancel,onClick:d}),S(Ae,{flat:!0,color:e.color,label:e.labelSet||s.lang.label.set,onClick:c})])),b}return Object.assign(i,{set:c,cancel:d,show(b){r.value?.show(b)},hide(b){r.value?.hide(b)},updatePosition:h}),()=>{if(e.disable!==!0)return S(wc,{ref:r,class:"q-popup-edit",cover:e.cover,onBeforeShow:y,onShow:w,onBeforeHide:Y,onHide:N,onEscapeKey:d},_)}}}),Um={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Kr={xs:2,sm:4,md:8,lg:16,xl:24},Ha=Ie({name:"QSeparator",props:{...Fn,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=Fe(),n=qn(e,t.proxy.$q),i=v(()=>e.vertical===!0?"vertical":"horizontal"),s=v(()=>` q-separator--${i.value}`),r=v(()=>e.inset!==!1?`${s.value}-${Um[e.inset]}`:""),o=v(()=>`q-separator${s.value}${r.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),l=v(()=>{const a={};if(e.size!==void 0&&(a[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const u=e.spaced===!0?`${Kr.md}px`:e.spaced in Kr?`${Kr[e.spaced]}px`:e.spaced,c=e.vertical===!0?["Left","Right"]:["Top","Bottom"];a[`margin${c[0]}`]=a[`margin${c[1]}`]=u}return a});return()=>S("hr",{class:o.value,style:l.value,"aria-orientation":i.value})}}),Zo={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Bm=Object.keys(Zo);Zo.all=!0;function za(e){const t={};for(const n of Bm)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?Zo:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const $m=["INPUT","TEXTAREA"];function Ua(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&$m.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function jm(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,i)=>{const s=parseFloat(n);s&&(t[i]=s)}),t}const Gm=ec({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:i}){if(i.mouse!==!0&&rt.has.touch!==!0)return;const s=i.mouseCapture===!0?"Capture":"",r={handler:t,sensitivity:jm(n),direction:za(i),noop:Xu,mouseStart(o){Ua(o,r)&&pf(o)&&(dn(r,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(o,!0))},touchStart(o){if(Ua(o,r)){const l=o.target;dn(r,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),r.start(o)}},start(o,l){rt.is.firefox===!0&&Yr(e,!0);const a=ho(o);r.event={x:a.left,y:a.top,time:Date.now(),mouse:l===!0,dir:!1}},move(o){if(r.event===void 0)return;if(r.event.dir!==!1){Ke(o);return}const l=Date.now()-r.event.time;if(l===0)return;const a=ho(o),u=a.left-r.event.x,c=Math.abs(u),d=a.top-r.event.y,h=Math.abs(d);if(r.event.mouse!==!0){if(c<r.sensitivity[1]&&h<r.sensitivity[1]){r.end(o);return}}else if(window.getSelection().toString()!==""){r.end(o);return}else if(c<r.sensitivity[2]&&h<r.sensitivity[2])return;const m=c/l,p=h/l;r.direction.vertical===!0&&c<h&&c<100&&p>r.sensitivity[0]&&(r.event.dir=d<0?"up":"down"),r.direction.horizontal===!0&&c>h&&h<100&&m>r.sensitivity[0]&&(r.event.dir=u<0?"left":"right"),r.direction.up===!0&&c<h&&d<0&&c<100&&p>r.sensitivity[0]&&(r.event.dir="up"),r.direction.down===!0&&c<h&&d>0&&c<100&&p>r.sensitivity[0]&&(r.event.dir="down"),r.direction.left===!0&&c>h&&u<0&&h<100&&m>r.sensitivity[0]&&(r.event.dir="left"),r.direction.right===!0&&c>h&&u>0&&h<100&&m>r.sensitivity[0]&&(r.event.dir="right"),r.event.dir!==!1?(Ke(o),r.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ws(),r.styleCleanup=y=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const w=()=>{document.body.classList.remove("no-pointer-events--children")};y===!0?setTimeout(w,50):w()}),r.handler({evt:o,touch:r.event.mouse!==!0,mouse:r.event.mouse,direction:r.event.dir,duration:l,distance:{x:c,y:h}})):r.end(o)},end(o){r.event!==void 0&&(si(r,"temp"),rt.is.firefox===!0&&Yr(e,!1),r.styleCleanup?.(!0),o!==void 0&&r.event.dir!==!1&&Ke(o),r.event=void 0)}};if(e.__qtouchswipe=r,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";dn(r,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}rt.has.touch===!0&&dn(r,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=za(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(si(t,"main"),si(t,"temp"),rt.is.firefox===!0&&Yr(e,!1),t.styleCleanup?.(),delete e.__qtouchswipe)}});function Qm(){let e=Object.create(null);return{getCache:(t,n)=>e[t]===void 0?e[t]=typeof n=="function"?n():n:e[t],setCache(t,n){e[t]=n},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const Km={name:{required:!0},disable:Boolean},Ba={setup(e,{slots:t}){return()=>S("div",{class:"q-panel scroll",role:"tabpanel"},ct(t.default))}},Zm={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Xm=["update:modelValue","beforeTransition","transition"];function Jm(){const{props:e,emit:t,proxy:n}=Fe(),{getCache:i}=Qm(),{registerTimeout:s}=pi();let r,o;const l=z(null),a={value:null};function u(H){const Q=e.vertical===!0?"up":"left";K((n.$q.lang.rtl===!0?-1:1)*(H.direction===Q?1:-1))}const c=v(()=>[[Gm,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=v(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),h=v(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),m=v(()=>`--q-transition-duration: ${e.transitionDuration}ms`),p=v(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),y=v(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=v(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);De(()=>e.modelValue,(H,Q)=>{const se=b(H)===!0?V(H):-1;o!==!0&&$(se===-1?0:se<V(Q)?-1:1),a.value!==se&&(a.value=se,t("beforeTransition",H,Q),s(()=>{t("transition",H,Q)},e.transitionDuration))});function Y(){K(1)}function N(){K(-1)}function _(H){t("update:modelValue",H)}function b(H){return H!=null&&H!==""}function V(H){return r.findIndex(Q=>Q.props.name===H&&Q.props.disable!==""&&Q.props.disable!==!0)}function B(){return r.filter(H=>H.props.disable!==""&&H.props.disable!==!0)}function $(H){const Q=H!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(H===-1?d.value:h.value):null;l.value!==Q&&(l.value=Q)}function K(H,Q=a.value){let se=Q+H;for(;se!==-1&&se<r.length;){const Pe=r[se];if(Pe!==void 0&&Pe.props.disable!==""&&Pe.props.disable!==!0){$(H),o=!0,t("update:modelValue",Pe.props.name),setTimeout(()=>{o=!1});return}se+=H}e.infinite===!0&&r.length!==0&&Q!==-1&&Q!==r.length&&K(H,H===-1?r.length:-1)}function we(){const H=V(e.modelValue);return a.value!==H&&(a.value=H),!0}function qe(){const H=b(e.modelValue)===!0&&we()&&r[a.value];return e.keepAlive===!0?[S(vf,y.value,[S(w.value===!0?i(p.value,()=>({...Ba,name:p.value})):Ba,{key:p.value,style:m.value},()=>H)])]:[S("div",{class:"q-panel scroll",style:m.value,key:p.value,role:"tabpanel"},[H])]}function Xe(){if(r.length!==0)return e.animated===!0?[S(Zi,{name:l.value},qe)]:qe()}function ve(H){return r=gf(ct(H.default,[])).filter(Q=>Q.props!==null&&Q.props.slot===void 0&&b(Q.props.name)===!0),r.length}function je(){return r}return Object.assign(n,{next:Y,previous:N,goTo:_}),{panelIndex:a,panelDirectives:c,updatePanelsList:ve,updatePanelIndex:we,getPanelContent:Xe,getEnabledPanels:B,getPanels:je,isValidPanelName:b,keepAliveProps:y,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:K,goToPanel:_,nextPanel:Y,previousPanel:N}}const $a=Ie({name:"QTabPanel",props:Km,setup(e,{slots:t}){return()=>S("div",{class:"q-tab-panel",role:"tabpanel"},ct(t.default))}});function ep(e,t){const n=z(null),i=v(()=>e.disable===!0?null:S("span",{ref:n,class:"no-outline",tabindex:-1}));function s(r){const o=t.value;r?.qAvoidFocus!==!0&&(r?.type.indexOf("key")===0?document.activeElement!==o&&o?.contains(document.activeElement)===!0&&o.focus():n.value!==null&&(r===void 0||o?.contains(r.target)===!0)&&n.value.focus())}return{refocusTargetEl:i,refocusTarget:s}}const tp={xs:30,sm:35,md:40,lg:50,xl:60},np=()=>S("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[S("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),S("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),Mi=Ie({name:"QRadio",props:{...Fn,...ju,...lc,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:i}=Fe(),s=qn(e,i.$q),r=Gu(e,tp),o=z(null),{refocusTargetEl:l,refocusTarget:a}=ep(e,o),u=v(()=>ba(e.modelValue)===ba(e.val)),c=v(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),d=v(()=>{const b=e.color!==void 0&&(e.keepColor===!0||u.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${b}`}),h=v(()=>(u.value===!0?e.checkedIcon:e.uncheckedIcon)||null),m=v(()=>e.disable===!0?-1:e.tabindex||0),p=v(()=>{const b={type:"radio"};return e.name!==void 0&&Object.assign(b,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:e.name,value:e.val}),b}),y=Gf(p);function w(b){b!==void 0&&(Ke(b),a(b)),e.disable!==!0&&u.value!==!0&&n("update:modelValue",e.val,b)}function Y(b){(b.keyCode===13||b.keyCode===32)&&Ke(b)}function N(b){(b.keyCode===13||b.keyCode===32)&&w(b)}Object.assign(i,{set:w});const _=np();return()=>{const b=h.value!==null?[S("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[S(Et,{class:"q-radio__icon",name:h.value})])]:[_];e.disable!==!0&&y(b,"unshift"," q-radio__native q-ma-none q-pa-none");const V=[S("div",{class:d.value,style:r.value,"aria-hidden":"true"},b)];l.value!==null&&V.push(l.value);const B=e.label!==void 0?mr(t.default,[e.label]):ct(t.default);return B!==void 0&&V.push(S("div",{class:"q-radio__label q-anchor--skip"},B)),S("div",{ref:o,class:c.value,tabindex:m.value,role:"radio","aria-label":e.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:w,onKeydown:Y,onKeyup:N},V)}}}),ip='<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>',sp=Ie({name:"QSpinnerHourglass",props:_f,setup(e){const{cSize:t,classes:n}=yf(e);return()=>S("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:ip})}}),rp=Ie({name:"QTabPanels",props:{...Zm,...Fn},emits:Xm,setup(e,{slots:t}){const n=Fe(),i=qn(e,n.proxy.$q),{updatePanelsList:s,getPanelContent:r,panelDirectives:o}=Jm(),l=v(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(t),Qu("div",{class:l.value},r(),"pan",e.swipeable,()=>o.value))}}),ja=Ie({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=v(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>S(e.tag,{class:n.value},ct(t.default))}}),Ga=Ie({name:"QCard",props:{...Fn,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Fe(),i=qn(e,n),s=v(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>S(e.tag,{class:s.value},ct(t.default))}}),op=Ie({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Fe(),i=qs(Ju,gt);if(i===gt)return console.error("QPage needs to be a deep child of QLayout"),gt;if(qs(wf,gt)===gt)return console.error("QPage needs to be child of QPageContainer"),gt;const r=v(()=>{const l=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof e.styleFn=="function"){const a=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return e.styleFn(l,a)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-l+"px":n.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":n.screen.height-l+"px"}}),o=v(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>S("main",{class:o.value,style:r.value},ct(t.default))}});function Qa(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const Zr=ec({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Qa(t),handler(i){n.depth!==0&&setTimeout(()=>{const s=pm(e);s!==void 0&&gm(s,i,n.depth)})},handlerKey(i){wi(i,13)===!0&&n.handler(i)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Qa(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});var Ka={};const Za="@firebase/database",Xa="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc="";function lp(e){kc=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),$e(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:zo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return tn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ap(t)}}catch{}return new up},xn=Sc("localStorage"),cp=Sc("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Cf("@firebase/database"),dp=(function(){let e=1;return function(){return e++}})(),Cc=function(e){const t=Mf(e),n=new Df;n.update(t);const i=n.digest();return Pf.encodeByteArray(i)},ds=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=ds.apply(null,i):typeof i=="object"?t+=$e(i):t+=i,t+=" "}return t};let Ui=null,Ja=!0;const hp=function(e,t){x(!0,"Can't turn on custom loggers persistently."),ai.logLevel=Rf.VERBOSE,Ui=ai.log.bind(ai)},Je=function(...e){if(Ja===!0&&(Ja=!1,Ui===null&&cp.get("logging_enabled")===!0&&hp()),Ui){const t=ds.apply(null,e);Ui(t)}},hs=function(e){return function(...t){Je(e,...t)}},vo=function(...e){const t="FIREBASE INTERNAL ERROR: "+ds(...e);ai.error(t)},Xt=function(...e){const t=`FIREBASE FATAL ERROR: ${ds(...e)}`;throw ai.error(t),new Error(t)},at=function(...e){const t="FIREBASE WARNING: "+ds(...e);ai.warn(t)},fp=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&at("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xc=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},mp=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vi="[MIN_NAME]",Pn="[MAX_NAME]",bi=function(e,t){if(e===t)return 0;if(e===vi||t===Pn)return-1;if(t===vi||e===Pn)return 1;{const n=eu(e),i=eu(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},pp=function(e,t){return e===t?0:e<t?-1:1},Di=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$e(t))},Xo=function(e){if(typeof e!="object"||e===null)return $e(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=$e(t[i]),n+=":",n+=Xo(e[t[i]]);return n+="}",n},Tc=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function ut(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ec=function(e){x(!xc(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let s,r,o,l,a;e===0?(r=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=l+i,o=Math.round(e*Math.pow(2,n-l)-Math.pow(2,n))):(r=0,o=Math.round(e/Math.pow(2,1-i-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=t;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(s?1:0),u.reverse();const c=u.join("");let d="";for(a=0;a<64;a+=8){let h=parseInt(c.substr(a,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},gp=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _p(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}const yp=new RegExp("^-?(0*)\\d{1,10}$"),wp=-2147483648,bp=2147483647,eu=function(e){if(yp.test(e)){const t=Number(e);if(t>=wp&&t<=bp)return t}return null},ki=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw at("Exception was thrown by user callback.",n),t},Math.floor(0))}},kp=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bi=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Af(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){at(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',at(t)}}class Ns{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Ns.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="5",Ic="v",Rc="s",Mc="r",Dc="f",Pc=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Nc="ls",Oc="p",_o="ac",Ac="websocket",Lc="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n,i,s,r=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&xn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function xp(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function qc(e,t,n){x(typeof t=="string","typeof type must == string"),x(typeof n=="object","typeof params must == object");let i;if(t===Ac)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Lc)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);xp(e)&&(n.ns=e.namespace);const s=[];return ut(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.counters_={}}incrementCounter(t,n=1){tn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return Wf(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr={},Jr={};function el(e){const t=e.toString();return Xr[t]||(Xr[t]=new Tp),Xr[t]}function Ep(e,t){const n=e.toString();return Jr[n]||(Jr[n]=t()),Jr[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&ki(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="start",Rp="close",Mp="pLPCommand",Dp="pRTLPCB",Vc="id",Wc="pw",Yc="ser",Pp="cb",Np="seg",Op="ts",Ap="d",Lp="dframe",Hc=1870,zc=30,Fp=Hc-zc,qp=25e3,Vp=3e4;class ni{constructor(t,n,i,s,r,o,l){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hs(t),this.stats_=el(n),this.urlFn=a=>(this.appCheckToken&&(a[_o]=this.appCheckToken),qc(n,Lc,a))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ip(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Vp)),mp(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tl((...r)=>{const[o,l,a,u,c]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===tu)this.id=l,this.password=a;else if(o===Rp)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[tu]="t",i[Yc]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Pp]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Ic]=Jo,this.transportSessionId&&(i[Rc]=this.transportSessionId),this.lastSessionId&&(i[Nc]=this.lastSessionId),this.applicationId&&(i[Oc]=this.applicationId),this.appCheckToken&&(i[_o]=this.appCheckToken),typeof location<"u"&&location.hostname&&Pc.test(location.hostname)&&(i[Mc]=Dc);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ni.forceAllow_=!0}static forceDisallow(){ni.forceDisallow_=!0}static isAvailable(){return ni.forceAllow_?!0:!ni.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!gp()&&!vp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=$e(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Yf(n),s=Tc(i,Fp);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Lp]="t",i[Vc]=t,i[Wc]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=$e(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class tl{constructor(t,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=dp(),window[Mp+this.uniqueCallbackIdentifier]=t,window[Dp+this.uniqueCallbackIdentifier]=n,this.myIFrame=tl.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Je("frame writing exception"),l.stack&&Je(l.stack),Je(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Je("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Vc]=this.myID,t[Wc]=this.myPW,t[Yc]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+zc+i.length<=Hc;){const o=this.pendingSegs.shift();i=i+"&"+Np+s+"="+o.seg+"&"+Op+s+"="+o.ts+"&"+Ap+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(qp)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Je("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=16384,Yp=45e3;let js=null;typeof MozWebSocket<"u"?js=MozWebSocket:typeof WebSocket<"u"&&(js=WebSocket);class St{constructor(t,n,i,s,r,o,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hs(this.connId),this.stats_=el(n),this.connURL=St.connectionURL_(n,o,l,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,s,r){const o={};return o[Ic]=Jo,typeof location<"u"&&location.hostname&&Pc.test(location.hostname)&&(o[Mc]=Dc),n&&(o[Rc]=n),i&&(o[Nc]=i),s&&(o[_o]=s),r&&(o[Oc]=r),qc(t,Ac,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xn.set("previous_websocket_failure",!0);try{let i;Hf(),this.mySock=new js(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){St.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&js!==null&&!St.forceDisallow_}static previouslyFailed(){return xn.isInMemoryStorage||xn.get("previous_websocket_failure")===!0}markConnectionHealthy(){xn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=zo(n);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(x(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const n=$e(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Tc(n,Wp);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Yp))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}St.responsesRequiredToBeHealthy=2;St.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{static get ALL_TRANSPORTS(){return[ni,St]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=St&&St.isAvailable();let i=n&&!St.previouslyFailed();if(t.webSocketOnly&&(n||at("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[St];else{const s=this.transports_=[];for(const r of Ji.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);Ji.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ji.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=6e4,zp=5e3,Up=10*1024,Bp=100*1024,eo="t",nu="d",$p="s",iu="r",jp="e",su="o",ru="a",ou="n",lu="p",Gp="h";class Qp{constructor(t,n,i,s,r,o,l,a,u,c){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hs("c:"+this.id+":"),this.transportManager_=new Ji(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Bi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Bp?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Up?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(eo in t){const n=t[eo];n===ru?this.upgradeIfSecondaryHealthy_():n===iu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===su&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Di("t",t),i=Di("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lu,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ru,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ou,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Di("t",t),i=Di("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Di(eo,t);if(nu in t){const i=t[nu];if(n===Gp){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===ou){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===$p?this.onConnectionShutdown_(i):n===iu?this.onReset_(i):n===jp?vo("Server Error: "+i):n===su?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vo("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Jo!==i&&at("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Bi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Hp))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zp))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lu,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t){this.allowedEvents_=t,this.listeners_={},x(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){x(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Bc{static getInstance(){return new Gs}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return x(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=32,uu=768;class ge{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function ce(){return new ge("")}function X(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function gn(e){return e.pieces_.length-e.pieceNum_}function ye(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ge(e.pieces_,t)}function $c(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Kp(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function jc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Gc(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ge(t,0)}function Ye(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ge)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new ge(n,0)}function te(e){return e.pieceNum_>=e.pieces_.length}function ot(e,t){const n=X(e),i=X(t);if(n===null)return t;if(n===i)return ot(ye(e),ye(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function nl(e,t){if(gn(e)!==gn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Ct(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(gn(e)>gn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Zp{constructor(t,n){this.errorPrefix_=n,this.parts_=jc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=gr(this.parts_[i]);Qc(this)}}function Xp(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=gr(t),Qc(e)}function Jp(e){const t=e.parts_.pop();e.byteLength_-=gr(t),e.parts_.length>0&&(e.byteLength_-=1)}function Qc(e){if(e.byteLength_>uu)throw new Error(e.errorPrefix_+"has a key path longer than "+uu+" bytes ("+e.byteLength_+").");if(e.parts_.length>au)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+au+") or object contains a cycle "+Cn(e))}function Cn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends Bc{static getInstance(){return new il}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return x(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=1e3,eg=300*1e3,cu=30*1e3,tg=1.3,ng=3e4,ig="server_kill",du=3;class Qt extends Uc{constructor(t,n,i,s,r,o,l,a){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Qt.nextPersistentConnectionId_++,this.log_=hs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pi,this.maxReconnectDelay_=eg,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");il.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Gs.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const s=++this.requestNumber_,r={r:s,a:t,b:n};this.log_($e(r)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const n=new Yo,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(t,n,i,s){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),x(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:t,tag:i};this.listens.get(o).set(r,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(t){const n=t.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";t.tag&&(r.q=n._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest(o,r,l=>{const a=l.d,u=l.s;Qt.warnOnListenWarnings_(a,n),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,a))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&tn(t,"w")){const i=mi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();at(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Ff(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cu)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=qf(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===t&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,i=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(t,n){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),x(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,n)}sendUnlisten_(t,n,i,s){this.log_("Unlisten on "+t+" for "+n);const r={p:t},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,n,i,s){this.putInternal("p",t,n,i,s)}merge(t,n,i,s){this.putInternal("m",t,n,i,s)}putInternal(t,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+$e(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):vo("Unrecognized action received from server: "+$e(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ng&&(this.reconnectDelay_=Pi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tg)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Qt.nextConnectionId_++,r=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,i())},u=function(d){x(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,l=new Qp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,m=>{at(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(ig)},r))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&at(d),a())}}}interrupt(t){Je("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Je("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Sa(this.interruptReasons_)&&(this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;n?i=n.map(r=>Xo(r)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const i=new ge(t).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,n){Je("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=du&&(this.reconnectDelay_=cu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Je("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=du&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+kc.replace(/\./g,"-")]=1,nc()?t["framework.cordova"]=1:Vf()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Gs.getInstance().currentlyOnline();return Sa(this.interruptReasons_)&&t}}Qt.nextPersistentConnectionId_=0;Qt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new J(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new J(vi,t),s=new J(vi,n);return this.compare(i,s)!==0}minPost(){return J.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts;class Kc extends vr{static get __EMPTY_NODE(){return Ts}static set __EMPTY_NODE(t){Ts=t}compare(t,n){return bi(t.name,n.name)}isDefinedOn(t){throw cs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return J.MIN}maxPost(){return new J(Pn,Ts)}makePost(t,n){return x(typeof t=="string","KeyIndex indexValue must always be a string."),new J(t,Ts)}toString(){return".key"}}const ui=new Kc;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Be{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??Be.RED,this.left=s??lt.EMPTY_NODE,this.right=r??lt.EMPTY_NODE}copy(t,n,i,s,r){return new Be(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return lt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,s;if(i=this,n(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(t,i.key)===0){if(i.right.isEmpty())return lt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Be.RED=!0;Be.BLACK=!1;class sg{copy(t,n,i,s,r){return this}insert(t,n,i){return new Be(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class lt{constructor(t,n=lt.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new lt(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Be.BLACK,null,null))}remove(t){return new lt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Be.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Es(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Es(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Es(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Es(this.root_,null,this.comparator_,!0,t)}}lt.EMPTY_NODE=new sg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(e,t){return bi(e.name,t.name)}function sl(e,t){return bi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo;function og(e){yo=e}const Zc=function(e){return typeof e=="number"?"number:"+Ec(e):"string:"+e},Xc=function(e){if(e.isLeafNode()){const t=e.val();x(typeof t=="string"||typeof t=="number"||typeof t=="object"&&tn(t,".sv"),"Priority must be a string or number.")}else x(e===yo||e.isEmpty(),"priority of unexpected type.");x(e===yo||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;class Ue{static set __childrenNodeConstructor(t){hu=t}static get __childrenNodeConstructor(){return hu}constructor(t,n=Ue.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,x(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Xc(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ue(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ue.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return te(t)?this:X(t)===".priority"?this.priorityNode_:Ue.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Ue.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=X(t);return i===null?n:n.isEmpty()&&i!==".priority"?this:(x(i!==".priority"||gn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Ue.__childrenNodeConstructor.EMPTY_NODE.updateChild(ye(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Zc(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=Ec(this.value_):t+=this.value_,this.lazyHash_=Cc(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ue.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ue.__childrenNodeConstructor?-1:(x(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,s=Ue.VALUE_TYPE_ORDER.indexOf(n),r=Ue.VALUE_TYPE_ORDER.indexOf(i);return x(s>=0,"Unknown leaf type: "+n),x(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ue.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc,ed;function lg(e){Jc=e}function ag(e){ed=e}class ug extends vr{compare(t,n){const i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?bi(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return J.MIN}maxPost(){return new J(Pn,new Ue("[PRIORITY-POST]",ed))}makePost(t,n){const i=Jc(t);return new J(n,new Ue("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ne=new ug;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=Math.log(2);class dg{constructor(t){const n=r=>parseInt(Math.log(r)/cg,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Qs=function(e,t,n,i){e.sort(t);const s=function(a,u){const c=u-a;let d,h;if(c===0)return null;if(c===1)return d=e[a],h=n?n(d):d,new Be(h,d.node,Be.BLACK,null,null);{const m=parseInt(c/2,10)+a,p=s(a,m),y=s(m+1,u);return d=e[m],h=n?n(d):d,new Be(h,d.node,Be.BLACK,p,y)}},r=function(a){let u=null,c=null,d=e.length;const h=function(p,y){const w=d-p,Y=d;d-=p;const N=s(w+1,Y),_=e[w],b=n?n(_):_;m(new Be(b,_.node,y,null,N))},m=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<a.count;++p){const y=a.nextBitIsOne(),w=Math.pow(2,a.count-(p+1));y?h(w,Be.BLACK):(h(w,Be.BLACK),h(w,Be.RED))}return c},o=new dg(e.length),l=r(o);return new lt(i||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to;const Xn={};class Ut{static get Default(){return x(Xn&&Ne,"ChildrenNode.ts has not been loaded"),to=to||new Ut({".priority":Xn},{".priority":Ne}),to}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=mi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof lt?n:null}hasIndex(t){return tn(this.indexSet_,t.toString())}addIndex(t,n){x(t!==ui,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(J.Wrap);let o=r.getNext();for(;o;)s=s||t.isDefinedOn(o.node),i.push(o),o=r.getNext();let l;s?l=Qs(i,t.getCompare()):l=Xn;const a=t.toString(),u=Object.assign({},this.indexSet_);u[a]=t;const c=Object.assign({},this.indexes_);return c[a]=l,new Ut(c,u)}addToIndexes(t,n){const i=Vs(this.indexes_,(s,r)=>{const o=mi(this.indexSet_,r);if(x(o,"Missing index implementation for "+r),s===Xn)if(o.isDefinedOn(t.node)){const l=[],a=n.getIterator(J.Wrap);let u=a.getNext();for(;u;)u.name!==t.name&&l.push(u),u=a.getNext();return l.push(t),Qs(l,o.getCompare())}else return Xn;else{const l=n.get(t.name);let a=s;return l&&(a=a.remove(new J(t.name,l))),a.insert(t,t.node)}});return new Ut(i,this.indexSet_)}removeFromIndexes(t,n){const i=Vs(this.indexes_,s=>{if(s===Xn)return s;{const r=n.get(t.name);return r?s.remove(new J(t.name,r)):s}});return new Ut(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni;class U{static get EMPTY_NODE(){return Ni||(Ni=new U(new lt(sl),null,Ut.Default))}constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Xc(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ni}updatePriority(t){return this.children_.isEmpty()?this:new U(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Ni:n}}getChild(t){const n=X(t);return n===null?this:this.getImmediateChild(n).getChild(ye(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(x(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const i=new J(t,n);let s,r;n.isEmpty()?(s=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?Ni:this.priorityNode_;return new U(s,o,r)}}updateChild(t,n){const i=X(t);if(i===null)return n;{x(X(t)!==".priority"||gn(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ye(t),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(Ne,(o,l)=>{n[o]=l.val(t),i++,r&&U.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!t&&r&&s<2*i){const o=[];for(const l in n)o[l]=n[l];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Zc(this.getPriority().val())+":"),this.forEachChild(Ne,(n,i)=>{const s=i.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":Cc(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new J(t,n));return r?r.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new J(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new J(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,J.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,J.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)>0;)s.getNext(),r=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fs?-1:0}withIndex(t){if(t===ui||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new U(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===ui||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ne),s=n.getIterator(Ne);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===ui?null:this.indexMap_.get(t.toString())}}U.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hg extends U{constructor(){super(new lt(sl),U.EMPTY_NODE,Ut.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return U.EMPTY_NODE}isEmpty(){return!1}}const fs=new hg;Object.defineProperties(J,{MIN:{value:new J(vi,U.EMPTY_NODE)},MAX:{value:new J(Pn,fs)}});Kc.__EMPTY_NODE=U.EMPTY_NODE;Ue.__childrenNodeConstructor=U;og(fs);ag(fs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=!0;function Ze(e,t=null){if(e===null)return U.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),x(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Ue(n,Ze(t))}if(!(e instanceof Array)&&fg){const n=[];let i=!1;if(ut(e,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ze(l);a.isEmpty()||(i=i||!a.getPriority().isEmpty(),n.push(new J(o,a)))}}),n.length===0)return U.EMPTY_NODE;const r=Qs(n,rg,o=>o.name,sl);if(i){const o=Qs(n,Ne.getCompare());return new U(r,Ze(t),new Ut({".priority":o},{".priority":Ne}))}else return new U(r,Ze(t),Ut.Default)}else{let n=U.EMPTY_NODE;return ut(e,(i,s)=>{if(tn(e,i)&&i.substring(0,1)!=="."){const r=Ze(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Ze(t))}}lg(Ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends vr{constructor(t){super(),this.indexPath_=t,x(!te(t)&&X(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?bi(t.name,n.name):r}makePost(t,n){const i=Ze(t),s=U.EMPTY_NODE.updateChild(this.indexPath_,i);return new J(n,s)}maxPost(){const t=U.EMPTY_NODE.updateChild(this.indexPath_,fs);return new J(Pn,t)}toString(){return jc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends vr{compare(t,n){const i=t.node.compareTo(n.node);return i===0?bi(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return J.MIN}maxPost(){return J.MAX}makePost(t,n){const i=Ze(t);return new J(n,i)}toString(){return".value"}}const gg=new pg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e){return{type:"value",snapshotNode:e}}function _i(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function es(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ts(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function vg(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t){this.index_=t}updateChild(t,n,i,s,r,o){x(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(n);return l.getChild(s).equals(i.getChild(s))&&l.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?t.hasChild(n)?o.trackChildChange(es(n,l)):x(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(_i(n,i)):o.trackChildChange(ts(n,i,l))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(t,n,i){return i!=null&&(t.isLeafNode()||t.forEachChild(Ne,(s,r)=>{n.hasChild(s)||i.trackChildChange(es(s,r))}),n.isLeafNode()||n.forEachChild(Ne,(s,r)=>{if(t.hasChild(s)){const o=t.getImmediateChild(s);o.equals(r)||i.trackChildChange(ts(s,r,o))}else i.trackChildChange(_i(s,r))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?U.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.indexedFilter_=new rl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ns.getStartPost_(t),this.endPost_=ns.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&i}updateChild(t,n,i,s,r,o){return this.matches(new J(n,i))||(i=U.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,i,s,r,o)}updateFullNode(t,n,i){n.isLeafNode()&&(n=U.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(U.EMPTY_NODE);const r=this;return n.forEachChild(Ne,(o,l)=>{r.matches(new J(o,l))||(s=s.updateImmediateChild(o,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ns(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,i,s,r,o){return this.rangedFilter_.matches(new J(n,i))||(i=U.EMPTY_NODE),t.getImmediateChild(n).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,i,s,r,o):this.fullLimitUpdateChild_(t,n,i,r,o)}updateFullNode(t,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=U.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=U.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const l=r.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(U.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const l=r.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,i,s,r){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,m)=>d(m,h)}else o=this.index_.getCompare();const l=t;x(l.numChildren()===this.limit_,"");const a=new J(n,i),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||l.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const m=h==null?1:o(h,a);if(c&&!i.isEmpty()&&m>=0)return r?.trackChildChange(ts(n,i,d)),l.updateImmediateChild(n,i);{r?.trackChildChange(es(n,d));const y=l.updateImmediateChild(n,U.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r?.trackChildChange(_i(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return i.isEmpty()?t:c&&o(u,a)>=0?(r!=null&&(r.trackChildChange(es(u.name,u.node)),r.trackChildChange(_i(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(u.name,U.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ne}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vi}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ne}copy(){const t=new ol;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function yg(e){return e.loadsAllData()?new rl(e.getIndex()):e.hasLimit()?new _g(e):new ns(e)}function fu(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ne?n="$priority":e.index_===gg?n="$value":e.index_===ui?n="$key":(x(e.index_ instanceof mg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=$e(n),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";t[i]=$e(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+$e(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";t[i]=$e(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+$e(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function mu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ne&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Uc{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(x(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=hs("p:rest:"),this.listens_={}}listen(t,n,i,s){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=Ks.getListenId_(t,i),l={};this.listens_[o]=l;const a=fu(t._queryParams);this.restRequest_(r+".json",a,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(r,d,!1,i),mi(this.listens_,o)===l){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(t,n){const i=Ks.getListenId_(t,n);delete this.listens_[i]}get(t){const n=fu(t._queryParams),i=t._path.toString(),s=new Yo;return this.restRequest_(i+".json",n,(r,o)=>{let l=o;r===404&&(l=null,r=null),r===null?(this.onDataUpdate_(i,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Lf(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=zo(l.responseText)}catch{at("Failed to parse JSON response for "+o+": "+l.responseText)}i(null,a)}else l.status!==401&&l.status!==404&&at("Got unsuccessful REST response for "+o+" Status: "+l.status),i(l.status);i=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return{value:null,children:new Map}}function nd(e,t,n){if(te(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const i=X(t);e.children.has(i)||e.children.set(i,Zs());const s=e.children.get(i);t=ye(t),nd(s,t,n)}}function wo(e,t,n){e.value!==null?n(t,e.value):bg(e,(i,s)=>{const r=new ge(t.toString()+"/"+i);wo(s,r,n)})}function bg(e,t){e.children.forEach((n,i)=>{t(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&ut(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=10*1e3,Sg=30*1e3,Cg=300*1e3;class xg{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new kg(t);const i=pu+(Sg-pu)*Math.random();Bi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;ut(t,(s,r)=>{r>0&&tn(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Bi(this.reportStats_.bind(this),Math.floor(Math.random()*2*Cg))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xt||(xt={}));function id(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ll(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function al(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=xt.ACK_USER_WRITE,this.source=id()}operationForChild(t){if(te(this.path)){if(this.affectedTree.value!=null)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ge(t));return new Xs(ce(),n,this.revert)}}else return x(X(this.path)===t,"operationForChild called for unrelated child."),new Xs(ye(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,n){this.source=t,this.path=n,this.type=xt.LISTEN_COMPLETE}operationForChild(t){return te(this.path)?new is(this.source,ce()):new is(this.source,ye(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=xt.OVERWRITE}operationForChild(t){return te(this.path)?new Nn(this.source,ce(),this.snap.getImmediateChild(t)):new Nn(this.source,ye(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=xt.MERGE}operationForChild(t){if(te(this.path)){const n=this.children.subtree(new ge(t));return n.isEmpty()?null:n.value?new Nn(this.source,ce(),n.value):new ss(this.source,ce(),n)}else return x(X(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ss(this.source,ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(te(t))return this.isFullyInitialized()&&!this.filtered_;const n=X(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Eg(e,t,n,i){const s=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(vg(o.childName,o.snapshotNode))}),Oi(e,s,"child_removed",t,i,n),Oi(e,s,"child_added",t,i,n),Oi(e,s,"child_moved",r,i,n),Oi(e,s,"child_changed",t,i,n),Oi(e,s,"value",t,i,n),s}function Oi(e,t,n,i,s,r){const o=i.filter(l=>l.type===n);o.sort((l,a)=>Rg(e,l,a)),o.forEach(l=>{const a=Ig(e,l,r);s.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(a,e.query_))})})}function Ig(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Rg(e,t,n){if(t.childName==null||n.childName==null)throw cs("Should only compare child_ events.");const i=new J(t.childName,t.snapshotNode),s=new J(n.childName,n.snapshotNode);return e.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(e,t){return{eventCache:e,serverCache:t}}function $i(e,t,n,i){return _r(new On(t,n,i),e.serverCache)}function sd(e,t,n,i){return _r(e.eventCache,new On(t,n,i))}function bo(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function An(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no;const Mg=()=>(no||(no=new lt(pp)),no);class be{static fromObject(t){let n=new be(null);return ut(t,(i,s)=>{n=n.set(new ge(i),s)}),n}constructor(t,n=Mg()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:ce(),value:this.value};if(te(t))return null;{const i=X(t),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(ye(t),n);return r!=null?{path:Ye(new ge(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(te(t))return this;{const n=X(t),i=this.children.get(n);return i!==null?i.subtree(ye(t)):new be(null)}}set(t,n){if(te(t))return new be(n,this.children);{const i=X(t),r=(this.children.get(i)||new be(null)).set(ye(t),n),o=this.children.insert(i,r);return new be(this.value,o)}}remove(t){if(te(t))return this.children.isEmpty()?new be(null):new be(null,this.children);{const n=X(t),i=this.children.get(n);if(i){const s=i.remove(ye(t));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new be(null):new be(this.value,r)}else return this}}get(t){if(te(t))return this.value;{const n=X(t),i=this.children.get(n);return i?i.get(ye(t)):null}}setTree(t,n){if(te(t))return n;{const i=X(t),r=(this.children.get(i)||new be(null)).setTree(ye(t),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new be(this.value,o)}}fold(t){return this.fold_(ce(),t)}fold_(t,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Ye(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,ce(),n)}findOnPath_(t,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(te(t))return null;{const r=X(t),o=this.children.get(r);return o?o.findOnPath_(ye(t),Ye(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ce(),n)}foreachOnPath_(t,n,i){if(te(t))return this;{this.value&&i(n,this.value);const s=X(t),r=this.children.get(s);return r?r.foreachOnPath_(ye(t),Ye(n,s),i):new be(null)}}foreach(t){this.foreach_(ce(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Ye(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t){this.writeTree_=t}static empty(){return new It(new be(null))}}function ji(e,t,n){if(te(t))return new It(new be(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let r=i.value;const o=ot(s,t);return r=r.updateChild(o,n),new It(e.writeTree_.set(s,r))}else{const s=new be(n),r=e.writeTree_.setTree(t,s);return new It(r)}}}function gu(e,t,n){let i=e;return ut(n,(s,r)=>{i=ji(i,Ye(t,s),r)}),i}function vu(e,t){if(te(t))return It.empty();{const n=e.writeTree_.setTree(t,new be(null));return new It(n)}}function ko(e,t){return Vn(e,t)!=null}function Vn(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(ot(n.path,t)):null}function _u(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ne,(i,s)=>{t.push(new J(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new J(i,s.value))}),t}function mn(e,t){if(te(t))return e;{const n=Vn(e,t);return n!=null?new It(new be(n)):new It(e.writeTree_.subtree(t))}}function So(e){return e.writeTree_.isEmpty()}function yi(e,t){return rd(ce(),e.writeTree_,t)}function rd(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(x(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=rd(Ye(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(Ye(e,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(e,t){return ud(t,e)}function Dg(e,t,n,i,s){x(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=ji(e.visibleWrites,t,n)),e.lastWriteId=i}function Pg(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function Ng(e,t){const n=e.allWrites.findIndex(l=>l.writeId===t);x(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,o=e.allWrites.length-1;for(;s&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=n&&Og(l,i.path)?s=!1:Ct(i.path,l.path)&&(r=!0)),o--}if(s){if(r)return Ag(e),!0;if(i.snap)e.visibleWrites=vu(e.visibleWrites,i.path);else{const l=i.children;ut(l,a=>{e.visibleWrites=vu(e.visibleWrites,Ye(i.path,a))})}return!0}else return!1}function Og(e,t){if(e.snap)return Ct(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ct(Ye(e.path,n),t))return!0;return!1}function Ag(e){e.visibleWrites=od(e.allWrites,Lg,ce()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Lg(e){return e.visible}function od(e,t,n){let i=It.empty();for(let s=0;s<e.length;++s){const r=e[s];if(t(r)){const o=r.path;let l;if(r.snap)Ct(n,o)?(l=ot(n,o),i=ji(i,l,r.snap)):Ct(o,n)&&(l=ot(o,n),i=ji(i,ce(),r.snap.getChild(l)));else if(r.children){if(Ct(n,o))l=ot(n,o),i=gu(i,l,r.children);else if(Ct(o,n))if(l=ot(o,n),te(l))i=gu(i,ce(),r.children);else{const a=mi(r.children,X(l));if(a){const u=a.getChild(ye(l));i=ji(i,ce(),u)}}}else throw cs("WriteRecord should have .snap or .children")}}return i}function ld(e,t,n,i,s){if(!i&&!s){const r=Vn(e.visibleWrites,t);if(r!=null)return r;{const o=mn(e.visibleWrites,t);if(So(o))return n;if(n==null&&!ko(o,ce()))return null;{const l=n||U.EMPTY_NODE;return yi(o,l)}}}else{const r=mn(e.visibleWrites,t);if(!s&&So(r))return n;if(!s&&n==null&&!ko(r,ce()))return null;{const o=function(u){return(u.visible||s)&&(!i||!~i.indexOf(u.writeId))&&(Ct(u.path,t)||Ct(t,u.path))},l=od(e.allWrites,o,t),a=n||U.EMPTY_NODE;return yi(l,a)}}}function Fg(e,t,n){let i=U.EMPTY_NODE;const s=Vn(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Ne,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=mn(e.visibleWrites,t);return n.forEachChild(Ne,(o,l)=>{const a=yi(mn(r,new ge(o)),l);i=i.updateImmediateChild(o,a)}),_u(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=mn(e.visibleWrites,t);return _u(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function qg(e,t,n,i,s){x(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Ye(t,n);if(ko(e.visibleWrites,r))return null;{const o=mn(e.visibleWrites,r);return So(o)?s.getChild(n):yi(o,s.getChild(n))}}function Vg(e,t,n,i){const s=Ye(t,n),r=Vn(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=mn(e.visibleWrites,s);return yi(o,i.getNode().getImmediateChild(n))}else return null}function Wg(e,t){return Vn(e.visibleWrites,t)}function Yg(e,t,n,i,s,r,o){let l;const a=mn(e.visibleWrites,t),u=Vn(a,ce());if(u!=null)l=u;else if(n!=null)l=yi(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const c=[],d=o.getCompare(),h=r?l.getReverseIteratorFrom(i,o):l.getIteratorFrom(i,o);let m=h.getNext();for(;m&&c.length<s;)d(m,i)!==0&&c.push(m),m=h.getNext();return c}else return[]}function Hg(){return{visibleWrites:It.empty(),allWrites:[],lastWriteId:-1}}function Js(e,t,n,i){return ld(e.writeTree,e.treePath,t,n,i)}function cl(e,t){return Fg(e.writeTree,e.treePath,t)}function yu(e,t,n,i){return qg(e.writeTree,e.treePath,t,n,i)}function er(e,t){return Wg(e.writeTree,Ye(e.treePath,t))}function zg(e,t,n,i,s,r){return Yg(e.writeTree,e.treePath,t,n,i,s,r)}function dl(e,t,n){return Vg(e.writeTree,e.treePath,t,n)}function ad(e,t){return ud(Ye(e.treePath,t),e.writeTree)}function ud(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;x(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),x(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,ts(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,es(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,_i(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,ts(i,t.snapshotNode,s.oldSnap));else throw cs("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}}const cd=new Bg;class hl{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new On(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dl(this.writes_,t,i)}}getChildAfterChild(t,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:An(this.viewCache_),r=zg(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(e){return{filter:e}}function jg(e,t){x(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),x(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Gg(e,t,n,i,s){const r=new Ug;let o,l;if(n.type===xt.OVERWRITE){const u=n;u.source.fromUser?o=Co(e,t,u.path,u.snap,i,s,r):(x(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!te(u.path),o=tr(e,t,u.path,u.snap,i,s,l,r))}else if(n.type===xt.MERGE){const u=n;u.source.fromUser?o=Kg(e,t,u.path,u.children,i,s,r):(x(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=xo(e,t,u.path,u.children,i,s,l,r))}else if(n.type===xt.ACK_USER_WRITE){const u=n;u.revert?o=Jg(e,t,u.path,i,s,r):o=Zg(e,t,u.path,u.affectedTree,i,s,r)}else if(n.type===xt.LISTEN_COMPLETE)o=Xg(e,t,n.path,i,r);else throw cs("Unknown operation type: "+n.type);const a=r.getChanges();return Qg(t,o,a),{viewCache:o,changes:a}}function Qg(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=bo(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(td(bo(t)))}}function dd(e,t,n,i,s,r){const o=t.eventCache;if(er(i,n)!=null)return t;{let l,a;if(te(n))if(x(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=An(t),c=u instanceof U?u:U.EMPTY_NODE,d=cl(i,c);l=e.filter.updateFullNode(t.eventCache.getNode(),d,r)}else{const u=Js(i,An(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,r)}else{const u=X(n);if(u===".priority"){x(gn(n)===1,"Can't have a priority with additional path components");const c=o.getNode();a=t.serverCache.getNode();const d=yu(i,n,c,a);d!=null?l=e.filter.updatePriority(c,d):l=o.getNode()}else{const c=ye(n);let d;if(o.isCompleteForChild(u)){a=t.serverCache.getNode();const h=yu(i,n,o.getNode(),a);h!=null?d=o.getNode().getImmediateChild(u).updateChild(c,h):d=o.getNode().getImmediateChild(u)}else d=dl(i,u,t.serverCache);d!=null?l=e.filter.updateChild(o.getNode(),u,d,c,s,r):l=o.getNode()}}return $i(t,l,o.isFullyInitialized()||te(n),e.filter.filtersNodes())}}function tr(e,t,n,i,s,r,o,l){const a=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(te(n))u=c.updateFullNode(a.getNode(),i,null);else if(c.filtersNodes()&&!a.isFiltered()){const m=a.getNode().updateChild(n,i);u=c.updateFullNode(a.getNode(),m,null)}else{const m=X(n);if(!a.isCompleteForPath(n)&&gn(n)>1)return t;const p=ye(n),w=a.getNode().getImmediateChild(m).updateChild(p,i);m===".priority"?u=c.updatePriority(a.getNode(),w):u=c.updateChild(a.getNode(),m,w,p,cd,null)}const d=sd(t,u,a.isFullyInitialized()||te(n),c.filtersNodes()),h=new hl(s,d,r);return dd(e,d,n,s,h,l)}function Co(e,t,n,i,s,r,o){const l=t.eventCache;let a,u;const c=new hl(s,t,r);if(te(n))u=e.filter.updateFullNode(t.eventCache.getNode(),i,o),a=$i(t,u,!0,e.filter.filtersNodes());else{const d=X(n);if(d===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),i),a=$i(t,u,l.isFullyInitialized(),l.isFiltered());else{const h=ye(n),m=l.getNode().getImmediateChild(d);let p;if(te(h))p=i;else{const y=c.getCompleteChild(d);y!=null?$c(h)===".priority"&&y.getChild(Gc(h)).isEmpty()?p=y:p=y.updateChild(h,i):p=U.EMPTY_NODE}if(m.equals(p))a=t;else{const y=e.filter.updateChild(l.getNode(),d,p,h,c,o);a=$i(t,y,l.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function wu(e,t){return e.eventCache.isCompleteForChild(t)}function Kg(e,t,n,i,s,r,o){let l=t;return i.foreach((a,u)=>{const c=Ye(n,a);wu(t,X(c))&&(l=Co(e,l,c,u,s,r,o))}),i.foreach((a,u)=>{const c=Ye(n,a);wu(t,X(c))||(l=Co(e,l,c,u,s,r,o))}),l}function bu(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function xo(e,t,n,i,s,r,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let a=t,u;te(n)?u=i:u=new be(null).setTree(n,i);const c=t.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const m=t.serverCache.getNode().getImmediateChild(d),p=bu(e,m,h);a=tr(e,a,new ge(d),p,s,r,o,l)}}),u.children.inorderTraversal((d,h)=>{const m=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!m){const p=t.serverCache.getNode().getImmediateChild(d),y=bu(e,p,h);a=tr(e,a,new ge(d),y,s,r,o,l)}}),a}function Zg(e,t,n,i,s,r,o){if(er(s,n)!=null)return t;const l=t.serverCache.isFiltered(),a=t.serverCache;if(i.value!=null){if(te(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return tr(e,t,n,a.getNode().getChild(n),s,r,l,o);if(te(n)){let u=new be(null);return a.getNode().forEachChild(ui,(c,d)=>{u=u.set(new ge(c),d)}),xo(e,t,n,u,s,r,l,o)}else return t}else{let u=new be(null);return i.foreach((c,d)=>{const h=Ye(n,c);a.isCompleteForPath(h)&&(u=u.set(c,a.getNode().getChild(h)))}),xo(e,t,n,u,s,r,l,o)}}function Xg(e,t,n,i,s){const r=t.serverCache,o=sd(t,r.getNode(),r.isFullyInitialized()||te(n),r.isFiltered());return dd(e,o,n,i,cd,s)}function Jg(e,t,n,i,s,r){let o;if(er(i,n)!=null)return t;{const l=new hl(i,t,s),a=t.eventCache.getNode();let u;if(te(n)||X(n)===".priority"){let c;if(t.serverCache.isFullyInitialized())c=Js(i,An(t));else{const d=t.serverCache.getNode();x(d instanceof U,"serverChildren would be complete if leaf node"),c=cl(i,d)}c=c,u=e.filter.updateFullNode(a,c,r)}else{const c=X(n);let d=dl(i,c,t.serverCache);d==null&&t.serverCache.isCompleteForChild(c)&&(d=a.getImmediateChild(c)),d!=null?u=e.filter.updateChild(a,c,d,ye(n),l,r):t.eventCache.getNode().hasChild(c)?u=e.filter.updateChild(a,c,U.EMPTY_NODE,ye(n),l,r):u=a,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Js(i,An(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,r)))}return o=t.serverCache.isFullyInitialized()||er(i,ce())!=null,$i(t,u,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new rl(i.getIndex()),r=yg(i);this.processor_=$g(r);const o=n.serverCache,l=n.eventCache,a=s.updateFullNode(U.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(U.EMPTY_NODE,l.getNode(),null),c=new On(a,o.isFullyInitialized(),s.filtersNodes()),d=new On(u,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=_r(d,c),this.eventGenerator_=new Tg(this.query_)}get query(){return this.query_}}function tv(e){return e.viewCache_.serverCache.getNode()}function nv(e,t){const n=An(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!te(t)&&!n.getImmediateChild(X(t)).isEmpty())?n.getChild(t):null}function ku(e){return e.eventRegistrations_.length===0}function iv(e,t){e.eventRegistrations_.push(t)}function Su(e,t,n){const i=[];if(n){x(t==null,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(t){let s=[];for(let r=0;r<e.eventRegistrations_.length;++r){const o=e.eventRegistrations_[r];if(!o.matches(t))s.push(o);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return i}function Cu(e,t,n,i){t.type===xt.MERGE&&t.source.queryId!==null&&(x(An(e.viewCache_),"We should always have a full cache before handling merges"),x(bo(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,r=Gg(e.processor_,s,t,n,i);return jg(e.processor_,r.viewCache),x(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,hd(e,r.changes,r.viewCache.eventCache.getNode(),null)}function sv(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ne,(r,o)=>{i.push(_i(r,o))}),n.isFullyInitialized()&&i.push(td(n.getNode())),hd(e,i,n.getNode(),t)}function hd(e,t,n,i){const s=i?[i]:e.eventRegistrations_;return Eg(e.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nr;class rv{constructor(){this.views=new Map}}function ov(e){x(!nr,"__referenceConstructor has already been defined"),nr=e}function lv(){return x(nr,"Reference.ts has not been loaded"),nr}function av(e){return e.views.size===0}function fl(e,t,n,i){const s=t.source.queryId;if(s!==null){const r=e.views.get(s);return x(r!=null,"SyncTree gave us an op for an invalid query."),Cu(r,t,n,i)}else{let r=[];for(const o of e.views.values())r=r.concat(Cu(o,t,n,i));return r}}function uv(e,t,n,i,s){const r=t._queryIdentifier,o=e.views.get(r);if(!o){let l=Js(n,s?i:null),a=!1;l?a=!0:i instanceof U?(l=cl(n,i),a=!1):(l=U.EMPTY_NODE,a=!1);const u=_r(new On(l,a,!1),new On(i,s,!1));return new ev(t,u)}return o}function cv(e,t,n,i,s,r){const o=uv(e,t,i,s,r);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),iv(o,n),sv(o,n)}function dv(e,t,n,i){const s=t._queryIdentifier,r=[];let o=[];const l=vn(e);if(s==="default")for(const[a,u]of e.views.entries())o=o.concat(Su(u,n,i)),ku(u)&&(e.views.delete(a),u.query._queryParams.loadsAllData()||r.push(u.query));else{const a=e.views.get(s);a&&(o=o.concat(Su(a,n,i)),ku(a)&&(e.views.delete(s),a.query._queryParams.loadsAllData()||r.push(a.query)))}return l&&!vn(e)&&r.push(new(lv())(t._repo,t._path)),{removed:r,events:o}}function fd(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ci(e,t){let n=null;for(const i of e.views.values())n=n||nv(i,t);return n}function md(e,t){if(t._queryParams.loadsAllData())return yr(e);{const i=t._queryIdentifier;return e.views.get(i)}}function pd(e,t){return md(e,t)!=null}function vn(e){return yr(e)!=null}function yr(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ir;function hv(e){x(!ir,"__referenceConstructor has already been defined"),ir=e}function fv(){return x(ir,"Reference.ts has not been loaded"),ir}let mv=1;class xu{constructor(t){this.listenProvider_=t,this.syncPointTree_=new be(null),this.pendingWriteTree_=Hg(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gd(e,t,n,i,s){return Dg(e.pendingWriteTree_,t,n,i,s),s?ms(e,new Nn(id(),t,n)):[]}function Tn(e,t,n=!1){const i=Pg(e.pendingWriteTree_,t);if(Ng(e.pendingWriteTree_,t)){let r=new be(null);return i.snap!=null?r=r.set(ce(),!0):ut(i.children,o=>{r=r.set(new ge(o),!0)}),ms(e,new Xs(i.path,r,n))}else return[]}function wr(e,t,n){return ms(e,new Nn(ll(),t,n))}function pv(e,t,n){const i=be.fromObject(n);return ms(e,new ss(ll(),t,i))}function gv(e,t){return ms(e,new is(ll(),t))}function vv(e,t,n){const i=pl(e,n);if(i){const s=gl(i),r=s.path,o=s.queryId,l=ot(r,t),a=new is(al(o),l);return vl(e,r,a)}else return[]}function To(e,t,n,i,s=!1){const r=t._path,o=e.syncPointTree_.get(r);let l=[];if(o&&(t._queryIdentifier==="default"||pd(o,t))){const a=dv(o,t,n,i);av(o)&&(e.syncPointTree_=e.syncPointTree_.remove(r));const u=a.removed;if(l=a.events,!s){const c=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(r,(h,m)=>vn(m));if(c&&!d){const h=e.syncPointTree_.subtree(r);if(!h.isEmpty()){const m=wv(h);for(let p=0;p<m.length;++p){const y=m[p],w=y.query,Y=yd(e,y);e.listenProvider_.startListening(Gi(w),sr(e,w),Y.hashFn,Y.onComplete)}}}!d&&u.length>0&&!i&&(c?e.listenProvider_.stopListening(Gi(t),null):u.forEach(h=>{const m=e.queryToTagMap.get(br(h));e.listenProvider_.stopListening(Gi(h),m)}))}bv(e,u)}return l}function _v(e,t,n,i){const s=pl(e,i);if(s!=null){const r=gl(s),o=r.path,l=r.queryId,a=ot(o,t),u=new Nn(al(l),a,n);return vl(e,o,u)}else return[]}function yv(e,t,n,i){const s=pl(e,i);if(s){const r=gl(s),o=r.path,l=r.queryId,a=ot(o,t),u=be.fromObject(n),c=new ss(al(l),a,u);return vl(e,o,c)}else return[]}function Tu(e,t,n,i=!1){const s=t._path;let r=null,o=!1;e.syncPointTree_.foreachOnPath(s,(h,m)=>{const p=ot(h,s);r=r||ci(m,p),o=o||vn(m)});let l=e.syncPointTree_.get(s);l?(o=o||vn(l),r=r||ci(l,ce())):(l=new rv,e.syncPointTree_=e.syncPointTree_.set(s,l));let a;r!=null?a=!0:(a=!1,r=U.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((m,p)=>{const y=ci(p,ce());y&&(r=r.updateImmediateChild(m,y))}));const u=pd(l,t);if(!u&&!t._queryParams.loadsAllData()){const h=br(t);x(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");const m=kv();e.queryToTagMap.set(h,m),e.tagToQueryMap.set(m,h)}const c=ul(e.pendingWriteTree_,s);let d=cv(l,t,n,c,r,a);if(!u&&!o&&!i){const h=md(l,t);d=d.concat(Sv(e,t,h))}return d}function ml(e,t,n){const s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,l)=>{const a=ot(o,t),u=ci(l,a);if(u)return u});return ld(s,t,r,n,!0)}function ms(e,t){return vd(t,e.syncPointTree_,null,ul(e.pendingWriteTree_,ce()))}function vd(e,t,n,i){if(te(e.path))return _d(e,t,n,i);{const s=t.get(ce());n==null&&s!=null&&(n=ci(s,ce()));let r=[];const o=X(e.path),l=e.operationForChild(o),a=t.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,c=ad(i,o);r=r.concat(vd(l,a,u,c))}return s&&(r=r.concat(fl(s,e,i,n))),r}}function _d(e,t,n,i){const s=t.get(ce());n==null&&s!=null&&(n=ci(s,ce()));let r=[];return t.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=ad(i,o),c=e.operationForChild(o);c&&(r=r.concat(_d(c,l,a,u)))}),s&&(r=r.concat(fl(s,e,i,n))),r}function yd(e,t){const n=t.query,i=sr(e,n);return{hashFn:()=>(tv(t)||U.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?vv(e,n._path,i):gv(e,n._path);{const r=_p(s,n);return To(e,n,null,r)}}}}function sr(e,t){const n=br(t);return e.queryToTagMap.get(n)}function br(e){return e._path.toString()+"$"+e._queryIdentifier}function pl(e,t){return e.tagToQueryMap.get(t)}function gl(e){const t=e.indexOf("$");return x(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ge(e.substr(0,t))}}function vl(e,t,n){const i=e.syncPointTree_.get(t);x(i,"Missing sync point for query tag that we're tracking");const s=ul(e.pendingWriteTree_,t);return fl(i,n,s,null)}function wv(e){return e.fold((t,n,i)=>{if(n&&vn(n))return[yr(n)];{let s=[];return n&&(s=fd(n)),ut(i,(r,o)=>{s=s.concat(o)}),s}})}function Gi(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(fv())(e._repo,e._path):e}function bv(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const s=br(i),r=e.queryToTagMap.get(s);e.queryToTagMap.delete(s),e.tagToQueryMap.delete(r)}}}function kv(){return mv++}function Sv(e,t,n){const i=t._path,s=sr(e,t),r=yd(e,n),o=e.listenProvider_.startListening(Gi(t),s,r.hashFn,r.onComplete),l=e.syncPointTree_.subtree(i);if(s)x(!vn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,c,d)=>{if(!te(u)&&c&&vn(c))return[yr(c).query];{let h=[];return c&&(h=h.concat(fd(c).map(m=>m.query))),ut(d,(m,p)=>{h=h.concat(p)}),h}});for(let u=0;u<a.length;++u){const c=a[u];e.listenProvider_.stopListening(Gi(c),sr(e,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new _l(n)}node(){return this.node_}}class yl{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ye(this.path_,t);return new yl(this.syncTree_,n)}node(){return ml(this.syncTree_,this.path_)}}const Cv=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Eu=function(e,t,n){if(!e||typeof e!="object")return e;if(x(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return xv(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Tv(e[".sv"],t);x(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},xv=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:x(!1,"Unexpected server value: "+e)}},Tv=function(e,t,n){e.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;typeof i!="number"&&x(!1,"Unexpected increment value: "+i);const s=t.node();if(x(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},Ev=function(e,t,n,i){return wl(t,new yl(n,e),i)},wd=function(e,t,n){return wl(e,new _l(t),n)};function wl(e,t,n){const i=e.getPriority().val(),s=Eu(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const o=e,l=Eu(o.getValue(),t,n);return l!==o.getValue()||s!==o.getPriority().val()?new Ue(l,Ze(s)):e}else{const o=e;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Ue(s))),o.forEachChild(Ne,(l,a)=>{const u=wl(a,t.getImmediateChild(l),n);u!==a&&(r=r.updateImmediateChild(l,u))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function kl(e,t){let n=t instanceof ge?t:new ge(t),i=e,s=X(n);for(;s!==null;){const r=mi(i.node.children,s)||{children:{},childCount:0};i=new bl(s,i,r),n=ye(n),s=X(n)}return i}function Si(e){return e.node.value}function bd(e,t){e.node.value=t,Eo(e)}function kd(e){return e.node.childCount>0}function Iv(e){return Si(e)===void 0&&!kd(e)}function kr(e,t){ut(e.node.children,(n,i)=>{t(new bl(n,e,i))})}function Sd(e,t,n,i){n&&!i&&t(e),kr(e,s=>{Sd(s,t,!0,i)}),n&&i&&t(e)}function Rv(e,t,n){let i=e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function ps(e){return new ge(e.parent===null?e.name:ps(e.parent)+"/"+e.name)}function Eo(e){e.parent!==null&&Mv(e.parent,e.name,e)}function Mv(e,t,n){const i=Iv(n),s=tn(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,Eo(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,Eo(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=/[\[\].#$\/\u0000-\u001F\u007F]/,Pv=/[\[\].#$\u0000-\u001F\u007F]/,io=10*1024*1024,Cd=function(e){return typeof e=="string"&&e.length!==0&&!Dv.test(e)},xd=function(e){return typeof e=="string"&&e.length!==0&&!Pv.test(e)},Nv=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xd(e)},Ov=function(e,t,n,i){Sl(Ho(e,"value"),t,n)},Sl=function(e,t,n){const i=n instanceof ge?new Zp(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Cn(i));if(typeof t=="function")throw new Error(e+"contains a function "+Cn(i)+" with contents = "+t.toString());if(xc(t))throw new Error(e+"contains "+t.toString()+" "+Cn(i));if(typeof t=="string"&&t.length>io/3&&gr(t)>io)throw new Error(e+"contains a string greater than "+io+" utf8 bytes "+Cn(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(ut(t,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Cd(o)))throw new Error(e+" contains an invalid key ("+o+") "+Cn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xp(i,o),Sl(e,l,i),Jp(i)}),s&&r)throw new Error(e+' contains ".value" child '+Cn(i)+" in addition to actual children.")}},Td=function(e,t,n,i){if(!xd(n))throw new Error(Ho(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Av=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Td(e,t,n)},Lv=function(e,t){if(X(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Fv=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Cd(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Nv(n))throw new Error(Ho(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cl(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();n!==null&&!nl(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function Ed(e,t,n){Cl(e,n),Id(e,i=>nl(i,t))}function Jt(e,t,n){Cl(e,n),Id(e,i=>Ct(i,t)||Ct(t,i))}function Id(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){const r=s.path;t(r)?(Vv(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Vv(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const i=n.getEventRunner();Ui&&Je("event: "+n.toString()),ki(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="repo_interrupt",Yv=25;class Hv{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zs(),this.transactionQueueTree_=new bl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zv(e,t,n){if(e.stats_=el(e.repoInfo_),e.forceRestClient_||kp())e.server_=new Ks(e.repoInfo_,(i,s,r,o)=>{Iu(e,i,s,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Ru(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$e(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new Qt(e.repoInfo_,t,(i,s,r,o)=>{Iu(e,i,s,r,o)},i=>{Ru(e,i)},i=>{Bv(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=Ep(e.repoInfo_,()=>new xg(e.stats_,e.server_)),e.infoData_=new wg,e.infoSyncTree_=new xu({startListening:(i,s,r,o)=>{let l=[];const a=e.infoData_.getNode(i._path);return a.isEmpty()||(l=wr(e.infoSyncTree_,i._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Tl(e,"connected",!1),e.serverSyncTree_=new xu({startListening:(i,s,r,o)=>(e.server_.listen(i,r,s,(l,a)=>{const u=o(l,a);Jt(e.eventQueue_,i._path,u)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function Uv(e){const n=e.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function xl(e){return Cv({timestamp:Uv(e)})}function Iu(e,t,n,i,s){e.dataUpdateCount++;const r=new ge(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(i){const a=Vs(n,u=>Ze(u));o=yv(e.serverSyncTree_,r,a,s)}else{const a=Ze(n);o=_v(e.serverSyncTree_,r,a,s)}else if(i){const a=Vs(n,u=>Ze(u));o=pv(e.serverSyncTree_,r,a)}else{const a=Ze(n);o=wr(e.serverSyncTree_,r,a)}let l=r;o.length>0&&(l=Sr(e,r)),Jt(e.eventQueue_,l,o)}function Ru(e,t){Tl(e,"connected",t),t===!1&&jv(e)}function Bv(e,t){ut(t,(n,i)=>{Tl(e,n,i)})}function Tl(e,t,n){const i=new ge("/.info/"+t),s=Ze(n);e.infoData_.updateSnapshot(i,s);const r=wr(e.infoSyncTree_,i,s);Jt(e.eventQueue_,i,r)}function Rd(e){return e.nextWriteId_++}function $v(e,t,n,i,s){El(e,"set",{path:t.toString(),value:n,priority:i});const r=xl(e),o=Ze(n,i),l=ml(e.serverSyncTree_,t),a=wd(o,l,r),u=Rd(e),c=gd(e.serverSyncTree_,t,a,u,!0);Cl(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(h,m)=>{const p=h==="ok";p||at("set at "+t+" failed: "+h);const y=Tn(e.serverSyncTree_,u,!p);Jt(e.eventQueue_,t,y),Zv(e,s,h,m)});const d=Od(e,t);Sr(e,d),Jt(e.eventQueue_,d,[])}function jv(e){El(e,"onDisconnectEvents");const t=xl(e),n=Zs();wo(e.onDisconnect_,ce(),(s,r)=>{const o=Ev(s,r,e.serverSyncTree_,t);nd(n,s,o)});let i=[];wo(n,ce(),(s,r)=>{i=i.concat(wr(e.serverSyncTree_,s,r));const o=Od(e,s);Sr(e,o)}),e.onDisconnect_=Zs(),Jt(e.eventQueue_,ce(),i)}function Gv(e,t,n){let i;X(t._path)===".info"?i=Tu(e.infoSyncTree_,t,n):i=Tu(e.serverSyncTree_,t,n),Ed(e.eventQueue_,t._path,i)}function Qv(e,t,n){let i;X(t._path)===".info"?i=To(e.infoSyncTree_,t,n):i=To(e.serverSyncTree_,t,n),Ed(e.eventQueue_,t._path,i)}function Kv(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Wv)}function El(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Je(n,...t)}function Zv(e,t,n,i){t&&ki(()=>{if(n==="ok")t(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,t(o)}})}function Md(e,t,n){return ml(e.serverSyncTree_,t,n)||U.EMPTY_NODE}function Il(e,t=e.transactionQueueTree_){if(t||Cr(e,t),Si(t)){const n=Pd(e,t);x(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Xv(e,ps(t),n)}else kd(t)&&kr(t,n=>{Il(e,n)})}function Xv(e,t,n){const i=n.map(u=>u.currentWriteId),s=Md(e,t,i);let r=s;const o=s.hash();for(let u=0;u<n.length;u++){const c=n[u];x(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=ot(t,c.path);r=r.updateChild(d,c.currentOutputSnapshotRaw)}const l=r.val(!0),a=t;e.server_.put(a.toString(),l,u=>{El(e,"transaction put response",{path:a.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(Tn(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Cr(e,kl(e.transactionQueueTree_,t)),Il(e,e.transactionQueueTree_),Jt(e.eventQueue_,t,c);for(let h=0;h<d.length;h++)ki(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{at("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Sr(e,t)}},o)}function Sr(e,t){const n=Dd(e,t),i=ps(n),s=Pd(e,n);return Jv(e,s,i),i}function Jv(e,t,n){if(t.length===0)return;const i=[];let s=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const a=t[l],u=ot(n,a.path);let c=!1,d;if(x(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,d=a.abortReason,s=s.concat(Tn(e.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Yv)c=!0,d="maxretry",s=s.concat(Tn(e.serverSyncTree_,a.currentWriteId,!0));else{const h=Md(e,a.path,o);a.currentInputSnapshot=h;const m=t[l].update(h.val());if(m!==void 0){Sl("transaction failed: Data returned ",m,a.path);let p=Ze(m);typeof m=="object"&&m!=null&&tn(m,".priority")||(p=p.updatePriority(h.getPriority()));const w=a.currentWriteId,Y=xl(e),N=wd(p,h,Y);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=N,a.currentWriteId=Rd(e),o.splice(o.indexOf(w),1),s=s.concat(gd(e.serverSyncTree_,a.path,N,a.currentWriteId,a.applyLocally)),s=s.concat(Tn(e.serverSyncTree_,w,!0))}else c=!0,d="nodata",s=s.concat(Tn(e.serverSyncTree_,a.currentWriteId,!0))}Jt(e.eventQueue_,n,s),s=[],c&&(t[l].status=2,(function(h){setTimeout(h,Math.floor(0))})(t[l].unwatcher),t[l].onComplete&&(d==="nodata"?i.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):i.push(()=>t[l].onComplete(new Error(d),!1,null))))}Cr(e,e.transactionQueueTree_);for(let l=0;l<i.length;l++)ki(i[l]);Il(e,e.transactionQueueTree_)}function Dd(e,t){let n,i=e.transactionQueueTree_;for(n=X(t);n!==null&&Si(i)===void 0;)i=kl(i,n),t=ye(t),n=X(t);return i}function Pd(e,t){const n=[];return Nd(e,t,n),n.sort((i,s)=>i.order-s.order),n}function Nd(e,t,n){const i=Si(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);kr(t,s=>{Nd(e,s,n)})}function Cr(e,t){const n=Si(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,bd(t,n.length>0?n:void 0)}kr(t,i=>{Cr(e,i)})}function Od(e,t){const n=ps(Dd(e,t)),i=kl(e.transactionQueueTree_,t);return Rv(i,s=>{so(e,s)}),so(e,i),Sd(i,s=>{so(e,s)}),n}function so(e,t){const n=Si(t);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(x(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(x(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Tn(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?bd(t,void 0):n.length=r+1,Jt(e.eventQueue_,ps(t),s);for(let o=0;o<i.length;o++)ki(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function t_(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):at(`Invalid query segment '${n}' in query '${e}'`)}return t}const Mu=function(e,t){const n=n_(e),i=n.namespace;n.domain==="firebase.com"&&Xt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Xt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||fp();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Fc(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new ge(n.pathString)}},n_=function(e){let t="",n="",i="",s="",r="",o=!0,l="https",a=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");c===-1&&(c=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(c,d)),c<d&&(s=e_(e.substring(c,d)));const h=t_(e.substring(Math.min(e.length,d)));u=t.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(t.substring(u+1),10)):u=t.length;const m=t.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const p=t.indexOf(".");i=t.substring(0,p).toLowerCase(),n=t.substring(p+1),r=i}"ns"in h&&(r=h.ns)}return{host:t,port:a,domain:n,subdomain:i,secure:o,scheme:l,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(t,n,i,s){this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$e(this.snapshot.exportVal())}}class s_{constructor(t,n,i){this.eventRegistration=t,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return x(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return te(this._path)?null:$c(this._path)}get ref(){return new _n(this._repo,this._path)}get _queryIdentifier(){const t=mu(this._queryParams),n=Xo(t);return n==="{}"?"default":n}get _queryObject(){return mu(this._queryParams)}isEqual(t){if(t=us(t),!(t instanceof Rl))return!1;const n=this._repo===t._repo,i=nl(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Kp(this._path)}}class _n extends Rl{constructor(t,n){super(t,n,new ol,!1)}get parent(){const t=Gc(this._path);return t===null?null:new _n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class rr{constructor(t,n,i){this._node=t,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new ge(t),i=Io(this.ref,t);return new rr(this._node.getChild(n),i,Ne)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new rr(s,Io(this.ref,i),Ne)))}hasChild(t){const n=new ge(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function un(e,t){return e=us(e),e._checkNotDeleted("ref"),t!==void 0?Io(e._root,t):e._root}function Io(e,t){return e=us(e),X(e._path)===null?Av("child","path",t):Td("child","path",t),new _n(e._repo,Ye(e._path,t))}function Ai(e,t){e=us(e),Lv("set",e._path),Ov("set",t,e._path);const n=new Yo;return $v(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class Ml{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const i=n._queryParams.getIndex();return new i_("value",this,new rr(t.snapshotNode,new _n(n._repo,n._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new s_(this,t,n):null}matches(t){return t instanceof Ml?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function o_(e,t,n,i,s){const r=new r_(n,void 0),o=new Ml(r);return Gv(e._repo,e,o),()=>Qv(e._repo,e,o)}function ro(e,t,n,i){return o_(e,"value",t)}ov(_n);hv(_n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="FIREBASE_DATABASE_EMULATOR_HOST",Ro={};let a_=!1;function u_(e,t,n,i){const s=t.lastIndexOf(":"),r=t.substring(0,s),o=tc(r);e.repoInfo_=new Fc(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(e.authTokenProvider_=i)}function c_(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||Xt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=Mu(r,s),l=o.repoInfo,a;typeof process<"u"&&Ka&&(a=Ka[l_]),a?(r=`http://${a}?ns=${l.namespace}`,o=Mu(r,s),l=o.repoInfo):o.repoInfo.secure;const u=new Cp(e.name,e.options,t);Fv("Invalid Firebase Database URL",o),te(o.path)||Xt("Database URL must point to the root of a Firebase Database (not including a child path).");const c=h_(l,e,u,new Sp(e,n));return new f_(c,e)}function d_(e,t){const n=Ro[t];(!n||n[e.key]!==e)&&Xt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Kv(e),delete n[e.key]}function h_(e,t,n,i){let s=Ro[t.name];s||(s={},Ro[t.name]=s);let r=s[e.toURLString()];return r&&Xt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Hv(e,a_,n,i),s[e.toURLString()]=r,r}class f_{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(zv(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _n(this._repo,ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(d_(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Xt("Cannot call "+t+" on a deleted database.")}}function m_(e=bf(),t){const n=kf(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const i=Sf("database");i&&p_(n,...i)}return n}function p_(e,t,n,i={}){e=us(e),e._checkNotDeleted("useEmulator");const s=`${t}:${n}`,r=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&xf(i,r.repoInfo_.emulatorOptions))return;Xt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Xt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ns(Ns.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:Tf(i.mockUserToken,e.app.options.projectId);o=new Ns(l)}tc(t)&&(Ef(t),If("Database",!0)),u_(r,s,i,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(e){lp(zf),Nf(new Of("database",(t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return c_(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),ka(Za,Xa,e),ka(Za,Xa,"esm2017")}Qt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Qt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};g_();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Ad;function R(){return Ad.apply(null,arguments)}function v_(e){Ad=e}function Rt(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Dn(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dl(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(le(e,t))return!1;return!0}function st(e){return e===void 0}function en(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function gs(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Ld(e,t){var n=[],i,s=e.length;for(i=0;i<s;++i)n.push(t(e[i],i));return n}function hn(e,t){for(var n in t)le(t,n)&&(e[n]=t[n]);return le(t,"toString")&&(e.toString=t.toString),le(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Vt(e,t,n,i){return rh(e,t,n,i,!0).utc()}function __(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function G(e){return e._pf==null&&(e._pf=__()),e._pf}var Mo;Array.prototype.some?Mo=Array.prototype.some:Mo=function(e){var t=Object(this),n=t.length>>>0,i;for(i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};function Pl(e){var t=null,n=!1,i=e._d&&!isNaN(e._d.getTime());if(i&&(t=G(e),n=Mo.call(t.parsedDateParts,function(s){return s!=null}),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i;return e._isValid}function xr(e){var t=Vt(NaN);return e!=null?hn(G(t),e):G(t).userInvalidated=!0,t}var Du=R.momentProperties=[],oo=!1;function Nl(e,t){var n,i,s,r=Du.length;if(st(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),st(t._i)||(e._i=t._i),st(t._f)||(e._f=t._f),st(t._l)||(e._l=t._l),st(t._strict)||(e._strict=t._strict),st(t._tzm)||(e._tzm=t._tzm),st(t._isUTC)||(e._isUTC=t._isUTC),st(t._offset)||(e._offset=t._offset),st(t._pf)||(e._pf=G(t)),st(t._locale)||(e._locale=t._locale),r>0)for(n=0;n<r;n++)i=Du[n],s=t[i],st(s)||(e[i]=s);return e}function vs(e){Nl(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),oo===!1&&(oo=!0,R.updateOffset(this),oo=!1)}function Mt(e){return e instanceof vs||e!=null&&e._isAMomentObject!=null}function Fd(e){R.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function _t(e,t){var n=!0;return hn(function(){if(R.deprecationHandler!=null&&R.deprecationHandler(null,e),n){var i=[],s,r,o,l=arguments.length;for(r=0;r<l;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])le(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}Fd(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var Pu={};function qd(e,t){R.deprecationHandler!=null&&R.deprecationHandler(e,t),Pu[e]||(Fd(t),Pu[e]=!0)}R.suppressDeprecationWarnings=!1;R.deprecationHandler=null;function Wt(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function y_(e){var t,n;for(n in e)le(e,n)&&(t=e[n],Wt(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Do(e,t){var n=hn({},e),i;for(i in t)le(t,i)&&(Dn(e[i])&&Dn(t[i])?(n[i]={},hn(n[i],e[i]),hn(n[i],t[i])):t[i]!=null?n[i]=t[i]:delete n[i]);for(i in e)le(e,i)&&!le(t,i)&&Dn(e[i])&&(n[i]=hn({},n[i]));return n}function Ol(e){e!=null&&this.set(e)}var Po;Object.keys?Po=Object.keys:Po=function(e){var t,n=[];for(t in e)le(e,t)&&n.push(t);return n};var w_={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function b_(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return Wt(i)?i.call(t,n):i}function qt(e,t,n){var i=""+Math.abs(e),s=t-i.length,r=e>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var Al=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Is=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,lo={},di={};function W(e,t,n,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),e&&(di[e]=s),t&&(di[t[0]]=function(){return qt(s.apply(this,arguments),t[1],t[2])}),n&&(di[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function k_(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function S_(e){var t=e.match(Al),n,i;for(n=0,i=t.length;n<i;n++)di[t[n]]?t[n]=di[t[n]]:t[n]=k_(t[n]);return function(s){var r="",o;for(o=0;o<i;o++)r+=Wt(t[o])?t[o].call(s,e):t[o];return r}}function Os(e,t){return e.isValid()?(t=Vd(t,e.localeData()),lo[t]=lo[t]||S_(t),lo[t](e)):e.localeData().invalidDate()}function Vd(e,t){var n=5;function i(s){return t.longDateFormat(s)||s}for(Is.lastIndex=0;n>=0&&Is.test(e);)e=e.replace(Is,i),Is.lastIndex=0,n-=1;return e}var C_={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function x_(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(Al).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var T_="Invalid date";function E_(){return this._invalidDate}var I_="%d",R_=/\d{1,2}/;function M_(e){return this._ordinal.replace("%d",e)}var D_={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function P_(e,t,n,i){var s=this._relativeTime[n];return Wt(s)?s(e,t,n,i):s.replace(/%d/i,e)}function N_(e,t){var n=this._relativeTime[e>0?"future":"past"];return Wt(n)?n(t):n.replace(/%s/i,t)}var Nu={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function yt(e){return typeof e=="string"?Nu[e]||Nu[e.toLowerCase()]:void 0}function Ll(e){var t={},n,i;for(i in e)le(e,i)&&(n=yt(i),n&&(t[n]=e[i]));return t}var O_={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function A_(e){var t=[],n;for(n in e)le(e,n)&&t.push({unit:n,priority:O_[n]});return t.sort(function(i,s){return i.priority-s.priority}),t}var Wd=/\d/,ft=/\d\d/,Yd=/\d{3}/,Fl=/\d{4}/,Tr=/[+-]?\d{6}/,Se=/\d\d?/,Hd=/\d\d\d\d?/,zd=/\d\d\d\d\d\d?/,Er=/\d{1,3}/,ql=/\d{1,4}/,Ir=/[+-]?\d{1,6}/,Ci=/\d+/,Rr=/[+-]?\d+/,L_=/Z|[+-]\d\d:?\d\d/gi,Mr=/Z|[+-]\d\d(?::?\d\d)?/gi,F_=/[+-]?\d+(\.\d{1,3})?/,_s=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xi=/^[1-9]\d?/,Vl=/^([1-9]\d|\d)/,or;or={};function P(e,t,n){or[e]=Wt(t)?t:function(i,s){return i&&n?n:t}}function q_(e,t){return le(or,e)?or[e](t._strict,t._locale):new RegExp(V_(e))}function V_(e){return Kt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,i,s,r){return n||i||s||r}))}function Kt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function vt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ne(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=vt(t)),n}var No={};function me(e,t){var n,i=t,s;for(typeof e=="string"&&(e=[e]),en(t)&&(i=function(r,o){o[t]=ne(r)}),s=e.length,n=0;n<s;n++)No[e[n]]=i}function ys(e,t){me(e,function(n,i,s,r){s._w=s._w||{},t(n,s._w,s,r)})}function W_(e,t,n){t!=null&&le(No,e)&&No[e](t,n._a,n,e)}function Dr(e){return e%4===0&&e%100!==0||e%400===0}var et=0,Bt=1,Ft=2,He=3,Tt=4,$t=5,En=6,Y_=7,H_=8;W("Y",0,0,function(){var e=this.year();return e<=9999?qt(e,4):"+"+e});W(0,["YY",2],0,function(){return this.year()%100});W(0,["YYYY",4],0,"year");W(0,["YYYYY",5],0,"year");W(0,["YYYYYY",6,!0],0,"year");P("Y",Rr);P("YY",Se,ft);P("YYYY",ql,Fl);P("YYYYY",Ir,Tr);P("YYYYYY",Ir,Tr);me(["YYYYY","YYYYYY"],et);me("YYYY",function(e,t){t[et]=e.length===2?R.parseTwoDigitYear(e):ne(e)});me("YY",function(e,t){t[et]=R.parseTwoDigitYear(e)});me("Y",function(e,t){t[et]=parseInt(e,10)});function Qi(e){return Dr(e)?366:365}R.parseTwoDigitYear=function(e){return ne(e)+(ne(e)>68?1900:2e3)};var Ud=Ti("FullYear",!0);function z_(){return Dr(this.year())}function Ti(e,t){return function(n){return n!=null?(Bd(this,e,n),R.updateOffset(this,t),this):rs(this,e)}}function rs(e,t){if(!e.isValid())return NaN;var n=e._d,i=e._isUTC;switch(t){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Bd(e,t,n){var i,s,r,o,l;if(!(!e.isValid()||isNaN(n))){switch(i=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(s?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(s?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(s?i.setUTCHours(n):i.setHours(n));case"Date":return void(s?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}r=n,o=e.month(),l=e.date(),l=l===29&&o===1&&!Dr(r)?28:l,s?i.setUTCFullYear(r,o,l):i.setFullYear(r,o,l)}}function U_(e){return e=yt(e),Wt(this[e])?this[e]():this}function B_(e,t){if(typeof e=="object"){e=Ll(e);var n=A_(e),i,s=n.length;for(i=0;i<s;i++)this[n[i].unit](e[n[i].unit])}else if(e=yt(e),Wt(this[e]))return this[e](t);return this}function $_(e,t){return(e%t+t)%t}var Le;Array.prototype.indexOf?Le=Array.prototype.indexOf:Le=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Wl(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=$_(t,12);return e+=(t-n)/12,n===1?Dr(e)?29:28:31-n%7%2}W("M",["MM",2],"Mo",function(){return this.month()+1});W("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});W("MMMM",0,0,function(e){return this.localeData().months(this,e)});P("M",Se,xi);P("MM",Se,ft);P("MMM",function(e,t){return t.monthsShortRegex(e)});P("MMMM",function(e,t){return t.monthsRegex(e)});me(["M","MM"],function(e,t){t[Bt]=ne(e)-1});me(["MMM","MMMM"],function(e,t,n,i){var s=n._locale.monthsParse(e,i,n._strict);s!=null?t[Bt]=s:G(n).invalidMonth=e});var j_="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$d="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),jd=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,G_=_s,Q_=_s;function K_(e,t){return e?Rt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||jd).test(t)?"format":"standalone"][e.month()]:Rt(this._months)?this._months:this._months.standalone}function Z_(e,t){return e?Rt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[jd.test(t)?"format":"standalone"][e.month()]:Rt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function X_(e,t,n){var i,s,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=Vt([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?t==="MMM"?(s=Le.call(this._shortMonthsParse,o),s!==-1?s:null):(s=Le.call(this._longMonthsParse,o),s!==-1?s:null):t==="MMM"?(s=Le.call(this._shortMonthsParse,o),s!==-1?s:(s=Le.call(this._longMonthsParse,o),s!==-1?s:null)):(s=Le.call(this._longMonthsParse,o),s!==-1?s:(s=Le.call(this._shortMonthsParse,o),s!==-1?s:null))}function J_(e,t,n){var i,s,r;if(this._monthsParseExact)return X_.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=Vt([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(n&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function Gd(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ne(t);else if(t=e.localeData().monthsParse(t),!en(t))return e}var n=t,i=e.date();return i=i<29?i:Math.min(i,Wl(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,i):e._d.setMonth(n,i),e}function Qd(e){return e!=null?(Gd(this,e),R.updateOffset(this,!0),this):rs(this,"Month")}function ey(){return Wl(this.year(),this.month())}function ty(e){return this._monthsParseExact?(le(this,"_monthsRegex")||Kd.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(le(this,"_monthsShortRegex")||(this._monthsShortRegex=G_),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ny(e){return this._monthsParseExact?(le(this,"_monthsRegex")||Kd.call(this),e?this._monthsStrictRegex:this._monthsRegex):(le(this,"_monthsRegex")||(this._monthsRegex=Q_),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Kd(){function e(a,u){return u.length-a.length}var t=[],n=[],i=[],s,r,o,l;for(s=0;s<12;s++)r=Vt([2e3,s]),o=Kt(this.monthsShort(r,"")),l=Kt(this.months(r,"")),t.push(o),n.push(l),i.push(l),i.push(o);t.sort(e),n.sort(e),i.sort(e),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function iy(e,t,n,i,s,r,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,i,s,r,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,i,s,r,o),l}function os(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function lr(e,t,n){var i=7+t-n,s=(7+os(e,0,i).getUTCDay()-t)%7;return-s+i-1}function Zd(e,t,n,i,s){var r=(7+n-i)%7,o=lr(e,i,s),l=1+7*(t-1)+r+o,a,u;return l<=0?(a=e-1,u=Qi(a)+l):l>Qi(e)?(a=e+1,u=l-Qi(e)):(a=e,u=l),{year:a,dayOfYear:u}}function ls(e,t,n){var i=lr(e.year(),t,n),s=Math.floor((e.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=e.year()-1,r=s+Zt(o,t,n)):s>Zt(e.year(),t,n)?(r=s-Zt(e.year(),t,n),o=e.year()+1):(o=e.year(),r=s),{week:r,year:o}}function Zt(e,t,n){var i=lr(e,t,n),s=lr(e+1,t,n);return(Qi(e)-i+s)/7}W("w",["ww",2],"wo","week");W("W",["WW",2],"Wo","isoWeek");P("w",Se,xi);P("ww",Se,ft);P("W",Se,xi);P("WW",Se,ft);ys(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=ne(e)});function sy(e){return ls(e,this._week.dow,this._week.doy).week}var ry={dow:0,doy:6};function oy(){return this._week.dow}function ly(){return this._week.doy}function ay(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function uy(e){var t=ls(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}W("d",0,"do","day");W("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});W("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});W("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});W("e",0,0,"weekday");W("E",0,0,"isoWeekday");P("d",Se);P("e",Se);P("E",Se);P("dd",function(e,t){return t.weekdaysMinRegex(e)});P("ddd",function(e,t){return t.weekdaysShortRegex(e)});P("dddd",function(e,t){return t.weekdaysRegex(e)});ys(["dd","ddd","dddd"],function(e,t,n,i){var s=n._locale.weekdaysParse(e,i,n._strict);s!=null?t.d=s:G(n).invalidWeekday=e});ys(["d","e","E"],function(e,t,n,i){t[i]=ne(e)});function cy(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function dy(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Yl(e,t){return e.slice(t,7).concat(e.slice(0,t))}var hy="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),fy="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),my=_s,py=_s,gy=_s;function vy(e,t){var n=Rt(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Yl(n,this._week.dow):e?n[e.day()]:n}function _y(e){return e===!0?Yl(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function yy(e){return e===!0?Yl(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function wy(e,t,n){var i,s,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=Vt([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?t==="dddd"?(s=Le.call(this._weekdaysParse,o),s!==-1?s:null):t==="ddd"?(s=Le.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=Le.call(this._minWeekdaysParse,o),s!==-1?s:null):t==="dddd"?(s=Le.call(this._weekdaysParse,o),s!==-1||(s=Le.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=Le.call(this._minWeekdaysParse,o),s!==-1?s:null)):t==="ddd"?(s=Le.call(this._shortWeekdaysParse,o),s!==-1||(s=Le.call(this._weekdaysParse,o),s!==-1)?s:(s=Le.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=Le.call(this._minWeekdaysParse,o),s!==-1||(s=Le.call(this._weekdaysParse,o),s!==-1)?s:(s=Le.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function by(e,t,n){var i,s,r;if(this._weekdaysParseExact)return wy.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=Vt([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(n&&t==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(n&&t==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function ky(e){if(!this.isValid())return e!=null?this:NaN;var t=rs(this,"Day");return e!=null?(e=cy(e,this.localeData()),this.add(e-t,"d")):t}function Sy(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Cy(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=dy(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function xy(e){return this._weekdaysParseExact?(le(this,"_weekdaysRegex")||Hl.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(le(this,"_weekdaysRegex")||(this._weekdaysRegex=my),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ty(e){return this._weekdaysParseExact?(le(this,"_weekdaysRegex")||Hl.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(le(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=py),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ey(e){return this._weekdaysParseExact?(le(this,"_weekdaysRegex")||Hl.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(le(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=gy),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Hl(){function e(c,d){return d.length-c.length}var t=[],n=[],i=[],s=[],r,o,l,a,u;for(r=0;r<7;r++)o=Vt([2e3,1]).day(r),l=Kt(this.weekdaysMin(o,"")),a=Kt(this.weekdaysShort(o,"")),u=Kt(this.weekdays(o,"")),t.push(l),n.push(a),i.push(u),s.push(l),s.push(a),s.push(u);t.sort(e),n.sort(e),i.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function zl(){return this.hours()%12||12}function Iy(){return this.hours()||24}W("H",["HH",2],0,"hour");W("h",["hh",2],0,zl);W("k",["kk",2],0,Iy);W("hmm",0,0,function(){return""+zl.apply(this)+qt(this.minutes(),2)});W("hmmss",0,0,function(){return""+zl.apply(this)+qt(this.minutes(),2)+qt(this.seconds(),2)});W("Hmm",0,0,function(){return""+this.hours()+qt(this.minutes(),2)});W("Hmmss",0,0,function(){return""+this.hours()+qt(this.minutes(),2)+qt(this.seconds(),2)});function Jd(e,t){W(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Jd("a",!0);Jd("A",!1);function eh(e,t){return t._meridiemParse}P("a",eh);P("A",eh);P("H",Se,Vl);P("h",Se,xi);P("k",Se,xi);P("HH",Se,ft);P("hh",Se,ft);P("kk",Se,ft);P("hmm",Hd);P("hmmss",zd);P("Hmm",Hd);P("Hmmss",zd);me(["H","HH"],He);me(["k","kk"],function(e,t,n){var i=ne(e);t[He]=i===24?0:i});me(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});me(["h","hh"],function(e,t,n){t[He]=ne(e),G(n).bigHour=!0});me("hmm",function(e,t,n){var i=e.length-2;t[He]=ne(e.substr(0,i)),t[Tt]=ne(e.substr(i)),G(n).bigHour=!0});me("hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[He]=ne(e.substr(0,i)),t[Tt]=ne(e.substr(i,2)),t[$t]=ne(e.substr(s)),G(n).bigHour=!0});me("Hmm",function(e,t,n){var i=e.length-2;t[He]=ne(e.substr(0,i)),t[Tt]=ne(e.substr(i))});me("Hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[He]=ne(e.substr(0,i)),t[Tt]=ne(e.substr(i,2)),t[$t]=ne(e.substr(s))});function Ry(e){return(e+"").toLowerCase().charAt(0)==="p"}var My=/[ap]\.?m?\.?/i,Dy=Ti("Hours",!0);function Py(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var th={calendar:w_,longDateFormat:C_,invalidDate:T_,ordinal:I_,dayOfMonthOrdinalParse:R_,relativeTime:D_,months:j_,monthsShort:$d,week:ry,weekdays:hy,weekdaysMin:fy,weekdaysShort:Xd,meridiemParse:My},Ee={},Li={},as;function Ny(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function Ou(e){return e&&e.toLowerCase().replace("_","-")}function Oy(e){for(var t=0,n,i,s,r;t<e.length;){for(r=Ou(e[t]).split("-"),n=r.length,i=Ou(e[t+1]),i=i?i.split("-"):null;n>0;){if(s=Pr(r.slice(0,n).join("-")),s)return s;if(i&&i.length>=n&&Ny(r,i)>=n-1)break;n--}t++}return as}function Ay(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Pr(e){var t=null,n;if(Ee[e]===void 0&&typeof module<"u"&&module&&module.exports&&Ay(e))try{t=as._abbr,n=require,n("./locale/"+e),pn(t)}catch{Ee[e]=null}return Ee[e]}function pn(e,t){var n;return e&&(st(t)?n=nn(e):n=Ul(e,t),n?as=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),as._abbr}function Ul(e,t){if(t!==null){var n,i=th;if(t.abbr=e,Ee[e]!=null)qd("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ee[e]._config;else if(t.parentLocale!=null)if(Ee[t.parentLocale]!=null)i=Ee[t.parentLocale]._config;else if(n=Pr(t.parentLocale),n!=null)i=n._config;else return Li[t.parentLocale]||(Li[t.parentLocale]=[]),Li[t.parentLocale].push({name:e,config:t}),null;return Ee[e]=new Ol(Do(i,t)),Li[e]&&Li[e].forEach(function(s){Ul(s.name,s.config)}),pn(e),Ee[e]}else return delete Ee[e],null}function Ly(e,t){if(t!=null){var n,i,s=th;Ee[e]!=null&&Ee[e].parentLocale!=null?Ee[e].set(Do(Ee[e]._config,t)):(i=Pr(e),i!=null&&(s=i._config),t=Do(s,t),i==null&&(t.abbr=e),n=new Ol(t),n.parentLocale=Ee[e],Ee[e]=n),pn(e)}else Ee[e]!=null&&(Ee[e].parentLocale!=null?(Ee[e]=Ee[e].parentLocale,e===pn()&&pn(e)):Ee[e]!=null&&delete Ee[e]);return Ee[e]}function nn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return as;if(!Rt(e)){if(t=Pr(e),t)return t;e=[e]}return Oy(e)}function Fy(){return Po(Ee)}function Bl(e){var t,n=e._a;return n&&G(e).overflow===-2&&(t=n[Bt]<0||n[Bt]>11?Bt:n[Ft]<1||n[Ft]>Wl(n[et],n[Bt])?Ft:n[He]<0||n[He]>24||n[He]===24&&(n[Tt]!==0||n[$t]!==0||n[En]!==0)?He:n[Tt]<0||n[Tt]>59?Tt:n[$t]<0||n[$t]>59?$t:n[En]<0||n[En]>999?En:-1,G(e)._overflowDayOfYear&&(t<et||t>Ft)&&(t=Ft),G(e)._overflowWeeks&&t===-1&&(t=Y_),G(e)._overflowWeekday&&t===-1&&(t=H_),G(e).overflow=t),e}var qy=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vy=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wy=/Z|[+-]\d\d(?::?\d\d)?/,Rs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ao=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Yy=/^\/?Date\((-?\d+)/i,Hy=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,zy={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function nh(e){var t,n,i=e._i,s=qy.exec(i)||Vy.exec(i),r,o,l,a,u=Rs.length,c=ao.length;if(s){for(G(e).iso=!0,t=0,n=u;t<n;t++)if(Rs[t][1].exec(s[1])){o=Rs[t][0],r=Rs[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(s[3]){for(t=0,n=c;t<n;t++)if(ao[t][1].exec(s[3])){l=(s[2]||" ")+ao[t][0];break}if(l==null){e._isValid=!1;return}}if(!r&&l!=null){e._isValid=!1;return}if(s[4])if(Wy.exec(s[4]))a="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(a||""),jl(e)}else e._isValid=!1}function Uy(e,t,n,i,s,r){var o=[By(e),$d.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function By(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function $y(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function jy(e,t,n){if(e){var i=Xd.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(i!==s)return G(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Gy(e,t,n){if(e)return zy[e];if(t)return 0;var i=parseInt(n,10),s=i%100,r=(i-s)/100;return r*60+s}function ih(e){var t=Hy.exec($y(e._i)),n;if(t){if(n=Uy(t[4],t[3],t[2],t[5],t[6],t[7]),!jy(t[1],n,e))return;e._a=n,e._tzm=Gy(t[8],t[9],t[10]),e._d=os.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),G(e).rfc2822=!0}else e._isValid=!1}function Qy(e){var t=Yy.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(nh(e),e._isValid===!1)delete e._isValid;else return;if(ih(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:R.createFromInputFallback(e)}R.createFromInputFallback=_t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ti(e,t,n){return e??t??n}function Ky(e){var t=new Date(R.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function $l(e){var t,n,i=[],s,r,o;if(!e._d){for(s=Ky(e),e._w&&e._a[Ft]==null&&e._a[Bt]==null&&Zy(e),e._dayOfYear!=null&&(o=ti(e._a[et],s[et]),(e._dayOfYear>Qi(o)||e._dayOfYear===0)&&(G(e)._overflowDayOfYear=!0),n=os(o,0,e._dayOfYear),e._a[Bt]=n.getUTCMonth(),e._a[Ft]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=s[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[He]===24&&e._a[Tt]===0&&e._a[$t]===0&&e._a[En]===0&&(e._nextDay=!0,e._a[He]=0),e._d=(e._useUTC?os:iy).apply(null,i),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[He]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==r&&(G(e).weekdayMismatch=!0)}}function Zy(e){var t,n,i,s,r,o,l,a,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(r=1,o=4,n=ti(t.GG,e._a[et],ls(ke(),1,4).year),i=ti(t.W,1),s=ti(t.E,1),(s<1||s>7)&&(a=!0)):(r=e._locale._week.dow,o=e._locale._week.doy,u=ls(ke(),r,o),n=ti(t.gg,e._a[et],u.year),i=ti(t.w,u.week),t.d!=null?(s=t.d,(s<0||s>6)&&(a=!0)):t.e!=null?(s=t.e+r,(t.e<0||t.e>6)&&(a=!0)):s=r),i<1||i>Zt(n,r,o)?G(e)._overflowWeeks=!0:a!=null?G(e)._overflowWeekday=!0:(l=Zd(n,i,s,r,o),e._a[et]=l.year,e._dayOfYear=l.dayOfYear)}R.ISO_8601=function(){};R.RFC_2822=function(){};function jl(e){if(e._f===R.ISO_8601){nh(e);return}if(e._f===R.RFC_2822){ih(e);return}e._a=[],G(e).empty=!0;var t=""+e._i,n,i,s,r,o,l=t.length,a=0,u,c;for(s=Vd(e._f,e._locale).match(Al)||[],c=s.length,n=0;n<c;n++)r=s[n],i=(t.match(q_(r,e))||[])[0],i&&(o=t.substr(0,t.indexOf(i)),o.length>0&&G(e).unusedInput.push(o),t=t.slice(t.indexOf(i)+i.length),a+=i.length),di[r]?(i?G(e).empty=!1:G(e).unusedTokens.push(r),W_(r,i,e)):e._strict&&!i&&G(e).unusedTokens.push(r);G(e).charsLeftOver=l-a,t.length>0&&G(e).unusedInput.push(t),e._a[He]<=12&&G(e).bigHour===!0&&e._a[He]>0&&(G(e).bigHour=void 0),G(e).parsedDateParts=e._a.slice(0),G(e).meridiem=e._meridiem,e._a[He]=Xy(e._locale,e._a[He],e._meridiem),u=G(e).era,u!==null&&(e._a[et]=e._locale.erasConvertYear(u,e._a[et])),$l(e),Bl(e)}function Xy(e,t,n){var i;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(i=e.isPM(n),i&&t<12&&(t+=12),!i&&t===12&&(t=0)),t)}function Jy(e){var t,n,i,s,r,o,l=!1,a=e._f.length;if(a===0){G(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<a;s++)r=0,o=!1,t=Nl({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],jl(t),Pl(t)&&(o=!0),r+=G(t).charsLeftOver,r+=G(t).unusedTokens.length*10,G(t).score=r,l?r<i&&(i=r,n=t):(i==null||r<i||o)&&(i=r,n=t,o&&(l=!0));hn(e,n||t)}function e0(e){if(!e._d){var t=Ll(e._i),n=t.day===void 0?t.date:t.day;e._a=Ld([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(i){return i&&parseInt(i,10)}),$l(e)}}function t0(e){var t=new vs(Bl(sh(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function sh(e){var t=e._i,n=e._f;return e._locale=e._locale||nn(e._l),t===null||n===void 0&&t===""?xr({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Mt(t)?new vs(Bl(t)):(gs(t)?e._d=t:Rt(n)?Jy(e):n?jl(e):n0(e),Pl(e)||(e._d=null),e))}function n0(e){var t=e._i;st(t)?e._d=new Date(R.now()):gs(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Qy(e):Rt(t)?(e._a=Ld(t.slice(0),function(n){return parseInt(n,10)}),$l(e)):Dn(t)?e0(e):en(t)?e._d=new Date(t):R.createFromInputFallback(e)}function rh(e,t,n,i,s){var r={};return(t===!0||t===!1)&&(i=t,t=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(Dn(e)&&Dl(e)||Rt(e)&&e.length===0)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=n,r._i=e,r._f=t,r._strict=i,t0(r)}function ke(e,t,n,i){return rh(e,t,n,i,!1)}var i0=_t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ke.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:xr()}),s0=_t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ke.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:xr()});function oh(e,t){var n,i;if(t.length===1&&Rt(t[0])&&(t=t[0]),!t.length)return ke();for(n=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](n))&&(n=t[i]);return n}function r0(){var e=[].slice.call(arguments,0);return oh("isBefore",e)}function o0(){var e=[].slice.call(arguments,0);return oh("isAfter",e)}var l0=function(){return Date.now?Date.now():+new Date},Fi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function a0(e){var t,n=!1,i,s=Fi.length;for(t in e)if(le(e,t)&&!(Le.call(Fi,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(i=0;i<s;++i)if(e[Fi[i]]){if(n)return!1;parseFloat(e[Fi[i]])!==ne(e[Fi[i]])&&(n=!0)}return!0}function u0(){return this._isValid}function c0(){return Dt(NaN)}function Nr(e){var t=Ll(e),n=t.year||0,i=t.quarter||0,s=t.month||0,r=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,a=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=a0(t),this._milliseconds=+c+u*1e3+a*6e4+l*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+n*12,this._data={},this._locale=nn(),this._bubble()}function As(e){return e instanceof Nr}function Oo(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function d0(e,t,n){var i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0,o;for(o=0;o<i;o++)ne(e[o])!==ne(t[o])&&r++;return r+s}function lh(e,t){W(e,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+qt(~~(n/60),2)+t+qt(~~n%60,2)})}lh("Z",":");lh("ZZ","");P("Z",Mr);P("ZZ",Mr);me(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Gl(Mr,e)});var h0=/([\+\-]|\d\d)/gi;function Gl(e,t){var n=(t||"").match(e),i,s,r;return n===null?null:(i=n[n.length-1]||[],s=(i+"").match(h0)||["-",0,0],r=+(s[1]*60)+ne(s[2]),r===0?0:s[0]==="+"?r:-r)}function Ql(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(Mt(e)||gs(e)?e.valueOf():ke(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),R.updateOffset(n,!1),n):ke(e).local()}function Ao(e){return-Math.round(e._d.getTimezoneOffset())}R.updateOffset=function(){};function f0(e,t,n){var i=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Gl(Mr,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(s=Ao(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?ch(this,Dt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,R.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:Ao(this)}function m0(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function p0(e){return this.utcOffset(0,e)}function g0(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ao(this),"m")),this}function v0(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Gl(L_,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function _0(e){return this.isValid()?(e=e?ke(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function y0(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function w0(){if(!st(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Nl(e,this),e=sh(e),e._a?(t=e._isUTC?Vt(e._a):ke(e._a),this._isDSTShifted=this.isValid()&&d0(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function b0(){return this.isValid()?!this._isUTC:!1}function k0(){return this.isValid()?this._isUTC:!1}function ah(){return this.isValid()?this._isUTC&&this._offset===0:!1}var S0=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,C0=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Dt(e,t){var n=e,i=null,s,r,o;return As(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:en(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(i=S0.exec(e))?(s=i[1]==="-"?-1:1,n={y:0,d:ne(i[Ft])*s,h:ne(i[He])*s,m:ne(i[Tt])*s,s:ne(i[$t])*s,ms:ne(Oo(i[En]*1e3))*s}):(i=C0.exec(e))?(s=i[1]==="-"?-1:1,n={y:Sn(i[2],s),M:Sn(i[3],s),w:Sn(i[4],s),d:Sn(i[5],s),h:Sn(i[6],s),m:Sn(i[7],s),s:Sn(i[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=x0(ke(n.from),ke(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),r=new Nr(n),As(e)&&le(e,"_locale")&&(r._locale=e._locale),As(e)&&le(e,"_isValid")&&(r._isValid=e._isValid),r}Dt.fn=Nr.prototype;Dt.invalid=c0;function Sn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Au(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function x0(e,t){var n;return e.isValid()&&t.isValid()?(t=Ql(t,e),e.isBefore(t)?n=Au(e,t):(n=Au(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function uh(e,t){return function(n,i){var s,r;return i!==null&&!isNaN(+i)&&(qd(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),s=Dt(n,i),ch(this,s,e),this}}function ch(e,t,n,i){var s=t._milliseconds,r=Oo(t._days),o=Oo(t._months);e.isValid()&&(i=i??!0,o&&Gd(e,rs(e,"Month")+o*n),r&&Bd(e,"Date",rs(e,"Date")+r*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&R.updateOffset(e,r||o))}var T0=uh(1,"add"),E0=uh(-1,"subtract");function dh(e){return typeof e=="string"||e instanceof String}function I0(e){return Mt(e)||gs(e)||dh(e)||en(e)||M0(e)||R0(e)||e===null||e===void 0}function R0(e){var t=Dn(e)&&!Dl(e),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],n=n||le(e,r);return t&&n}function M0(e){var t=Rt(e),n=!1;return t&&(n=e.filter(function(i){return!en(i)&&dh(e)}).length===0),t&&n}function D0(e){var t=Dn(e)&&!Dl(e),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],n=n||le(e,r);return t&&n}function P0(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function N0(e,t){arguments.length===1&&(arguments[0]?I0(arguments[0])?(e=arguments[0],t=void 0):D0(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||ke(),i=Ql(n,this).startOf("day"),s=R.calendarFormat(this,i)||"sameElse",r=t&&(Wt(t[s])?t[s].call(this,n):t[s]);return this.format(r||this.localeData().calendar(s,this,ke(n)))}function O0(){return new vs(this)}function A0(e,t){var n=Mt(e)?e:ke(e);return this.isValid()&&n.isValid()?(t=yt(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function L0(e,t){var n=Mt(e)?e:ke(e);return this.isValid()&&n.isValid()?(t=yt(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function F0(e,t,n,i){var s=Mt(e)?e:ke(e),r=Mt(t)?t:ke(t);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(i[1]===")"?this.isBefore(r,n):!this.isAfter(r,n))):!1}function q0(e,t){var n=Mt(e)?e:ke(e),i;return this.isValid()&&n.isValid()?(t=yt(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function V0(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function W0(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Y0(e,t,n){var i,s,r;if(!this.isValid())return NaN;if(i=Ql(e,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,t=yt(t),t){case"year":r=Ls(this,i)/12;break;case"month":r=Ls(this,i);break;case"quarter":r=Ls(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return n?r:vt(r)}function Ls(e,t){if(e.date()<t.date())return-Ls(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(n,"months"),s,r;return t-i<0?(s=e.clone().add(n-1,"months"),r=(t-i)/(i-s)):(s=e.clone().add(n+1,"months"),r=(t-i)/(s-i)),-(n+r)||0}R.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";R.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function H0(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function z0(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Os(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Wt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Os(n,"Z")):Os(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function U0(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,i,s,r;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=t+'[")]',this.format(n+i+s+r)}function B0(e){e||(e=this.isUtc()?R.defaultFormatUtc:R.defaultFormat);var t=Os(this,e);return this.localeData().postformat(t)}function $0(e,t){return this.isValid()&&(Mt(e)&&e.isValid()||ke(e).isValid())?Dt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function j0(e){return this.from(ke(),e)}function G0(e,t){return this.isValid()&&(Mt(e)&&e.isValid()||ke(e).isValid())?Dt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Q0(e){return this.to(ke(),e)}function hh(e){var t;return e===void 0?this._locale._abbr:(t=nn(e),t!=null&&(this._locale=t),this)}var fh=_t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function mh(){return this._locale}var ar=1e3,hi=60*ar,ur=60*hi,ph=(365*400+97)*24*ur;function fi(e,t){return(e%t+t)%t}function gh(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ph:new Date(e,t,n).valueOf()}function vh(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ph:Date.UTC(e,t,n)}function K0(e){var t,n;if(e=yt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?vh:gh,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*hi),ur);break;case"minute":t=this._d.valueOf(),t-=fi(t,hi);break;case"second":t=this._d.valueOf(),t-=fi(t,ar);break}return this._d.setTime(t),R.updateOffset(this,!0),this}function Z0(e){var t,n;if(e=yt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?vh:gh,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ur-fi(t+(this._isUTC?0:this.utcOffset()*hi),ur)-1;break;case"minute":t=this._d.valueOf(),t+=hi-fi(t,hi)-1;break;case"second":t=this._d.valueOf(),t+=ar-fi(t,ar)-1;break}return this._d.setTime(t),R.updateOffset(this,!0),this}function X0(){return this._d.valueOf()-(this._offset||0)*6e4}function J0(){return Math.floor(this.valueOf()/1e3)}function ew(){return new Date(this.valueOf())}function tw(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function nw(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function iw(){return this.isValid()?this.toISOString():null}function sw(){return Pl(this)}function rw(){return hn({},G(this))}function ow(){return G(this).overflow}function lw(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}W("N",0,0,"eraAbbr");W("NN",0,0,"eraAbbr");W("NNN",0,0,"eraAbbr");W("NNNN",0,0,"eraName");W("NNNNN",0,0,"eraNarrow");W("y",["y",1],"yo","eraYear");W("y",["yy",2],0,"eraYear");W("y",["yyy",3],0,"eraYear");W("y",["yyyy",4],0,"eraYear");P("N",Kl);P("NN",Kl);P("NNN",Kl);P("NNNN",_w);P("NNNNN",yw);me(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var s=n._locale.erasParse(e,i,n._strict);s?G(n).era=s:G(n).invalidEra=e});P("y",Ci);P("yy",Ci);P("yyy",Ci);P("yyyy",Ci);P("yo",ww);me(["y","yy","yyy","yyyy"],et);me(["yo"],function(e,t,n,i){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[et]=n._locale.eraYearOrdinalParse(e,s):t[et]=parseInt(e,10)});function aw(e,t){var n,i,s,r=this._eras||nn("en")._eras;for(n=0,i=r.length;n<i;++n){switch(typeof r[n].since){case"string":s=R(r[n].since).startOf("day"),r[n].since=s.valueOf();break}switch(typeof r[n].until){case"undefined":r[n].until=1/0;break;case"string":s=R(r[n].until).startOf("day").valueOf(),r[n].until=s.valueOf();break}}return r}function uw(e,t,n){var i,s,r=this.eras(),o,l,a;for(e=e.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),l=r[i].abbr.toUpperCase(),a=r[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(l===e)return r[i];break;case"NNNN":if(o===e)return r[i];break;case"NNNNN":if(a===e)return r[i];break}else if([o,l,a].indexOf(e)>=0)return r[i]}function cw(e,t){var n=e.since<=e.until?1:-1;return t===void 0?R(e.since).year():R(e.since).year()+(t-e.offset)*n}function dw(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].name;return""}function hw(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].narrow;return""}function fw(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].abbr;return""}function mw(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-R(s[e].since).year())*n+s[e].offset;return this.year()}function pw(e){return le(this,"_erasNameRegex")||Zl.call(this),e?this._erasNameRegex:this._erasRegex}function gw(e){return le(this,"_erasAbbrRegex")||Zl.call(this),e?this._erasAbbrRegex:this._erasRegex}function vw(e){return le(this,"_erasNarrowRegex")||Zl.call(this),e?this._erasNarrowRegex:this._erasRegex}function Kl(e,t){return t.erasAbbrRegex(e)}function _w(e,t){return t.erasNameRegex(e)}function yw(e,t){return t.erasNarrowRegex(e)}function ww(e,t){return t._eraYearOrdinalRegex||Ci}function Zl(){var e=[],t=[],n=[],i=[],s,r,o,l,a,u=this.eras();for(s=0,r=u.length;s<r;++s)o=Kt(u[s].name),l=Kt(u[s].abbr),a=Kt(u[s].narrow),t.push(o),e.push(l),n.push(a),i.push(o),i.push(l),i.push(a);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}W(0,["gg",2],0,function(){return this.weekYear()%100});W(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Or(e,t){W(0,[e,e.length],0,t)}Or("gggg","weekYear");Or("ggggg","weekYear");Or("GGGG","isoWeekYear");Or("GGGGG","isoWeekYear");P("G",Rr);P("g",Rr);P("GG",Se,ft);P("gg",Se,ft);P("GGGG",ql,Fl);P("gggg",ql,Fl);P("GGGGG",Ir,Tr);P("ggggg",Ir,Tr);ys(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=ne(e)});ys(["gg","GG"],function(e,t,n,i){t[i]=R.parseTwoDigitYear(e)});function bw(e){return _h.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function kw(e){return _h.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Sw(){return Zt(this.year(),1,4)}function Cw(){return Zt(this.isoWeekYear(),1,4)}function xw(){var e=this.localeData()._week;return Zt(this.year(),e.dow,e.doy)}function Tw(){var e=this.localeData()._week;return Zt(this.weekYear(),e.dow,e.doy)}function _h(e,t,n,i,s){var r;return e==null?ls(this,i,s).year:(r=Zt(e,i,s),t>r&&(t=r),Ew.call(this,e,t,n,i,s))}function Ew(e,t,n,i,s){var r=Zd(e,t,n,i,s),o=os(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}W("Q",0,"Qo","quarter");P("Q",Wd);me("Q",function(e,t){t[Bt]=(ne(e)-1)*3});function Iw(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}W("D",["DD",2],"Do","date");P("D",Se,xi);P("DD",Se,ft);P("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});me(["D","DD"],Ft);me("Do",function(e,t){t[Ft]=ne(e.match(Se)[0])});var yh=Ti("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear");P("DDD",Er);P("DDDD",Yd);me(["DDD","DDDD"],function(e,t,n){n._dayOfYear=ne(e)});function Rw(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}W("m",["mm",2],0,"minute");P("m",Se,Vl);P("mm",Se,ft);me(["m","mm"],Tt);var Mw=Ti("Minutes",!1);W("s",["ss",2],0,"second");P("s",Se,Vl);P("ss",Se,ft);me(["s","ss"],$t);var Dw=Ti("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)});W(0,["SS",2],0,function(){return~~(this.millisecond()/10)});W(0,["SSS",3],0,"millisecond");W(0,["SSSS",4],0,function(){return this.millisecond()*10});W(0,["SSSSS",5],0,function(){return this.millisecond()*100});W(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});W(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});W(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});W(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});P("S",Er,Wd);P("SS",Er,ft);P("SSS",Er,Yd);var fn,wh;for(fn="SSSS";fn.length<=9;fn+="S")P(fn,Ci);function Pw(e,t){t[En]=ne(("0."+e)*1e3)}for(fn="S";fn.length<=9;fn+="S")me(fn,Pw);wh=Ti("Milliseconds",!1);W("z",0,0,"zoneAbbr");W("zz",0,0,"zoneName");function Nw(){return this._isUTC?"UTC":""}function Ow(){return this._isUTC?"Coordinated Universal Time":""}var k=vs.prototype;k.add=T0;k.calendar=N0;k.clone=O0;k.diff=Y0;k.endOf=Z0;k.format=B0;k.from=$0;k.fromNow=j0;k.to=G0;k.toNow=Q0;k.get=U_;k.invalidAt=ow;k.isAfter=A0;k.isBefore=L0;k.isBetween=F0;k.isSame=q0;k.isSameOrAfter=V0;k.isSameOrBefore=W0;k.isValid=sw;k.lang=fh;k.locale=hh;k.localeData=mh;k.max=s0;k.min=i0;k.parsingFlags=rw;k.set=B_;k.startOf=K0;k.subtract=E0;k.toArray=tw;k.toObject=nw;k.toDate=ew;k.toISOString=z0;k.inspect=U0;typeof Symbol<"u"&&Symbol.for!=null&&(k[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});k.toJSON=iw;k.toString=H0;k.unix=J0;k.valueOf=X0;k.creationData=lw;k.eraName=dw;k.eraNarrow=hw;k.eraAbbr=fw;k.eraYear=mw;k.year=Ud;k.isLeapYear=z_;k.weekYear=bw;k.isoWeekYear=kw;k.quarter=k.quarters=Iw;k.month=Qd;k.daysInMonth=ey;k.week=k.weeks=ay;k.isoWeek=k.isoWeeks=uy;k.weeksInYear=xw;k.weeksInWeekYear=Tw;k.isoWeeksInYear=Sw;k.isoWeeksInISOWeekYear=Cw;k.date=yh;k.day=k.days=ky;k.weekday=Sy;k.isoWeekday=Cy;k.dayOfYear=Rw;k.hour=k.hours=Dy;k.minute=k.minutes=Mw;k.second=k.seconds=Dw;k.millisecond=k.milliseconds=wh;k.utcOffset=f0;k.utc=p0;k.local=g0;k.parseZone=v0;k.hasAlignedHourOffset=_0;k.isDST=y0;k.isLocal=b0;k.isUtcOffset=k0;k.isUtc=ah;k.isUTC=ah;k.zoneAbbr=Nw;k.zoneName=Ow;k.dates=_t("dates accessor is deprecated. Use date instead.",yh);k.months=_t("months accessor is deprecated. Use month instead",Qd);k.years=_t("years accessor is deprecated. Use year instead",Ud);k.zone=_t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",m0);k.isDSTShifted=_t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",w0);function Aw(e){return ke(e*1e3)}function Lw(){return ke.apply(null,arguments).parseZone()}function bh(e){return e}var ae=Ol.prototype;ae.calendar=b_;ae.longDateFormat=x_;ae.invalidDate=E_;ae.ordinal=M_;ae.preparse=bh;ae.postformat=bh;ae.relativeTime=P_;ae.pastFuture=N_;ae.set=y_;ae.eras=aw;ae.erasParse=uw;ae.erasConvertYear=cw;ae.erasAbbrRegex=gw;ae.erasNameRegex=pw;ae.erasNarrowRegex=vw;ae.months=K_;ae.monthsShort=Z_;ae.monthsParse=J_;ae.monthsRegex=ny;ae.monthsShortRegex=ty;ae.week=sy;ae.firstDayOfYear=ly;ae.firstDayOfWeek=oy;ae.weekdays=vy;ae.weekdaysMin=yy;ae.weekdaysShort=_y;ae.weekdaysParse=by;ae.weekdaysRegex=xy;ae.weekdaysShortRegex=Ty;ae.weekdaysMinRegex=Ey;ae.isPM=Ry;ae.meridiem=Py;function cr(e,t,n,i){var s=nn(),r=Vt().set(i,t);return s[n](r,e)}function kh(e,t,n){if(en(e)&&(t=e,e=void 0),e=e||"",t!=null)return cr(e,t,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=cr(e,i,n,"month");return s}function Xl(e,t,n,i){typeof e=="boolean"?(en(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,en(t)&&(n=t,t=void 0),t=t||"");var s=nn(),r=e?s._week.dow:0,o,l=[];if(n!=null)return cr(t,(n+r)%7,i,"day");for(o=0;o<7;o++)l[o]=cr(t,(o+r)%7,i,"day");return l}function Fw(e,t){return kh(e,t,"months")}function qw(e,t){return kh(e,t,"monthsShort")}function Vw(e,t,n){return Xl(e,t,n,"weekdays")}function Ww(e,t,n){return Xl(e,t,n,"weekdaysShort")}function Yw(e,t,n){return Xl(e,t,n,"weekdaysMin")}pn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=ne(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});R.lang=_t("moment.lang is deprecated. Use moment.locale instead.",pn);R.langData=_t("moment.langData is deprecated. Use moment.localeData instead.",nn);var Ht=Math.abs;function Hw(){var e=this._data;return this._milliseconds=Ht(this._milliseconds),this._days=Ht(this._days),this._months=Ht(this._months),e.milliseconds=Ht(e.milliseconds),e.seconds=Ht(e.seconds),e.minutes=Ht(e.minutes),e.hours=Ht(e.hours),e.months=Ht(e.months),e.years=Ht(e.years),this}function Sh(e,t,n,i){var s=Dt(t,n);return e._milliseconds+=i*s._milliseconds,e._days+=i*s._days,e._months+=i*s._months,e._bubble()}function zw(e,t){return Sh(this,e,t,1)}function Uw(e,t){return Sh(this,e,t,-1)}function Lu(e){return e<0?Math.floor(e):Math.ceil(e)}function Bw(){var e=this._milliseconds,t=this._days,n=this._months,i=this._data,s,r,o,l,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Lu(Lo(n)+t)*864e5,t=0,n=0),i.milliseconds=e%1e3,s=vt(e/1e3),i.seconds=s%60,r=vt(s/60),i.minutes=r%60,o=vt(r/60),i.hours=o%24,t+=vt(o/24),a=vt(Ch(t)),n+=a,t-=Lu(Lo(a)),l=vt(n/12),n%=12,i.days=t,i.months=n,i.years=l,this}function Ch(e){return e*4800/146097}function Lo(e){return e*146097/4800}function $w(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if(e=yt(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+i/864e5,n=this._months+Ch(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Lo(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}function sn(e){return function(){return this.as(e)}}var xh=sn("ms"),jw=sn("s"),Gw=sn("m"),Qw=sn("h"),Kw=sn("d"),Zw=sn("w"),Xw=sn("M"),Jw=sn("Q"),eb=sn("y"),tb=xh;function nb(){return Dt(this)}function ib(e){return e=yt(e),this.isValid()?this[e+"s"]():NaN}function Wn(e){return function(){return this.isValid()?this._data[e]:NaN}}var sb=Wn("milliseconds"),rb=Wn("seconds"),ob=Wn("minutes"),lb=Wn("hours"),ab=Wn("days"),ub=Wn("months"),cb=Wn("years");function db(){return vt(this.days()/7)}var zt=Math.round,ii={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function hb(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}function fb(e,t,n,i){var s=Dt(e).abs(),r=zt(s.as("s")),o=zt(s.as("m")),l=zt(s.as("h")),a=zt(s.as("d")),u=zt(s.as("M")),c=zt(s.as("w")),d=zt(s.as("y")),h=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||l<=1&&["h"]||l<n.h&&["hh",l]||a<=1&&["d"]||a<n.d&&["dd",a];return n.w!=null&&(h=h||c<=1&&["w"]||c<n.w&&["ww",c]),h=h||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d],h[2]=t,h[3]=+e>0,h[4]=i,hb.apply(null,h)}function mb(e){return e===void 0?zt:typeof e=="function"?(zt=e,!0):!1}function pb(e,t){return ii[e]===void 0?!1:t===void 0?ii[e]:(ii[e]=t,e==="s"&&(ii.ss=t-1),!0)}function gb(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=ii,s,r;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(i=Object.assign({},ii,t),t.s!=null&&t.ss==null&&(i.ss=t.s-1)),s=this.localeData(),r=fb(this,!n,i,s),n&&(r=s.pastFuture(+this,r)),s.postformat(r)}var uo=Math.abs;function Jn(e){return(e>0)-(e<0)||+e}function Ar(){if(!this.isValid())return this.localeData().invalidDate();var e=uo(this._milliseconds)/1e3,t=uo(this._days),n=uo(this._months),i,s,r,o,l=this.asSeconds(),a,u,c,d;return l?(i=vt(e/60),s=vt(i/60),e%=60,i%=60,r=vt(n/12),n%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",u=Jn(this._months)!==Jn(l)?"-":"",c=Jn(this._days)!==Jn(l)?"-":"",d=Jn(this._milliseconds)!==Jn(l)?"-":"",a+"P"+(r?u+r+"Y":"")+(n?u+n+"M":"")+(t?c+t+"D":"")+(s||i||e?"T":"")+(s?d+s+"H":"")+(i?d+i+"M":"")+(e?d+o+"S":"")):"P0D"}var re=Nr.prototype;re.isValid=u0;re.abs=Hw;re.add=zw;re.subtract=Uw;re.as=$w;re.asMilliseconds=xh;re.asSeconds=jw;re.asMinutes=Gw;re.asHours=Qw;re.asDays=Kw;re.asWeeks=Zw;re.asMonths=Xw;re.asQuarters=Jw;re.asYears=eb;re.valueOf=tb;re._bubble=Bw;re.clone=nb;re.get=ib;re.milliseconds=sb;re.seconds=rb;re.minutes=ob;re.hours=lb;re.days=ab;re.weeks=db;re.months=ub;re.years=cb;re.humanize=gb;re.toISOString=Ar;re.toString=Ar;re.toJSON=Ar;re.locale=hh;re.localeData=mh;re.toIsoString=_t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ar);re.lang=fh;W("X",0,0,"unix");W("x",0,0,"valueOf");P("x",Rr);P("X",F_);me("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});me("x",function(e,t,n){n._d=new Date(ne(e))});//! moment.js
R.version="2.30.1";v_(ke);R.fn=k;R.min=r0;R.max=o0;R.now=l0;R.utc=Vt;R.unix=Aw;R.months=Fw;R.isDate=gs;R.locale=pn;R.invalid=xr;R.duration=Dt;R.isMoment=Mt;R.weekdays=Vw;R.parseZone=Lw;R.localeData=nn;R.isDuration=As;R.monthsShort=qw;R.weekdaysMin=Yw;R.defineLocale=Ul;R.updateLocale=Ly;R.locales=Fy;R.weekdaysShort=Ww;R.normalizeUnits=yt;R.relativeTimeRounding=mb;R.relativeTimeThreshold=pb;R.calendarFormat=P0;R.prototype=k;R.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Jl(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Yn=Jl();function Th(e){Yn=e}var Ki={exec:()=>null};function he(e,t=""){let n=typeof e=="string"?e:e.source,i={replace:(s,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(it.caret,"$1"),n=n.replace(s,o),i},getRegex:()=>new RegExp(n,t)};return i}var it={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},vb=/^(?:[ \t]*(?:\n|$))+/,_b=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,yb=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ws=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,wb=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ea=/(?:[*+-]|\d{1,9}[.)])/,Eh=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ih=he(Eh).replace(/bull/g,ea).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),bb=he(Eh).replace(/bull/g,ea).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ta=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,kb=/^[^\n]+/,na=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Sb=he(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",na).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Cb=he(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ea).getRegex(),Lr="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ia=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,xb=he("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ia).replace("tag",Lr).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Rh=he(ta).replace("hr",ws).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lr).getRegex(),Tb=he(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Rh).getRegex(),sa={blockquote:Tb,code:_b,def:Sb,fences:yb,heading:wb,hr:ws,html:xb,lheading:Ih,list:Cb,newline:vb,paragraph:Rh,table:Ki,text:kb},Fu=he("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ws).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lr).getRegex(),Eb={...sa,lheading:bb,table:Fu,paragraph:he(ta).replace("hr",ws).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Fu).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lr).getRegex()},Ib={...sa,html:he(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ia).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ki,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:he(ta).replace("hr",ws).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ih).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Rb=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Mb=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Mh=/^( {2,}|\\)\n(?!\s*$)/,Db=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Fr=/[\p{P}\p{S}]/u,ra=/[\s\p{P}\p{S}]/u,Dh=/[^\s\p{P}\p{S}]/u,Pb=he(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ra).getRegex(),Ph=/(?!~)[\p{P}\p{S}]/u,Nb=/(?!~)[\s\p{P}\p{S}]/u,Ob=/(?:[^\s\p{P}\p{S}]|~)/u,Ab=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Nh=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Lb=he(Nh,"u").replace(/punct/g,Fr).getRegex(),Fb=he(Nh,"u").replace(/punct/g,Ph).getRegex(),Oh="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",qb=he(Oh,"gu").replace(/notPunctSpace/g,Dh).replace(/punctSpace/g,ra).replace(/punct/g,Fr).getRegex(),Vb=he(Oh,"gu").replace(/notPunctSpace/g,Ob).replace(/punctSpace/g,Nb).replace(/punct/g,Ph).getRegex(),Wb=he("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Dh).replace(/punctSpace/g,ra).replace(/punct/g,Fr).getRegex(),Yb=he(/\\(punct)/,"gu").replace(/punct/g,Fr).getRegex(),Hb=he(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),zb=he(ia).replace("(?:-->|$)","-->").getRegex(),Ub=he("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",zb).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dr=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Bb=he(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",dr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ah=he(/^!?\[(label)\]\[(ref)\]/).replace("label",dr).replace("ref",na).getRegex(),Lh=he(/^!?\[(ref)\](?:\[\])?/).replace("ref",na).getRegex(),$b=he("reflink|nolink(?!\\()","g").replace("reflink",Ah).replace("nolink",Lh).getRegex(),oa={_backpedal:Ki,anyPunctuation:Yb,autolink:Hb,blockSkip:Ab,br:Mh,code:Mb,del:Ki,emStrongLDelim:Lb,emStrongRDelimAst:qb,emStrongRDelimUnd:Wb,escape:Rb,link:Bb,nolink:Lh,punctuation:Pb,reflink:Ah,reflinkSearch:$b,tag:Ub,text:Db,url:Ki},jb={...oa,link:he(/^!?\[(label)\]\((.*?)\)/).replace("label",dr).getRegex(),reflink:he(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dr).getRegex()},Fo={...oa,emStrongRDelimAst:Vb,emStrongLDelim:Fb,url:he(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Gb={...Fo,br:he(Mh).replace("{2,}","*").getRegex(),text:he(Fo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ms={normal:sa,gfm:Eb,pedantic:Ib},qi={normal:oa,gfm:Fo,breaks:Gb,pedantic:jb},Qb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qu=e=>Qb[e];function At(e,t){if(t){if(it.escapeTest.test(e))return e.replace(it.escapeReplace,qu)}else if(it.escapeTestNoEncode.test(e))return e.replace(it.escapeReplaceNoEncode,qu);return e}function Vu(e){try{e=encodeURI(e).replace(it.percentDecode,"%")}catch{return null}return e}function Wu(e,t){let n=e.replace(it.findPipe,(r,o,l)=>{let a=!1,u=o;for(;--u>=0&&l[u]==="\\";)a=!a;return a?"|":" |"}),i=n.split(it.splitPipe),s=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(it.slashPipe,"|");return i}function Vi(e,t,n){let i=e.length;if(i===0)return"";let s=0;for(;s<i&&e.charAt(i-s-1)===t;)s++;return e.slice(0,i-s)}function Kb(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function Yu(e,t,n,i,s){let r=t.href,o=t.title||null,l=e[1].replace(s.other.outputLinkReplace,"$1");i.state.inLink=!0;let a={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:o,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,a}function Zb(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(i===null)return t;let s=i[1];return t.split(`
`).map(r=>{let o=r.match(n.other.beginningSpace);if(o===null)return r;let[l]=o;return l.length>=s.length?r.slice(s.length):r}).join(`
`)}var hr=class{options;rules;lexer;constructor(e){this.options=e||Yn}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Vi(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=Zb(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let i=Vi(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Vi(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Vi(t[0],`
`).split(`
`),i="",s="",r=[];for(;n.length>0;){let o=!1,l=[],a;for(a=0;a<n.length;a++)if(this.rules.other.blockquoteStart.test(n[a]))l.push(n[a]),o=!0;else if(!o)l.push(n[a]);else break;n=n.slice(a);let u=l.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,s=s?`${s}
${c}`:c;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,r,!0),this.lexer.state.top=d,n.length===0)break;let h=r.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let m=h,p=m.raw+`
`+n.join(`
`),y=this.blockquote(p);r[r.length-1]=y,i=i.substring(0,i.length-m.raw.length)+y.raw,s=s.substring(0,s.length-m.text.length)+y.text;break}else if(h?.type==="list"){let m=h,p=m.raw+`
`+n.join(`
`),y=this.list(p);r[r.length-1]=y,i=i.substring(0,i.length-h.raw.length)+y.raw,s=s.substring(0,s.length-m.raw.length)+y.raw,n=p.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),i=n.length>1,s={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let r=this.rules.other.listItemRegex(n),o=!1;for(;e;){let a=!1,u="",c="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,Y=>" ".repeat(3*Y.length)),h=e.split(`
`,1)[0],m=!d.trim(),p=0;if(this.options.pedantic?(p=2,c=d.trimStart()):m?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,c=d.slice(p),p+=t[1].length),m&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,e=e.substring(h.length+1),a=!0),!a){let Y=this.rules.other.nextBulletRegex(p),N=this.rules.other.hrRegex(p),_=this.rules.other.fencesBeginRegex(p),b=this.rules.other.headingBeginRegex(p),V=this.rules.other.htmlBeginRegex(p);for(;e;){let B=e.split(`
`,1)[0],$;if(h=B,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),$=h):$=h.replace(this.rules.other.tabCharGlobal,"    "),_.test(h)||b.test(h)||V.test(h)||Y.test(h)||N.test(h))break;if($.search(this.rules.other.nonSpaceChar)>=p||!h.trim())c+=`
`+$.slice(p);else{if(m||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||_.test(d)||b.test(d)||N.test(d))break;c+=`
`+h}!m&&!h.trim()&&(m=!0),u+=B+`
`,e=e.substring(B.length+1),d=$.slice(p)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let y=null,w;this.options.gfm&&(y=this.rules.other.listIsTask.exec(c),y&&(w=y[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!y,checked:w,loose:!1,text:c,tokens:[]}),s.raw+=u}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){let u=s.items[a].tokens.filter(d=>d.type==="space"),c=u.length>0&&u.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=c}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=Wu(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?r.align.push("right"):this.rules.other.tableAlignCenter.test(o)?r.align.push("center"):this.rules.other.tableAlignLeft.test(o)?r.align.push("left"):r.align.push(null);for(let o=0;o<n.length;o++)r.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:r.align[o]});for(let o of s)r.rows.push(Wu(o,r.header.length).map((l,a)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[a]})));return r}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let r=Vi(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{let r=Kb(t[2],"()");if(r===-2)return;if(r>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],s=r[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),Yu(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[i.toLowerCase()];if(!s){let r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return Yu(n,s,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let s=[...i[0]].length-1,r,o,l=s,a=0,u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);(i=u.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(o=[...r].length,i[3]||i[4]){l+=o;continue}else if((i[5]||i[6])&&s%3&&!((s+o)%3)){a+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+a);let c=[...i[0]][0].length,d=e.slice(0,s+i.index+c+o);if(Math.min(s,o)%2){let m=d.slice(1,-1);return{type:"em",raw:d,text:m,tokens:this.lexer.inlineTokens(m)}}let h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=t[0],i="mailto:"+n;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);n=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},jt=class qo{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Yn,this.options.tokenizer=this.options.tokenizer||new hr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:it,block:Ms.normal,inline:qi.normal};this.options.pedantic?(n.block=Ms.pedantic,n.inline=qi.pedantic):this.options.gfm&&(n.block=Ms.gfm,this.options.breaks?n.inline=qi.breaks:n.inline=qi.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ms,inline:qi}}static lex(t,n){return new qo(n).lex(t)}static lexInline(t,n){return new qo(n).inlineTokens(t)}lex(t){t=t.replace(it.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){for(this.options.pedantic&&(t=t.replace(it.tabCharGlobal,"    ").replace(it.spaceLine,""));t;){let s;if(this.options.extensions?.block?.some(o=>(s=o.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let o=n.at(-1);s.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.at(-1).src=o.text):n.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},n.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),n.push(s);continue}let r=t;if(this.options.extensions?.startBlock){let o=1/0,l=t.slice(1),a;this.options.extensions.startBlock.forEach(u=>{a=u.call({lexer:this},l),typeof a=="number"&&a>=0&&(o=Math.min(o,a))}),o<1/0&&o>=0&&(r=t.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){let o=n.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(s),i=r.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(s);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i=t,s=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,s.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,o="";for(;t;){r||(o=""),r=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let u=n.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,i,o)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let a=t;if(this.options.extensions?.startInline){let u=1/0,c=t.slice(1),d;this.options.extensions.startInline.forEach(h=>{d=h.call({lexer:this},c),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(a=t.substring(0,u+1))}if(l=this.tokenizer.inlineText(a)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),r=!0;let u=n.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},fr=class{options;parser;constructor(e){this.options=e||Yn}space(e){return""}code({text:e,lang:t,escaped:n}){let i=(t||"").match(it.notSpaceStart)?.[0],s=e.replace(it.endingNewline,"")+`
`;return i?'<pre><code class="language-'+At(i)+'">'+(n?s:At(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:At(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,i="";for(let o=0;o<e.items.length;o++){let l=e.items[o];i+=this.listitem(l)}let s=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+s+r+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+At(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let s=0;s<e.header.length;s++)n+=this.tablecell(e.header[s]);t+=this.tablerow({text:n});let i="";for(let s=0;s<e.rows.length;s++){let r=e.rows[s];n="";for(let o=0;o<r.length;o++)n+=this.tablecell(r[o]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${At(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),s=Vu(e);if(s===null)return i;e=s;let r='<a href="'+e+'"';return t&&(r+=' title="'+At(t)+'"'),r+=">"+i+"</a>",r}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let s=Vu(e);if(s===null)return At(n);e=s;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${At(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:At(e.text)}},la=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Gt=class Vo{options;renderer;textRenderer;constructor(t){this.options=t||Yn,this.options.renderer=this.options.renderer||new fr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new la}static parse(t,n){return new Vo(n).parse(t)}static parseInline(t,n){return new Vo(n).parseInline(t)}parse(t,n=!0){let i="";for(let s=0;s<t.length;s++){let r=t[s];if(this.options.extensions?.renderers?.[r.type]){let l=r,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){i+=a||"";continue}}let o=r;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"def":{i+=this.renderer.def(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let l=o,a=this.renderer.text(l);for(;s+1<t.length&&t[s+1].type==="text";)l=t[++s],a+=`
`+this.renderer.text(l);n?i+=this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):i+=a;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}parseInline(t,n=this.renderer){let i="";for(let s=0;s<t.length;s++){let r=t[s];if(this.options.extensions?.renderers?.[r.type]){let l=this.options.extensions.renderers[r.type].call({parser:this},r);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=l||"";continue}}let o=r;switch(o.type){case"escape":{i+=n.text(o);break}case"html":{i+=n.html(o);break}case"link":{i+=n.link(o);break}case"image":{i+=n.image(o);break}case"strong":{i+=n.strong(o);break}case"em":{i+=n.em(o);break}case"codespan":{i+=n.codespan(o);break}case"br":{i+=n.br(o);break}case"del":{i+=n.del(o);break}case"text":{i+=n.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},co,Fs=(co=class{options;block;constructor(e){this.options=e||Yn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?jt.lex:jt.lexInline}provideParser(){return this.block?Gt.parse:Gt.parseInline}},ya(co,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),co),Xb=class{defaults=Jl();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Gt;Renderer=fr;TextRenderer=la;Lexer=jt;Tokenizer=hr;Hooks=Fs;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let r of s.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of s.rows)for(let o of r)n=n.concat(this.walkTokens(o.tokens,t));break}case"list":{let s=i;n=n.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(r=>{let o=s[r].flat(1/0);n=n.concat(this.walkTokens(o,t))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let r=t.renderers[s.name];r?t.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=r.apply(this,o)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=t[s.level];r?r.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),n.renderer){let s=this.defaults.renderer||new fr(this.defaults);for(let r in n.renderer){if(!(r in s))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let o=r,l=n.renderer[o],a=s[o];s[o]=(...u)=>{let c=l.apply(s,u);return c===!1&&(c=a.apply(s,u)),c||""}}i.renderer=s}if(n.tokenizer){let s=this.defaults.tokenizer||new hr(this.defaults);for(let r in n.tokenizer){if(!(r in s))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let o=r,l=n.tokenizer[o],a=s[o];s[o]=(...u)=>{let c=l.apply(s,u);return c===!1&&(c=a.apply(s,u)),c}}i.tokenizer=s}if(n.hooks){let s=this.defaults.hooks||new Fs;for(let r in n.hooks){if(!(r in s))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let o=r,l=n.hooks[o],a=s[o];Fs.passThroughHooks.has(r)?s[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(d=>a.call(s,d));let c=l.call(s,u);return a.call(s,c)}:s[o]=(...u)=>{let c=l.apply(s,u);return c===!1&&(c=a.apply(s,u)),c}}i.hooks=s}if(n.walkTokens){let s=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(o){let l=[];return l.push(r.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return jt.lex(e,t??this.defaults)}parser(e,t){return Gt.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i={...n},s={...this.defaults,...i},r=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let o=s.hooks?s.hooks.provideLexer():e?jt.lex:jt.lexInline,l=s.hooks?s.hooks.provideParser():e?Gt.parse:Gt.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(a=>o(a,s)).then(a=>s.hooks?s.hooks.processAllTokens(a):a).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>l(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(r);try{s.hooks&&(t=s.hooks.preprocess(t));let a=o(t,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let u=l(a,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(a){return r(a)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+At(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},Ln=new Xb;function fe(e,t){return Ln.parse(e,t)}fe.options=fe.setOptions=function(e){return Ln.setOptions(e),fe.defaults=Ln.defaults,Th(fe.defaults),fe};fe.getDefaults=Jl;fe.defaults=Yn;fe.use=function(...e){return Ln.use(...e),fe.defaults=Ln.defaults,Th(fe.defaults),fe};fe.walkTokens=function(e,t){return Ln.walkTokens(e,t)};fe.parseInline=Ln.parseInline;fe.Parser=Gt;fe.parser=Gt.parse;fe.Renderer=fr;fe.TextRenderer=la;fe.Lexer=jt;fe.lexer=jt.lex;fe.Tokenizer=hr;fe.Hooks=Fs;fe.parse=fe;fe.options;fe.setOptions;fe.use;fe.walkTokens;fe.parseInline;Gt.parse;jt.lex;const cn=m_(),Jb=new Qf("AIzaSyB9xd60S19iYc1gB6CDDb0VRrOgyf0qDz4"),ek=Jb.getGenerativeModel({model:"gemini-1.5-flash"}),tk={data(){return{dialog:!1,dialogRanDom:!1,loading:!1,nuoc:"all",searchAI:"",resultAI:"",desert:{thuc:!1,nguy:!1,ngo:!1,quan:!1},userId:"",tab:"users",moneyUpdate:0,listUser:[],messages:{},userWin:[],userLost:[],optionUsers:[],amount:1e4,cards:[],cardsOrigin:[],nameCard:"",randomQL:[]}},computed:{},watch:{},methods:{async getAiRes(){this.loading=!0;const e=JSON.stringify(this.cardsOrigin,null,2),t=await ek.generateContent([{text:`Ti c tp d liu JSON:${e}`},{text:" Vi cc key name: nuoc = nc, key = tn tng, win = s ln thng."},{text:"Da vo thng tin ca JSON hy t tnh ton v a ra cu tr li."},{text:`Cu hi: "${this.searchAI}"`}]);this.resultAI=fe(t.response.text()),this.loading=!1,this.dialog=!0},updateMoney(e,t,n){t=JSON.parse(JSON.stringify(t)),t.money=n||0,Ai(un(cn,"users/"+e),t)},addUser(){this.userId&&(Ai(un(cn,"users/"+this.userId),{ttl:0,tltsl:0,tltt:0,svtg:0}),this.userId="",this.$q.notify({type:"positive",message:"Thnh cng ri!",timeout:500}))},updateUser(){if(this.isValidate()){this.$q.notify({avatar:"https://creatorset.com/cdn/shop/files/Screenshot_2024-04-24_173231.png?v=1713973029",message:"Ngu",caption:"B chn ri haha",color:"green",timeout:1e3}),this.speak("My b ngu h? bm li ");return}this.userWin.forEach(e=>{let t=this.listUser[e];this.userWin.length===1?this.update(e,t,"tltsl",!1,this.userLost.length*10):(console.log("da vao day",this.userLost.length/this.userWin.length*10),this.update(e,t,"tltt",!1,this.userLost.length/this.userWin.length*10))}),this.userLost.forEach(e=>{this.update(e,this.listUser[e],"svtg",!1)}),this.userWin=[],this.userLost=[]},isValidate(){return this.userLost.length===0||this.userWin.length===0||this.userWin.length>(this.userWin.length+this.userLost.length)/2?!0:this.userWin.some(e=>this.userLost.includes(e))},update(e,t,n,i,s){let r={avatar:t.avatar||"",base:t.base||0,ttl:t.ttl,tltsl:t.tltsl,tltt:t.tltt,svtg:t.svtg,money:parseFloat(t.money||0)+parseFloat(s||0),updated:new Date().getTime(),boom:t.boom||0};i?(r[n]--,n!=="svtg"&&n!=="boom"&&(r.ttl--,r.svtg--)):(r[n]++,n!=="svtg"&&n!=="boom"&&(r.ttl++,r.svtg++)),Ai(un(cn,"users/"+e),r),n==="svtg"&&this.$q.notify({avatar:"https://creatorset.com/cdn/shop/files/Screenshot_2024-04-24_173231.png?v=1713973029",message:"G!!!!!!!!!!",caption:"Hahaha.......",color:"green",timeout:1e3})},getData(){ro(un(cn,"/users"),e=>{const t=Object.fromEntries(Object.entries(e.val()).sort(([,i],[,s])=>s.ttl-i.ttl));this.listUser=t;let n=[];Object.keys(t).forEach(i=>{n.push({id:i,avatar:t[i].avatar})}),this.optionUsers=n}),ro(un(cn,"/messages"),e=>{this.messages=e.val()})},percentageFormatter(e,t){let n=(e||0)/(t||0)*100||0;return new Intl.NumberFormat("default",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(n/100)},speak(e){const t=new SpeechSynthesisUtterance(e);t.lang="vi-VN",t.pitch=1,t.rate=1,t.volume=1,speechSynthesis.speak(t)},getLastUpdate(e){return e?R(e).calendar():""},formatNumber(e){return new Intl.NumberFormat("en-US").format(e)},addCard(e){if(this.nameCard){if(this.nuoc==="all"){this.$q.notify({type:"negative",message:"Chn nc i bn i!!!",timeout:500});return}Ai(un(cn,"cards/"+this.nameCard),{win:e||0,lost:0,nuoc:this.nuoc}),this.nameCard="",this.$q.notify({type:"positive",message:"Gii qu !!!",timeout:500})}},updateCard(e,t,n,i){t=JSON.parse(JSON.stringify(t)),delete t.key,t.updated=new Date().getTime(),i?t[n]--:t[n]++,Ai(un(cn,"cards/"+e),t),this.$q.notify({type:"positive",message:"Gii qu !!!",timeout:500})},searchCard(){let e=JSON.parse(JSON.stringify(this.cardsOrigin));if(this.nameCard&&this.nuoc!=="all"){const t=this.nameCard.toLowerCase(),n=this.nuoc.toLowerCase();this.cards=e.filter(i=>i.key.toLowerCase().includes(t)&&i.nuoc.toLowerCase().includes(n));return}if(this.nameCard){const t=this.nameCard.toLowerCase();this.cards=e.filter(n=>n.key.toLowerCase().includes(t));return}if(this.nuoc&&this.nuoc!=="all"){const t=this.nuoc.toLowerCase();this.cards=e.filter(n=>n.nuoc.toLowerCase().includes(t));return}this.cards=e},getCards(){ro(un(cn,"/cards"),e=>{const t=e.val();let n=[];Object.keys(t).forEach(i=>{t[i].key=i,t[i].nuoc==="Ngu"&&(t[i].nuoc="Ngy"),n.push(t[i])}),this.cards=n.sort((i,s)=>s.win-i.win),this.cardsOrigin=n.sort((i,s)=>s.win-i.win),this.searchCard()})},random(){let e=["Rt 1 a 2","T mt mu","K dc dng bi, v hiu ho phi to nh k","Chng tng, k dc hi mu","Gy im st thng","1 trn tay 1 trong vng trang b"];const t=Math.floor(Math.random()*e.length);let n;do n=Math.floor(Math.random()*e.length);while(n===t);this.randomQL=[e[t],e[n]],this.dialogRanDom=!0}},created(){},mounted(){this.getData()}},nk={class:"row q-mb-sm"},ik={class:"col-2 q-pl-sm row"},sk={class:"row q-mb-sm"},rk=["src"],ok={class:"row col-12 q-mt-sm"},lk=["src"],ak={class:"col-2 q-pl-sm row"},uk={class:"col-12 q-pl-sm row"},ck={class:"row justify-between items-center"},dk={class:"col-12 row"},hk={class:"text-bold"},fk={style:{"font-size":"10px"}},mk={class:"col-12 row"},pk={class:"col-4 q-pl-md text-bold"},gk={class:"col-12 row justify-between items-center"},vk={class:"col-4 q-pl-md"},_k={class:"col-12 row justify-between items-center"},yk={class:"col-6 q-pl-md"},wk={class:"col-12 row justify-between items-center"},bk={class:"col-4 q-pl-md"},kk={class:"col-4 row justify-end"},Sk={class:"col-12 row justify-between items-center"},Ck={class:"col-4 q-pl-md"},xk={class:"col-4 row justify-end"},Tk={class:"col-12 row justify-between items-center"},Ek={class:"col-4 q-pl-md"},Ik={class:"col-4 row justify-end"},Rk={class:"col-12 row justify-between items-center text-bold"},Mk={class:"col-4 row items-center"},Dk={class:"col-4 q-pl-md"},Pk={class:"col-4 row justify-end"},Nk={class:"row q-mb-sm"},Ok={class:"col-2 q-pl-sm row"},Ak={class:""},Lk={class:"row q-mb-sm"},Fk={class:"col-2 row"},qk={class:"q-pa-sm"},Vk={class:"row justify-between items-center"},Wk={class:"col-12 row"},Yk={class:"text-bold"},Hk={style:{"font-size":"10px"}},zk={class:"col-12 row justify-between items-center"},Uk={class:"col-4 q-pl-md"},Bk={class:"col-4 row justify-end"},$k=["innerHTML"],jk={class:"column q-pa-md"};function Gk(e,t,n,i,s,r){return pt(),Kn(op,null,{default:Me(()=>[L(am,{modelValue:s.tab,"onUpdate:modelValue":t[1]||(t[1]=o=>s.tab=o),dense:"","mobile-arrows":"",class:"bg-green text-white shadow-2","active-color":"white","indicator-color":"white",align:"justify"},{default:Me(()=>[L(Ea,{name:"users",icon:"perm_identity"}),L(Ea,{name:"cards",icon:"flutter_dash",onClick:t[0]||(t[0]=o=>r.getCards())})]),_:1},8,["modelValue"]),L(rp,{modelValue:s.tab,"onUpdate:modelValue":t[23]||(t[23]=o=>s.tab=o),animated:""},{default:Me(()=>[L($a,{name:"users"},{default:Me(()=>[O("div",nk,[L(Ss,{outlined:"",modelValue:s.userId,"onUpdate:modelValue":t[2]||(t[2]=o=>s.userId=o),square:"",dense:"",label:"Tn ngi chi",class:"col-10"},null,8,["modelValue"]),L(an),O("div",ik,[L(Ae,{color:"green",icon:"add",square:"",dense:"",class:"col-12",onClick:t[3]||(t[3]=o=>r.addUser())})])]),O("div",sk,[L(Ya,{filled:"",modelValue:s.userWin,"onUpdate:modelValue":t[4]||(t[4]=o=>s.userWin=o),multiple:"",options:s.optionUsers,"option-value":"id","option-label":"id",class:"col-12",label:"You win","emit-value":"","map-options":""},{"selected-item":Me(o=>[L(fo,{removable:"",dense:"",onRemove:l=>o.removeAtIndex(o.index),tabindex:o.tabindex,color:"white","text-color":"secondary",class:"q-ma-none"},{default:Me(()=>[o.opt.avatar?(pt(),Kn(ks,{key:0,color:"secondary","text-color":"white"},{default:Me(()=>[O("img",{src:o.opt.avatar},null,8,rk)]),_:2},1024)):(pt(),Kn(ks,{key:1,color:"secondary","text-color":"white",icon:"perm_identity"})),bn(" "+Te(o.opt.id),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options"]),O("div",ok,[L(Ya,{filled:"",modelValue:s.userLost,"onUpdate:modelValue":t[5]||(t[5]=o=>s.userLost=o),multiple:"",options:s.optionUsers,"option-value":"id","option-label":"id",class:"col-10",label:"You lost","emit-value":"","map-options":""},{"selected-item":Me(o=>[L(fo,{removable:"",dense:"",onRemove:l=>o.removeAtIndex(o.index),tabindex:o.tabindex,color:"white","text-color":"secondary",class:"q-ma-none"},{default:Me(()=>[o.opt.avatar?(pt(),Kn(ks,{key:0,color:"secondary","text-color":"white"},{default:Me(()=>[O("img",{src:o.opt.avatar},null,8,lk)]),_:2},1024)):(pt(),Kn(ks,{key:1,color:"secondary","text-color":"white",icon:"perm_identity"})),bn(" "+Te(o.opt.id),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options"]),L(an),O("div",ak,[L(Ae,{color:"green",icon:"add",square:"",dense:"",class:"col-12",onClick:t[6]||(t[6]=o=>r.updateUser())})])])]),O("div",uk,[L(Wm,{position:"bottom-left",offset:[18,18],onClick:t[7]||(t[7]=o=>r.random())},{default:Me(()=>[L(Ae,{fab:"",icon:"add",color:"red"}),L(Fm,null,{default:Me(()=>t[26]||(t[26]=[bn("Chn qun lnh",-1)])),_:1,__:[26]})]),_:1})]),(pt(!0),Zn(Hr,null,zr(s.listUser,(o,l,a)=>(pt(),Zn("div",{key:l,class:"q-pa-sm"},[O("div",ck,[O("div",dk,[O("div",hk,[bn(" Top "+Te(a+1)+" - "+Te(l)+" ",1),a===0?(pt(),Kn(Hm,{key:0,align:"top",color:"green"},{default:Me(()=>[L(Et,{name:"emoji_events"})]),_:1})):Uf("",!0)]),L(an),O("div",fk,Te(r.getLastUpdate(o.updated||0)||""),1)]),O("div",mk,[t[27]||(t[27]=O("div",{class:"col-4"},"Tng im",-1)),O("div",pk,[bn(Te(r.formatNumber(o.money||0))+" ",1),L(zm,{modelValue:o.money,"onUpdate:modelValue":u=>o.money=u},{default:Me(u=>[L(Ss,{autofocus:"",outlined:"",dense:"",modelValue:u.value,"onUpdate:modelValue":c=>u.value=c,"model-value":u.value},{after:Me(()=>[L(Ae,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:Ca(u.cancel,["stop","prevent"])},null,8,["onClick"]),Ds(L(Ae,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:Ca(c=>r.updateMoney(l,o,u.value),["stop","prevent"])},null,8,["onClick"]),[[Zr]])]),_:2},1032,["modelValue","onUpdate:modelValue","model-value"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t[28]||(t[28]=O("div",{class:"col-4 row justify-end"},[O("div",{style:{"font-size":"8px"}}," Tnh t ngy 13/07/2025 ")],-1))]),O("div",gk,[t[29]||(t[29]=O("div",{class:"col-4"},"Tham gia",-1)),O("div",vk,Te(o.svtg||0),1),t[30]||(t[30]=O("div",{class:"col-4 row justify-end"},null,-1))]),O("div",_k,[t[31]||(t[31]=O("div",{class:"col-4"},"T l thng",-1)),O("div",yk,Te(o.ttl||0)+" / "+Te(o.svtg||0)+" ("+Te(r.percentageFormatter(o.ttl,o.svtg))+")",1),t[32]||(t[32]=O("div",{class:"col-2 row justify-end"},null,-1))]),O("div",wk,[t[33]||(t[33]=O("div",{class:"col-4"},"T l thua",-1)),O("div",bk,Te((o.svtg||0)-(o.ttl||0))+" / "+Te(o.svtg||0),1),O("div",kk,[L(Ae,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"svtg")},null,8,["onClick"]),L(Ae,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"svtg",!0)},null,8,["onClick"])])]),O("div",Sk,[t[34]||(t[34]=O("div",{class:"col-4"},"T l thng solo",-1)),O("div",Ck,Te(o.tltsl||0)+" / "+Te(o.svtg||0),1),O("div",xk,[L(Ae,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"tltsl")},null,8,["onClick"]),L(Ae,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"tltsl",!0)},null,8,["onClick"])])]),O("div",Tk,[t[35]||(t[35]=O("div",{class:"col-4"}," T l thng team",-1)),O("div",Ek,Te(o.tltt||0)+" / "+Te(o.svtg||0),1),O("div",Ik,[L(Ae,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"tltt")},null,8,["onClick"]),L(Ae,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"tltt",!0)},null,8,["onClick"])])]),O("div",Rk,[O("div",Mk,[L(Et,{name:"rocket"}),t[36]||(t[36]=bn(" BOOM ",-1))]),O("div",Dk,Te(o.boom||0),1),O("div",Pk,[L(Ae,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"boom")},null,8,["onClick"]),L(Ae,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"boom",!0)},null,8,["onClick"])])])]),L(Ha,{class:"q-mt-md"})]))),128))]),_:1}),L($a,{name:"cards"},{default:Me(()=>[O("div",Nk,[L(Ss,{outlined:"",modelValue:s.nameCard,"onUpdate:modelValue":[t[8]||(t[8]=o=>s.nameCard=o),t[9]||(t[9]=o=>r.searchCard())],debounce:"1000",square:"",dense:"",label:"Tm tn tng",class:"col-10",clearable:""},null,8,["modelValue"]),L(an),O("div",Ok,[L(Ae,{color:"green",icon:"add",square:"",dense:"",class:"col-12",onClick:t[10]||(t[10]=o=>r.addCard(1))})])]),O("div",Ak,[L(Mi,{modelValue:s.nuoc,"onUpdate:modelValue":t[11]||(t[11]=o=>s.nuoc=o),onClick:t[12]||(t[12]=o=>r.searchCard()),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"all",label:"All"},null,8,["modelValue"]),L(Mi,{modelValue:s.nuoc,"onUpdate:modelValue":t[13]||(t[13]=o=>s.nuoc=o),onClick:t[14]||(t[14]=o=>r.searchCard()),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Thc",label:"Thc"},null,8,["modelValue"]),L(Mi,{modelValue:s.nuoc,"onUpdate:modelValue":t[15]||(t[15]=o=>s.nuoc=o),onClick:t[16]||(t[16]=o=>r.searchCard()),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Ngy",label:"Ngy"},null,8,["modelValue"]),L(Mi,{modelValue:s.nuoc,"onUpdate:modelValue":t[17]||(t[17]=o=>s.nuoc=o),onClick:t[18]||(t[18]=o=>r.searchCard()),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Ng",label:"Ng"},null,8,["modelValue"]),L(Mi,{modelValue:s.nuoc,"onUpdate:modelValue":t[19]||(t[19]=o=>s.nuoc=o),onClick:t[20]||(t[20]=o=>r.searchCard()),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Qun",label:"Qun"},null,8,["modelValue"])]),O("div",Lk,[L(Ss,{outlined:"",modelValue:s.searchAI,"onUpdate:modelValue":t[21]||(t[21]=o=>s.searchAI=o),autogrow:"",square:"",dense:"",label:"Hi g i?",class:"col-10",clearable:""},null,8,["modelValue"]),L(an),O("div",Fk,[L(Ae,{loading:s.loading,color:"green",icon:"search",onClick:t[22]||(t[22]=o=>r.getAiRes()),class:"col-12"},{loading:Me(()=>[L(sp,{class:"on-left"})]),_:1},8,["loading"])])]),O("div",qk,[t[37]||(t[37]=O("strong",null,"Tng s tng:",-1)),bn(" "+Te(s.cards.length),1)]),(pt(!0),Zn(Hr,null,zr(s.cards,(o,l)=>(pt(),Zn("div",{key:l,class:"q-pa-sm"},[O("div",Vk,[O("div",Wk,[O("div",Yk,Te(l+1)+" - "+Te(o.nuoc)+" | "+Te(o.key),1),L(an),O("div",Hk,Te(r.getLastUpdate(o.updated||0)||""),1)]),O("div",zk,[t[38]||(t[38]=O("div",{class:"col-4"},"WIN",-1)),O("div",Uk,Te(o.win),1),O("div",Bk,[L(Ae,{flat:"",icon:"add",size:"sm",onClick:a=>r.updateCard(o.key,o,"win",!1)},null,8,["onClick"]),L(Ae,{flat:"",icon:"remove",size:"sm",onClick:a=>r.updateCard(o.key,o,"win",!0)},null,8,["onClick"])])])]),L(Ha,{class:"q-mt-md"})]))),128))]),_:1})]),_:1},8,["modelValue"]),L(go,{modelValue:s.dialog,"onUpdate:modelValue":t[24]||(t[24]=o=>s.dialog=o),position:"bottom"},{default:Me(()=>[L(Ga,null,{default:Me(()=>[L(ja,{class:"row items-center q-pb-none"},{default:Me(()=>[t[39]||(t[39]=O("div",{class:"text-h6"},null,-1)),L(an),Ds(L(Ae,{icon:"close",flat:"",round:"",dense:""},null,512),[[Zr]])]),_:1,__:[39]}),O("div",{class:"q-pa-md",innerHTML:s.resultAI},null,8,$k)]),_:1})]),_:1},8,["modelValue"]),L(go,{modelValue:s.dialogRanDom,"onUpdate:modelValue":t[25]||(t[25]=o=>s.dialogRanDom=o),position:"bottom","full-width":""},{default:Me(()=>[L(Ga,null,{default:Me(()=>[L(ja,{class:"row items-center q-pb-none"},{default:Me(()=>[t[40]||(t[40]=O("div",{class:"text-h6"},"Qun lnh n",-1)),L(an),Ds(L(Ae,{icon:"close",flat:"",round:"",dense:""},null,512),[[Zr]])]),_:1,__:[40]}),O("div",jk,[(pt(!0),Zn(Hr,null,zr(s.randomQL,(o,l)=>(pt(),Zn("div",{key:l,class:"q-pa-sm"},[O("div",null,Te(o),1)]))),128))])]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Jk=tm(tk,[["render",Gk]]);export{Jk as default};
