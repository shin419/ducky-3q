import{i as Ds,e as Ht,z as pu,g as Pe,r as B,a as p,j as st,o as Nn,A as yu,R as wu,h as y,Q as vt,s as tr,B as di,C as Co,D as Ze,c as We,E as Ji,F as Ye,G as Su,w as he,H as ko,b as lt,p as vf,k as _f,I as bu,J as gf,K as Cu,L as nr,M as Ot,N as pf,T as qi,O as it,P as ln,S as ku,U as Tu,V as Eu,W as yf,X as wf,Y as Sf,Z as bf,_ as Cf,$ as Qn,a0 as Ts,f as Pt,a1 as kf,a2 as Es,q as Tf,a3 as Ef,a4 as xf,a5 as Mf,a6 as Zr,a7 as xu,a8 as zl,a9 as If,n as Mu,aa as Rf,ab as jn,ac as Df,ad as nt,ae as Iu,af as Mr,ag as Nf,ah as Pf,ai as Of,aj as $l,l as Af,d as Ff,ak as es,al as To,am as Lf,an as qf,ao as Vf,ap as Eo,aq as ir,ar as D,as as Yf,at as Wf,au as Hf,av as Ru,aw as Uf,ax as Bf,ay as oi,az as Xt,aA as Ns,aB as je,aC as zf,aD as $f,aE as jf,aF as Gf,aG as ts,aH as xo,aI as Qf,aJ as Kf,aK as jl,aL as Zf,aM as Xf,aN as Jf,aO as eh,aP as Gl,aQ as Du,aR as th,aS as nh,aT as ih,aU as sh,aV as rh,t as Bn,u as Nt,v as rt,y as ae,aW as ne,aX as fs,aY as hs,aZ as ms,a_ as Le,a$ as Ql,b0 as Kl,b1 as oh,b2 as Zl}from"./index-BT-dyV1B.js";import{Q as lh,c as ah,s as uh,g as ch,b as dh,a as fh,h as hh,_ as mh}from"./_plugin-vue_export-helper-8DH80p_r.js";let Ir,vs=0;const Ke=new Array(256);for(let e=0;e<256;e++)Ke[e]=(e+256).toString(16).substring(1);const vh=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let i=t;i>0;i--)n.push(Math.floor(Math.random()*256));return n}})(),Xl=4096;function Xr(){(Ir===void 0||vs+16>Xl)&&(vs=0,Ir=vh(Xl));const e=Array.prototype.slice.call(Ir,vs,vs+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,Ke[e[0]]+Ke[e[1]]+Ke[e[2]]+Ke[e[3]]+"-"+Ke[e[4]]+Ke[e[5]]+"-"+Ke[e[6]]+Ke[e[7]]+"-"+Ke[e[8]]+Ke[e[9]]+"-"+Ke[e[10]]+Ke[e[11]]+Ke[e[12]]+Ke[e[13]]+Ke[e[14]]+Ke[e[15]]}let _h=0;const gh=["click","keydown"],ph={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${_h++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function yh(e,t,n,i){const s=Ds(pu,Ht);if(s===Ht)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ht;const{proxy:r}=Pe(),o=B(null),l=B(null),a=B(null),u=p(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),c=p(()=>s.currentModel.value===e.name),d=p(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),f=p(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),m=p(()=>e.disable===!0||s.hasFocus.value===!0||c.value===!1&&s.hasActiveTab.value===!0?-1:e.tabindex||0);function _(S,b){if(b!==!0&&S?.qAvoidFocus!==!0&&o.value?.focus(),e.disable!==!0){s.updateModel({name:e.name}),n("click",S);return}}function I(S){di(S,[13,32])?_(S,!0):Co(S)!==!0&&S.keyCode>=35&&S.keyCode<=40&&S.altKey!==!0&&S.metaKey!==!0&&s.onKbdNavigate(S.keyCode,r.$el)===!0&&Ze(S),n("keydown",S)}function w(){const S=s.tabProps.value.narrowIndicator,b=[],Q=y("div",{ref:a,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});e.icon!==void 0&&b.push(y(vt,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&b.push(y("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&b.push(e.alertIcon!==void 0?y(vt,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):y("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),S===!0&&b.push(Q);const F=[y("div",{class:"q-focus-helper",tabindex:-1,ref:o}),y("div",{class:f.value},tr(t.default,b))];return S===!1&&F.push(Q),F}const $={name:p(()=>e.name),rootRef:l,tabIndicatorRef:a,routeData:i};st(()=>{s.unregisterTab($)}),Nn(()=>{s.registerTab($)});function N(S,b){const Q={ref:l,class:d.value,tabindex:m.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:_,onKeydown:I,...b};return yu(y(S,Q,w()),[[wu,u.value]])}return{renderTab:N,$tabs:s}}const Jl=We({name:"QTab",props:ph,emits:gh,setup(e,{slots:t,emit:n}){const{renderTab:i}=yh(e,t,n);return()=>i("div")}});function Ri(){let e;const t=Pe();function n(){e=void 0}return Ji(n),st(n),{removeTick:n,registerTick(i){e=i,Ye(()=>{e===i&&(Su(t)===!1&&e(),e=void 0)})}}}function Vi(){let e=null;const t=Pe();function n(){e!==null&&(clearTimeout(e),e=null)}return Ji(n),st(n),{removeTimeout:n,registerTimeout(i,s){n(),Su(t)===!1&&(e=setTimeout(()=>{e=null,i()},s))}}}let Yi=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Yi=e.scrollLeft>=0,e.remove()}function wh(e,t,n){const i=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const Sh=["left","center","right","justify"],bh=We({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Sh.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:i}=Pe(),{$q:s}=i,{registerTick:r}=Ri(),{registerTick:o}=Ri(),{registerTick:l}=Ri(),{registerTimeout:a,removeTimeout:u}=Vi(),{registerTimeout:c,removeTimeout:d}=Vi(),f=B(null),m=B(null),_=B(e.modelValue),I=B(!1),w=B(!0),$=B(!1),N=B(!1),S=[],b=B(0),Q=B(!1);let F=null,j=null,K;const k=p(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:wh(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),T=p(()=>{const M=b.value,G=_.value;for(let se=0;se<M;se++)if(S[se].name.value===G)return!0;return!1}),H=p(()=>`q-tabs__content--align-${I.value===!0?"left":N.value===!0?"justify":e.align}`),C=p(()=>`q-tabs row no-wrap items-center q-tabs--${I.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ee=p(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+H.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),R=p(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),z=p(()=>e.vertical!==!0&&s.lang.rtl===!0),U=p(()=>Yi===!1&&z.value===!0);he(z,v),he(()=>e.modelValue,M=>{J({name:M,setCurrent:!0,skipEmit:!0})}),he(()=>e.outsideArrows,P);function J({name:M,setCurrent:G,skipEmit:se}){_.value!==M&&(se!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",M),(G===!0||e["onUpdate:modelValue"]===void 0)&&(re(_.value,M),_.value=M))}function P(){r(()=>{f.value&&X({width:f.value.offsetWidth,height:f.value.offsetHeight})})}function X(M){if(R.value===void 0||m.value===null)return;const G=M[R.value.container],se=Math.min(m.value[R.value.scroll],Array.prototype.reduce.call(m.value.children,(De,ye)=>De+(ye[R.value.content]||0),0)),Oe=G>0&&se>G;I.value=Oe,Oe===!0&&o(v),N.value=G<parseInt(e.breakpoint,10)}function re(M,G){const se=M!=null&&M!==""?S.find(De=>De.name.value===M):null,Oe=G!=null&&G!==""?S.find(De=>De.name.value===G):null;if(tt===!0)tt=!1;else if(se&&Oe){const De=se.tabIndicatorRef.value,ye=Oe.tabIndicatorRef.value;F!==null&&(clearTimeout(F),F=null),De.style.transition="none",De.style.transform="none",ye.style.transition="none",ye.style.transform="none";const _e=De.getBoundingClientRect(),Be=ye.getBoundingClientRect();ye.style.transform=e.vertical===!0?`translate3d(0,${_e.top-Be.top}px,0) scale3d(1,${Be.height?_e.height/Be.height:1},1)`:`translate3d(${_e.left-Be.left}px,0,0) scale3d(${Be.width?_e.width/Be.width:1},1,1)`,l(()=>{F=setTimeout(()=>{F=null,ye.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",ye.style.transform="none"},70)})}Oe&&I.value===!0&&g(Oe.rootRef.value)}function g(M){const{left:G,width:se,top:Oe,height:De}=m.value.getBoundingClientRect(),ye=M.getBoundingClientRect();let _e=e.vertical===!0?ye.top-Oe:ye.left-G;if(_e<0){m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(_e),v();return}_e+=e.vertical===!0?ye.height-De:ye.width-se,_e>0&&(m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(_e),v())}function v(){const M=m.value;if(M===null)return;const G=M.getBoundingClientRect(),se=e.vertical===!0?M.scrollTop:Math.abs(M.scrollLeft);z.value===!0?(w.value=Math.ceil(se+G.width)<M.scrollWidth-1,$.value=se>0):(w.value=se>0,$.value=e.vertical===!0?Math.ceil(se+G.height)<M.scrollHeight:Math.ceil(se+G.width)<M.scrollWidth)}function L(M){j!==null&&clearInterval(j),j=setInterval(()=>{O(M)===!0&&E()},5)}function ie(){L(U.value===!0?Number.MAX_SAFE_INTEGER:0)}function le(){L(U.value===!0?0:Number.MAX_SAFE_INTEGER)}function E(){j!==null&&(clearInterval(j),j=null)}function q(M,G){const se=Array.prototype.filter.call(m.value.children,Be=>Be===G||Be.matches&&Be.matches(".q-tab.q-focusable")===!0),Oe=se.length;if(Oe===0)return;if(M===36)return g(se[0]),se[0].focus(),!0;if(M===35)return g(se[Oe-1]),se[Oe-1].focus(),!0;const De=M===(e.vertical===!0?38:37),ye=M===(e.vertical===!0?40:39),_e=De===!0?-1:ye===!0?1:void 0;if(_e!==void 0){const Be=z.value===!0?-1:1,Ge=se.indexOf(G)+_e*Be;return Ge>=0&&Ge<Oe&&(g(se[Ge]),se[Ge].focus({preventScroll:!0})),!0}}const Se=p(()=>U.value===!0?{get:M=>Math.abs(M.scrollLeft),set:(M,G)=>{M.scrollLeft=-G}}:e.vertical===!0?{get:M=>M.scrollTop,set:(M,G)=>{M.scrollTop=G}}:{get:M=>M.scrollLeft,set:(M,G)=>{M.scrollLeft=G}});function O(M){const G=m.value,{get:se,set:Oe}=Se.value;let De=!1,ye=se(G);const _e=M<ye?-1:1;return ye+=_e*5,ye<0?(De=!0,ye=0):(_e===-1&&ye<=M||_e===1&&ye>=M)&&(De=!0,ye=M),Oe(G,ye),v(),De}function Re(M,G){for(const se in M)if(M[se]!==G[se])return!1;return!0}function ht(){let M=null,G={matchedLen:0,queryDiff:9999,hrefLen:0};const se=S.filter(_e=>_e.routeData?.hasRouterLink.value===!0),{hash:Oe,query:De}=i.$route,ye=Object.keys(De).length;for(const _e of se){const Be=_e.routeData.exact.value===!0;if(_e.routeData[Be===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ge,query:Dt,matched:Vn,href:Tr}=_e.routeData.resolvedLink.value,vn=Object.keys(Dt).length;if(Be===!0){if(Ge!==Oe||vn!==ye||Re(De,Dt)===!1)continue;M=_e.name.value;break}if(Ge!==""&&Ge!==Oe||vn!==0&&Re(Dt,De)===!1)continue;const yt={matchedLen:Vn.length,queryDiff:ye-vn,hrefLen:Tr.length-Ge.length};if(yt.matchedLen>G.matchedLen){M=_e.name.value,G=yt;continue}else if(yt.matchedLen!==G.matchedLen)continue;if(yt.queryDiff<G.queryDiff)M=_e.name.value,G=yt;else if(yt.queryDiff!==G.queryDiff)continue;yt.hrefLen>G.hrefLen&&(M=_e.name.value,G=yt)}if(M===null&&S.some(_e=>_e.routeData===void 0&&_e.name.value===_.value)===!0){tt=!1;return}J({name:M,setCurrent:!0})}function tn(M){if(u(),Q.value!==!0&&f.value!==null&&M.target&&typeof M.target.closest=="function"){const G=M.target.closest(".q-tab");G&&f.value.contains(G)===!0&&(Q.value=!0,I.value===!0&&g(G))}}function pt(){a(()=>{Q.value=!1},30)}function It(){nn.avoidRouteWatcher===!1?c(ht):d()}function Rt(){if(K===void 0){const M=he(()=>i.$route.fullPath,It);K=()=>{M(),K=void 0}}}function Vt(M){S.push(M),b.value++,P(),M.routeData===void 0||i.$route===void 0?c(()=>{if(I.value===!0){const G=_.value,se=G!=null&&G!==""?S.find(Oe=>Oe.name.value===G):null;se&&g(se.rootRef.value)}}):(Rt(),M.routeData.hasRouterLink.value===!0&&It())}function Ln(M){S.splice(S.indexOf(M),1),b.value--,P(),K!==void 0&&M.routeData!==void 0&&(S.every(G=>G.routeData===void 0)===!0&&K(),It())}const nn={currentModel:_,tabProps:k,hasFocus:Q,hasActiveTab:T,registerTab:Vt,unregisterTab:Ln,verifyRouteModel:It,updateModel:J,onKbdNavigate:q,avoidRouteWatcher:!1};vf(pu,nn);function qn(){F!==null&&clearTimeout(F),E(),K?.()}let sn,tt;return st(qn),Ji(()=>{sn=K!==void 0,qn()}),ko(()=>{sn===!0&&(Rt(),tt=!0,It()),P()}),()=>y("div",{ref:f,class:C.value,role:"tablist",onFocusin:tn,onFocusout:pt},[y(lh,{onResize:X}),y("div",{ref:m,class:ee.value,onScroll:v},lt(t.default)),y(vt,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(w.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||s.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:E,onMouseleavePassive:E,onTouchendPassive:E}),y(vt,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+($.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||s.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:le,onTouchstartPassive:le,onMouseupPassive:E,onMouseleavePassive:E,onTouchendPassive:E})])}});function Ch(e){return e??null}function ea(e,t){return e??(t===!0?`f_${Xr()}`:null)}function kh({getValue:e,required:t=!0}={}){if(_f.value===!0){const n=e!==void 0?B(Ch(e())):B(null);return t===!0&&n.value===null&&Nn(()=>{n.value=`f_${Xr()}`}),e!==void 0&&he(e,i=>{n.value=ea(i,t)}),n}return e!==void 0?p(()=>ea(e(),t)):B(`f_${Xr()}`)}const ta=/^on[A-Z]/;function Th(){const{attrs:e,vnode:t}=Pe(),n={listeners:B({}),attributes:B({})};function i(){const s={},r={};for(const o in e)o!=="class"&&o!=="style"&&ta.test(o)===!1&&(s[o]=e[o]);for(const o in t.props)ta.test(o)===!0&&(r[o]=t.props[o]);n.attributes.value=s,n.listeners.value=r}return bu(i),i(),n}const Pn={dark:{type:Boolean,default:null}};function On(e,t){return p(()=>e.dark===null?t.dark.isActive:e.dark)}function Eh({validate:e,resetValidation:t,requiresQForm:n}){const i=Ds(gf,!1);if(i!==!1){const{props:s,proxy:r}=Pe();Object.assign(r,{validate:e,resetValidation:t}),he(()=>s.disable,o=>{o===!0?(typeof t=="function"&&t(),i.unbindComponent(r)):i.bindComponent(r)}),Nn(()=>{s.disable!==!0&&i.bindComponent(r)}),st(()=>{s.disable!==!0&&i.unbindComponent(r)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const na=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,ia=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,sa=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,_s=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,gs=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Rr={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>na.test(e),hexaColor:e=>ia.test(e),hexOrHexaColor:e=>sa.test(e),rgbColor:e=>_s.test(e),rgbaColor:e=>gs.test(e),rgbOrRgbaColor:e=>_s.test(e)||gs.test(e),hexOrRgbColor:e=>na.test(e)||_s.test(e),hexaOrRgbaColor:e=>ia.test(e)||gs.test(e),anyColor:e=>sa.test(e)||_s.test(e)||gs.test(e)},xh=[!0,!1,"ondemand"],Mh={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>xh.includes(e)}};function Ih(e,t){const{props:n,proxy:i}=Pe(),s=B(!1),r=B(null),o=B(!1);Eh({validate:I,resetValidation:_});let l=0,a;const u=p(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),c=p(()=>n.disable!==!0&&u.value===!0&&t.value===!1),d=p(()=>n.error===!0||s.value===!0),f=p(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:r.value);he(()=>n.modelValue,()=>{o.value=!0,c.value===!0&&n.lazyRules===!1&&w()});function m(){n.lazyRules!=="ondemand"&&c.value===!0&&o.value===!0&&w()}he(()=>n.reactiveRules,$=>{$===!0?a===void 0&&(a=he(()=>n.rules,m,{immediate:!0,deep:!0})):a!==void 0&&(a(),a=void 0)},{immediate:!0}),he(()=>n.lazyRules,m),he(e,$=>{$===!0?o.value=!0:c.value===!0&&n.lazyRules!=="ondemand"&&w()});function _(){l++,t.value=!1,o.value=!1,s.value=!1,r.value=null,w.cancel()}function I($=n.modelValue){if(n.disable===!0||u.value===!1)return!0;const N=++l,S=t.value!==!0?()=>{o.value=!0}:()=>{},b=(F,j)=>{F===!0&&S(),s.value=F,r.value=j||null,t.value=!1},Q=[];for(let F=0;F<n.rules.length;F++){const j=n.rules[F];let K;if(typeof j=="function"?K=j($,Rr):typeof j=="string"&&Rr[j]!==void 0&&(K=Rr[j]($)),K===!1||typeof K=="string")return b(!0,K),!1;K!==!0&&K!==void 0&&Q.push(K)}return Q.length===0?(b(!1),!0):(t.value=!0,Promise.all(Q).then(F=>{if(F===void 0||Array.isArray(F)===!1||F.length===0)return N===l&&b(!1),!0;const j=F.find(K=>K===!1||typeof K=="string");return N===l&&b(j!==void 0,j),j===void 0},F=>(N===l&&(console.error(F),b(!0)),!1)))}const w=Cu(I,0);return st(()=>{a?.(),w.cancel()}),Object.assign(i,{resetValidation:_,validate:I}),nr(i,"hasError",()=>d.value),{isDirtyModel:o,hasRules:u,hasError:d,errorMessage:f,validate:I,resetValidation:_}}let wn=[],Wi=[];function Nu(e){Wi=Wi.filter(t=>t!==e)}function Rh(e){Nu(e),Wi.push(e)}function ra(e){Nu(e),Wi.length===0&&wn.length!==0&&(wn[wn.length-1](),wn=[])}function sr(e){Wi.length===0?e():wn.push(e)}function Dh(e){wn=wn.filter(t=>t!==e)}function Hi(e){return e!=null&&(""+e).length!==0}const Nh={...Pn,...Mh,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},rr={...Nh,maxlength:[Number,String]},Mo=["update:modelValue","clear","focus","blur"];function Io({requiredForAttr:e=!0,tagProp:t,changeEvent:n=!1}={}){const{props:i,proxy:s}=Pe(),r=On(i,s.$q),o=kh({required:e,getValue:()=>i.for});return{requiredForAttr:e,changeEvent:n,tag:t===!0?p(()=>i.tag):{value:"label"},isDark:r,editable:p(()=>i.disable!==!0&&i.readonly!==!0),innerLoading:B(!1),focused:B(!1),hasPopupOpen:!1,splitAttrs:Th(),targetUid:o,rootRef:B(null),targetRef:B(null),controlRef:B(null)}}function Ro(e){const{props:t,emit:n,slots:i,attrs:s,proxy:r}=Pe(),{$q:o}=r;let l=null;e.hasValue===void 0&&(e.hasValue=p(()=>Hi(t.modelValue))),e.emitValue===void 0&&(e.emitValue=P=>{n("update:modelValue",P)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:k,onFocusout:T}),Object.assign(e,{clearValue:H,onControlFocusin:k,onControlFocusout:T,focus:j}),e.computedCounter===void 0&&(e.computedCounter=p(()=>{if(t.counter!==!1){const P=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,X=t.maxlength!==void 0?t.maxlength:t.maxValues;return P+(X!==void 0?" / "+X:"")}}));const{isDirtyModel:a,hasRules:u,hasError:c,errorMessage:d,resetValidation:f}=Ih(e.focused,e.innerLoading),m=e.floatingLabel!==void 0?p(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):p(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),_=p(()=>t.bottomSlots===!0||t.hint!==void 0||u.value===!0||t.counter===!0||t.error!==null),I=p(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),w=p(()=>`q-field row no-wrap items-start q-field--${I.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(m.value===!0?" q-field--float":"")+(N.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&_.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),$=p(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(c.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),N=p(()=>t.labelSlot===!0||t.label!==void 0),S=p(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&c.value!==!0?` text-${t.labelColor}`:"")),b=p(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:m.value,modelValue:t.modelValue,emitValue:e.emitValue})),Q=p(()=>{const P={};return e.targetUid.value&&(P.for=e.targetUid.value),t.disable===!0&&(P["aria-disabled"]="true"),P});function F(){const P=document.activeElement;let X=e.targetRef?.value;X&&(P===null||P.id!==e.targetUid.value)&&(X.hasAttribute("tabindex")===!0||(X=X.querySelector("[tabindex]")),X!==P&&X?.focus({preventScroll:!0}))}function j(){sr(F)}function K(){Dh(F);const P=document.activeElement;P!==null&&e.rootRef.value.contains(P)&&P.blur()}function k(P){l!==null&&(clearTimeout(l),l=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",P))}function T(P,X){l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",P)),X?.())})}function H(P){Ze(P),o.platform.is.mobile!==!0?(e.targetRef?.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),e.changeEvent===!0&&n("change",null),n("clear",t.modelValue),Ye(()=>{const X=a.value;f(),a.value=X})}function C(P){[13,32].includes(P.keyCode)&&H(P)}function ee(){const P=[];return i.prepend!==void 0&&P.push(y("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Ot},i.prepend())),P.push(y("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},R())),c.value===!0&&t.noErrorIcon===!1&&P.push(U("error",[y(vt,{name:o.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?P.push(U("inner-loading-append",i.loading!==void 0?i.loading():[y(pf,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&P.push(U("inner-clearable-append",[y(vt,{class:"q-field__focusable-action",name:t.clearIcon||o.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":o.lang.label.clear,onKeyup:C,onClick:H})])),i.append!==void 0&&P.push(y("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Ot},i.append())),e.getInnerAppend!==void 0&&P.push(U("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&P.push(e.getControlChild()),P}function R(){const P=[];return t.prefix!==void 0&&t.prefix!==null&&P.push(y("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&P.push(e.getShadowControl()),e.getControl!==void 0?P.push(e.getControl()):i.rawControl!==void 0?P.push(i.rawControl()):i.control!==void 0&&P.push(y("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},i.control(b.value))),N.value===!0&&P.push(y("div",{class:S.value},lt(i.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&P.push(y("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),P.concat(lt(i.default))}function z(){let P,X;c.value===!0?d.value!==null?(P=[y("div",{role:"alert"},d.value)],X=`q--slot-error-${d.value}`):(P=lt(i.error),X="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(P=[y("div",t.hint)],X=`q--slot-hint-${t.hint}`):(P=lt(i.hint),X="q--slot-hint"));const re=t.counter===!0||i.counter!==void 0;if(t.hideBottomSpace===!0&&re===!1&&P===void 0)return;const g=y("div",{key:X,class:"q-field__messages col"},P);return y("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:Ot},[t.hideBottomSpace===!0?g:y(qi,{name:"q-transition--field-message"},()=>g),re===!0?y("div",{class:"q-field__counter"},i.counter!==void 0?i.counter():e.computedCounter.value):null])}function U(P,X){return X===null?null:y("div",{key:P,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},X)}let J=!1;return Ji(()=>{J=!0}),ko(()=>{J===!0&&t.autofocus===!0&&r.focus()}),t.autofocus===!0&&Nn(()=>{r.focus()}),st(()=>{l!==null&&clearTimeout(l)}),Object.assign(r,{focus:j,blur:K}),function(){const X=e.getControl===void 0&&i.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...Q.value}:Q.value;return y(e.tag.value,{ref:e.rootRef,class:[w.value,s.class],style:s.style,...X},[i.before!==void 0?y("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Ot},i.before()):null,y("div",{class:"q-field__inner relative-position col self-stretch"},[y("div",{ref:e.controlRef,class:$.value,tabindex:-1,...e.controlEvents},ee()),_.value===!0?z():null]),i.after!==void 0?y("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Ot},i.after()):null])}}const oa={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Ps={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Pu=Object.keys(Ps);Pu.forEach(e=>{Ps[e].regex=new RegExp(Ps[e].pattern)});const Ph=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Pu.join("")+"])|(.)","g"),la=/[.*+?^${}()|[\]\\]/g,Ve="",Oh={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Ah(e,t,n,i){let s,r,o,l,a,u;const c=B(null),d=B(m());function f(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}he(()=>e.type+e.autogrow,I),he(()=>e.mask,k=>{if(k!==void 0)w(d.value,!0);else{const T=j(d.value);I(),e.modelValue!==T&&t("update:modelValue",T)}}),he(()=>e.fillMask+e.reverseFillMask,()=>{c.value===!0&&w(d.value,!0)}),he(()=>e.unmaskedValue,()=>{c.value===!0&&w(d.value)});function m(){if(I(),c.value===!0){const k=Q(j(e.modelValue));return e.fillMask!==!1?K(k):k}return e.modelValue}function _(k){if(k<s.length)return s.slice(-k);let T="",H=s;const C=H.indexOf(Ve);if(C!==-1){for(let ee=k-H.length;ee>0;ee--)T+=Ve;H=H.slice(0,C)+T+H.slice(C)}return H}function I(){if(c.value=e.mask!==void 0&&e.mask.length!==0&&f(),c.value===!1){l=void 0,s="",r="";return}const k=oa[e.mask]===void 0?e.mask:oa[e.mask],T=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",H=T.replace(la,"\\$&"),C=[],ee=[],R=[];let z=e.reverseFillMask===!0,U="",J="";k.replace(Ph,(g,v,L,ie,le)=>{if(ie!==void 0){const E=Ps[ie];R.push(E),J=E.negate,z===!0&&(ee.push("(?:"+J+"+)?("+E.pattern+"+)?(?:"+J+"+)?("+E.pattern+"+)?"),z=!1),ee.push("(?:"+J+"+)?("+E.pattern+")?")}else if(L!==void 0)U="\\"+(L==="\\"?"":L),R.push(L),C.push("([^"+U+"]+)?"+U+"?");else{const E=v!==void 0?v:le;U=E==="\\"?"\\\\\\\\":E.replace(la,"\\\\$&"),R.push(E),C.push("([^"+U+"]+)?"+U+"?")}});const P=new RegExp("^"+C.join("")+"("+(U===""?".":"[^"+U+"]")+"+)?"+(U===""?"":"["+U+"]*")+"$"),X=ee.length-1,re=ee.map((g,v)=>v===0&&e.reverseFillMask===!0?new RegExp("^"+H+"*"+g):v===X?new RegExp("^"+g+"("+(J===""?".":J)+"+)?"+(e.reverseFillMask===!0?"$":H+"*")):new RegExp("^"+g));o=R,l=g=>{const v=P.exec(e.reverseFillMask===!0?g:g.slice(0,R.length+1));v!==null&&(g=v.slice(1).join(""));const L=[],ie=re.length;for(let le=0,E=g;le<ie;le++){const q=re[le].exec(E);if(q===null)break;E=E.slice(q.shift().length),L.push(...q)}return L.length!==0?L.join(""):g},s=R.map(g=>typeof g=="string"?g:Ve).join(""),r=s.split(Ve).join(T)}function w(k,T,H){const C=i.value,ee=C.selectionEnd,R=C.value.length-ee,z=j(k);T===!0&&I();const U=Q(z),J=e.fillMask!==!1?K(U):U,P=d.value!==J;C.value!==J&&(C.value=J),P===!0&&(d.value=J),document.activeElement===C&&Ye(()=>{if(J===r){const re=e.reverseFillMask===!0?r.length:0;C.setSelectionRange(re,re,"forward");return}if(H==="insertFromPaste"&&e.reverseFillMask!==!0){const re=C.selectionEnd;let g=ee-1;for(let v=a;v<=g&&v<re;v++)s[v]!==Ve&&g++;N.right(C,g);return}if(["deleteContentBackward","deleteContentForward"].indexOf(H)!==-1){const re=e.reverseFillMask===!0?ee===0?J.length>U.length?1:0:Math.max(0,J.length-(J===r?0:Math.min(U.length,R)+1))+1:ee;C.setSelectionRange(re,re,"forward");return}if(e.reverseFillMask===!0)if(P===!0){const re=Math.max(0,J.length-(J===r?0:Math.min(U.length,R+1)));re===1&&ee===1?C.setSelectionRange(re,re,"forward"):N.rightReverse(C,re)}else{const re=J.length-R;C.setSelectionRange(re,re,"backward")}else if(P===!0){const re=Math.max(0,s.indexOf(Ve),Math.min(U.length,ee)-1);N.right(C,re)}else{const re=ee-1;N.right(C,re)}});const X=e.unmaskedValue===!0?j(J):J;String(e.modelValue)!==X&&(e.modelValue!==null||X!=="")&&n(X,!0)}function $(k,T,H){const C=Q(j(k.value));T=Math.max(0,s.indexOf(Ve),Math.min(C.length,T)),a=T,k.setSelectionRange(T,H,"forward")}const N={left(k,T){const H=s.slice(T-1).indexOf(Ve)===-1;let C=Math.max(0,T-1);for(;C>=0;C--)if(s[C]===Ve){T=C,H===!0&&T++;break}if(C<0&&s[T]!==void 0&&s[T]!==Ve)return N.right(k,0);T>=0&&k.setSelectionRange(T,T,"backward")},right(k,T){const H=k.value.length;let C=Math.min(H,T+1);for(;C<=H;C++)if(s[C]===Ve){T=C;break}else s[C-1]===Ve&&(T=C);if(C>H&&s[T-1]!==void 0&&s[T-1]!==Ve)return N.left(k,H);k.setSelectionRange(T,T,"forward")},leftReverse(k,T){const H=_(k.value.length);let C=Math.max(0,T-1);for(;C>=0;C--)if(H[C-1]===Ve){T=C;break}else if(H[C]===Ve&&(T=C,C===0))break;if(C<0&&H[T]!==void 0&&H[T]!==Ve)return N.rightReverse(k,0);T>=0&&k.setSelectionRange(T,T,"backward")},rightReverse(k,T){const H=k.value.length,C=_(H),ee=C.slice(0,T+1).indexOf(Ve)===-1;let R=Math.min(H,T+1);for(;R<=H;R++)if(C[R-1]===Ve){T=R,T>0&&ee===!0&&T--;break}if(R>H&&C[T-1]!==void 0&&C[T-1]!==Ve)return N.leftReverse(k,H);k.setSelectionRange(T,T,"forward")}};function S(k){t("click",k),u=void 0}function b(k){if(t("keydown",k),Co(k)===!0||k.altKey===!0)return;const T=i.value,H=T.selectionStart,C=T.selectionEnd;if(k.shiftKey||(u=void 0),k.keyCode===37||k.keyCode===39){k.shiftKey&&u===void 0&&(u=T.selectionDirection==="forward"?H:C);const ee=N[(k.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(k.preventDefault(),ee(T,u===H?C:H),k.shiftKey){const R=T.selectionStart;T.setSelectionRange(Math.min(u,R),Math.max(u,R),"forward")}}else k.keyCode===8&&e.reverseFillMask!==!0&&H===C?(N.left(T,H),T.setSelectionRange(T.selectionStart,C,"backward")):k.keyCode===46&&e.reverseFillMask===!0&&H===C&&(N.rightReverse(T,C),T.setSelectionRange(H,T.selectionEnd,"forward"))}function Q(k){if(k==null||k==="")return"";if(e.reverseFillMask===!0)return F(k);const T=o;let H=0,C="";for(let ee=0;ee<T.length;ee++){const R=k[H],z=T[ee];if(typeof z=="string")C+=z,R===z&&H++;else if(R!==void 0&&z.regex.test(R))C+=z.transform!==void 0?z.transform(R):R,H++;else return C}return C}function F(k){const T=o,H=s.indexOf(Ve);let C=k.length-1,ee="";for(let R=T.length-1;R>=0&&C!==-1;R--){const z=T[R];let U=k[C];if(typeof z=="string")ee=z+ee,U===z&&C--;else if(U!==void 0&&z.regex.test(U))do ee=(z.transform!==void 0?z.transform(U):U)+ee,C--,U=k[C];while(H===R&&U!==void 0&&z.regex.test(U));else return ee}return ee}function j(k){return typeof k!="string"||l===void 0?typeof k=="number"?l(""+k):k:l(k)}function K(k){return r.length-k.length<=0?k:e.reverseFillMask===!0&&k.length!==0?r.slice(0,-k.length)+k:k+r.slice(k.length)}return{innerValue:d,hasMask:c,moveCursorForPaste:$,updateMaskValue:w,onMaskedKeydown:b,onMaskedClick:S}}const Do={name:String};function Fh(e={}){return(t,n,i)=>{t[n](y("input",{class:"hidden"+(i||""),...e.value}))}}function Ou(e){return p(()=>e.name||e.for)}function Lh(e,t){function n(){const i=e.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(i)===i&&("length"in i?Array.from(i):[i]).forEach(r=>{s.items.add(r)}),{files:s.files}}catch{return{files:void 0}}}return p(()=>{if(e.type==="file")return n()})}const qh=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Vh=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Yh=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Wh=/[a-z0-9_ -]$/i;function Au(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(it.is.firefox===!0?Wh.test(n.data)===!1:qh.test(n.data)===!0||Vh.test(n.data)===!0||Yh.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}const Dr=We({name:"QInput",inheritAttrs:!1,props:{...rr,...Oh,...Do,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Mo,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:i}=Pe(),{$q:s}=i,r={};let o=NaN,l,a,u=null,c;const d=B(null),f=Ou(e),{innerValue:m,hasMask:_,moveCursorForPaste:I,updateMaskValue:w,onMaskedKeydown:$,onMaskedClick:N}=Ah(e,t,U,d),S=Lh(e),b=p(()=>Hi(m.value)),Q=Au(R),F=Io({changeEvent:!0}),j=p(()=>e.type==="textarea"||e.autogrow===!0),K=p(()=>j.value===!0||["text","search","url","tel","password"].includes(e.type)),k=p(()=>{const v={...F.splitAttrs.listeners.value,onInput:R,onPaste:ee,onChange:P,onBlur:X,onFocus:ln};return v.onCompositionstart=v.onCompositionupdate=v.onCompositionend=Q,_.value===!0&&(v.onKeydown=$,v.onClick=N),e.autogrow===!0&&(v.onAnimationend=z),v}),T=p(()=>{const v={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:f.value,...F.splitAttrs.attributes.value,id:F.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return j.value===!1&&(v.type=e.type),e.autogrow===!0&&(v.rows=1),v});he(()=>e.type,()=>{d.value&&(d.value.value=e.modelValue)}),he(()=>e.modelValue,v=>{if(_.value===!0){if(a===!0&&(a=!1,String(v)===o))return;w(v)}else m.value!==v&&(m.value=v,e.type==="number"&&r.hasOwnProperty("value")===!0&&(l===!0?l=!1:delete r.value));e.autogrow===!0&&Ye(J)}),he(()=>e.autogrow,v=>{v===!0?Ye(J):d.value!==null&&n.rows>0&&(d.value.style.height="auto")}),he(()=>e.dense,()=>{e.autogrow===!0&&Ye(J)});function H(){sr(()=>{const v=document.activeElement;d.value!==null&&d.value!==v&&(v===null||v.id!==F.targetUid.value)&&d.value.focus({preventScroll:!0})})}function C(){d.value?.select()}function ee(v){if(_.value===!0&&e.reverseFillMask!==!0){const L=v.target;I(L,L.selectionStart,L.selectionEnd)}t("paste",v)}function R(v){if(!v||!v.target)return;if(e.type==="file"){t("update:modelValue",v.target.files);return}const L=v.target.value;if(v.target.qComposing===!0){r.value=L;return}if(_.value===!0)w(L,!1,v.inputType);else if(U(L),K.value===!0&&v.target===document.activeElement){const{selectionStart:ie,selectionEnd:le}=v.target;ie!==void 0&&le!==void 0&&Ye(()=>{v.target===document.activeElement&&L.indexOf(v.target.value)===0&&v.target.setSelectionRange(ie,le)})}e.autogrow===!0&&J()}function z(v){t("animationend",v),J()}function U(v,L){c=()=>{u=null,e.type!=="number"&&r.hasOwnProperty("value")===!0&&delete r.value,e.modelValue!==v&&o!==v&&(o=v,L===!0&&(a=!0),t("update:modelValue",v),Ye(()=>{o===v&&(o=NaN)})),c=void 0},e.type==="number"&&(l=!0,r.value=v),e.debounce!==void 0?(u!==null&&clearTimeout(u),r.value=v,u=setTimeout(c,e.debounce)):c()}function J(){requestAnimationFrame(()=>{const v=d.value;if(v!==null){const L=v.parentNode.style,{scrollTop:ie}=v,{overflowY:le,maxHeight:E}=s.platform.is.firefox===!0?{}:window.getComputedStyle(v),q=le!==void 0&&le!=="scroll";q===!0&&(v.style.overflowY="hidden"),L.marginBottom=v.scrollHeight-1+"px",v.style.height="1px",v.style.height=v.scrollHeight+"px",q===!0&&(v.style.overflowY=parseInt(E,10)<v.scrollHeight?"auto":"hidden"),L.marginBottom="",v.scrollTop=ie}})}function P(v){Q(v),u!==null&&(clearTimeout(u),u=null),c?.(),t("change",v.target.value)}function X(v){v!==void 0&&ln(v),u!==null&&(clearTimeout(u),u=null),c?.(),l=!1,a=!1,delete r.value,e.type!=="file"&&setTimeout(()=>{d.value!==null&&(d.value.value=m.value!==void 0?m.value:"")})}function re(){return r.hasOwnProperty("value")===!0?r.value:m.value!==void 0?m.value:""}st(()=>{X()}),Nn(()=>{e.autogrow===!0&&J()}),Object.assign(F,{innerValue:m,fieldClass:p(()=>`q-${j.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:p(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:d,emitValue:U,hasValue:b,floatingLabel:p(()=>b.value===!0&&(e.type!=="number"||isNaN(m.value)===!1)||Hi(e.displayValue)),getControl:()=>y(j.value===!0?"textarea":"input",{ref:d,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...T.value,...k.value,...e.type!=="file"?{value:re()}:S.value}),getShadowControl:()=>y("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(j.value===!0?"":" text-no-wrap")},[y("span",{class:"invisible"},re()),y("span",e.shadowText)])});const g=Ro(F);return Object.assign(i,{focus:H,select:C,getNativeElement:()=>d.value}),nr(i,"nativeEl",()=>d.value),g}}),yi=We({name:"QSpace",setup(){const e=y("div",{class:"q-space"});return()=>e}}),Hh={xs:8,sm:10,md:14,lg:20,xl:24},Jr=We({name:"QChip",props:{...Pn,...ku,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Pe(),s=On(e,i),r=Tu(e,Hh),o=p(()=>e.selected===!0||e.icon!==void 0),l=p(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),a=p(()=>e.iconRemove||i.iconSet.chip.remove),u=p(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=p(()=>{const w=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(w?` text-${w} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),d=p(()=>{const w=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},$={...w,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||i.lang.label.remove};return{chip:w,remove:$}});function f(w){w.keyCode===13&&m(w)}function m(w){e.disable||(n("update:selected",!e.selected),n("click",w))}function _(w){(w.keyCode===void 0||w.keyCode===13)&&(Ze(w),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function I(){const w=[];u.value===!0&&w.push(y("div",{class:"q-focus-helper"})),o.value===!0&&w.push(y(vt,{class:"q-chip__icon q-chip__icon--left",name:l.value}));const $=e.label!==void 0?[y("div",{class:"ellipsis"},[e.label])]:void 0;return w.push(y("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},yf(t.default,$))),e.iconRight&&w.push(y(vt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&w.push(y(vt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:a.value,...d.value.remove,onClick:_,onKeyup:_})),w}return()=>{if(e.modelValue===!1)return;const w={class:c.value,style:r.value};return u.value===!0&&Object.assign(w,d.value.chip,{onClick:m,onKeyup:f}),Eu("div",w,I(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[wu,e.ripple]])}}}),Uh=We({name:"QField",inheritAttrs:!1,props:{...rr,tag:{type:String,default:"label"}},emits:Mo,setup(){return Ro(Io({tagProp:!0}))}}),Bh=We({name:"QItem",props:{...Pn,...wf,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Pe(),s=On(e,i),{hasLink:r,linkAttrs:o,linkClass:l,linkTag:a,navigateOnClick:u}=Sf(),c=B(null),d=B(null),f=p(()=>e.clickable===!0||r.value===!0||e.tag==="label"),m=p(()=>e.disable!==!0&&f.value===!0),_=p(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(s.value===!0?" q-item--dark":"")+(r.value===!0&&e.active===null?l.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(m.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),I=p(()=>e.insetLevel===void 0?null:{["padding"+(i.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function w(S){m.value===!0&&(d.value!==null&&S.qAvoidFocus!==!0&&(S.qKeyEvent!==!0&&document.activeElement===c.value?d.value.focus():document.activeElement===d.value&&c.value.focus()),u(S))}function $(S){if(m.value===!0&&di(S,[13,32])===!0){Ze(S),S.qKeyEvent=!0;const b=new MouseEvent("click",S);b.qKeyEvent=!0,c.value.dispatchEvent(b)}n("keyup",S)}function N(){const S=bf(t.default,[]);return m.value===!0&&S.unshift(y("div",{class:"q-focus-helper",tabindex:-1,ref:d})),S}return()=>{const S={ref:c,class:_.value,style:I.value,role:"listitem",onClick:w,onKeyup:$};return m.value===!0?(S.tabindex=e.tabindex||"0",Object.assign(S,o.value)):f.value===!0&&(S["aria-disabled"]="true"),y(a.value,S,N())}}}),zh=We({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=p(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>y("div",{class:n.value},lt(t.default))}}),$h=We({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=p(()=>parseInt(e.lines,10)),i=p(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),s=p(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>y("div",{style:s.value,class:i.value},lt(t.default))}});function Fu(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Cf.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const jh={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},Gh={...jh,contextMenu:Boolean};function Qh({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:s,emit:r}=Pe(),o=B(null);let l=null;function a(m){return o.value===null?!1:m===void 0||m.touches===void 0||m.touches.length<=1}const u={};n===void 0&&(Object.assign(u,{hide(m){s.hide(m)},toggle(m){s.toggle(m),m.qAnchorHandled=!0},toggleKey(m){di(m,13)===!0&&u.toggle(m)},contextClick(m){s.hide(m),Ot(m),Ye(()=>{s.show(m),m.qAnchorHandled=!0})},prevent:Ot,mobileTouch(m){if(u.mobileCleanup(m),a(m)!==!0)return;s.hide(m),o.value.classList.add("non-selectable");const _=m.target;Qn(u,"anchor",[[_,"touchmove","mobileCleanup","passive"],[_,"touchend","mobileCleanup","passive"],[_,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),l=setTimeout(()=>{l=null,s.show(m),m.qAnchorHandled=!0},300)},mobileCleanup(m){o.value.classList.remove("non-selectable"),l!==null&&(clearTimeout(l),l=null),e.value===!0&&m!==void 0&&Fu()}}),n=function(m=i.contextMenu){if(i.noParentEvent===!0||o.value===null)return;let _;m===!0?s.$q.platform.is.mobile===!0?_=[[o.value,"touchstart","mobileTouch","passive"]]:_=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:_=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],Qn(u,"anchor",_)});function c(){Ts(u,"anchor")}function d(m){for(o.value=m;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;n()}function f(){if(i.target===!1||i.target===""||s.$el.parentNode===null)o.value=null;else if(i.target===!0)d(s.$el.parentNode);else{let m=i.target;if(typeof i.target=="string")try{m=document.querySelector(i.target)}catch{m=void 0}m!=null?(o.value=m.$el||m,n()):(o.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return he(()=>i.contextMenu,m=>{o.value!==null&&(c(),n(m))}),he(()=>i.target,()=>{o.value!==null&&c(),f()}),he(()=>i.noParentEvent,m=>{o.value!==null&&(m===!0?c():n())}),Nn(()=>{f(),t!==!0&&i.modelValue===!0&&o.value===null&&r("update:modelValue",!1)}),st(()=>{l!==null&&clearTimeout(l),c()}),{anchorEl:o,canShow:a,anchorEvents:u}}function Kh(e,t){const n=B(null);let i;function s(l,a){const u=`${a!==void 0?"add":"remove"}EventListener`,c=a!==void 0?a:i;l!==window&&l[u]("scroll",c,Pt.passive),window[u]("scroll",c,Pt.passive),i=a}function r(){n.value!==null&&(s(n.value),n.value=null)}const o=he(()=>e.noParentEvent,()=>{n.value!==null&&(r(),t())});return st(o),{localScrollTarget:n,unconfigureScrollTarget:r,changeScrollEvent:s}}const Lu={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},qu=["beforeShow","show","beforeHide","hide"];function Vu({showing:e,canShow:t,hideOnRouteChange:n,handleShow:i,handleHide:s,processOnMount:r}){const o=Pe(),{props:l,emit:a,proxy:u}=o;let c;function d(N){e.value===!0?_(N):f(N)}function f(N){if(l.disable===!0||N?.qAnchorHandled===!0||t!==void 0&&t(N)!==!0)return;const S=l["onUpdate:modelValue"]!==void 0;S===!0&&(a("update:modelValue",!0),c=N,Ye(()=>{c===N&&(c=void 0)})),(l.modelValue===null||S===!1)&&m(N)}function m(N){e.value!==!0&&(e.value=!0,a("beforeShow",N),i!==void 0?i(N):a("show",N))}function _(N){if(l.disable===!0)return;const S=l["onUpdate:modelValue"]!==void 0;S===!0&&(a("update:modelValue",!1),c=N,Ye(()=>{c===N&&(c=void 0)})),(l.modelValue===null||S===!1)&&I(N)}function I(N){e.value!==!1&&(e.value=!1,a("beforeHide",N),s!==void 0?s(N):a("hide",N))}function w(N){l.disable===!0&&N===!0?l["onUpdate:modelValue"]!==void 0&&a("update:modelValue",!1):N===!0!==e.value&&(N===!0?m:I)(c)}he(()=>l.modelValue,w),n!==void 0&&kf(o)===!0&&he(()=>u.$route.fullPath,()=>{n.value===!0&&e.value===!0&&_()}),Nn(()=>{w(l.modelValue)});const $={show:f,hide:_,toggle:d};return Object.assign(u,$),$}const Xn=[];function Zh(e){return Xn.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Yu(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return Es(e)}else if(e.__qPortal===!0){const n=Es(e);return n?.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=Es(e)}while(e!=null)}function Xh(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=Yu(e,t);continue}e.hide(t)}e=Es(e)}}const Jh=We({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function em(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Wu(e,t,n,i){const s=B(!1),r=B(!1);let o=null;const l={},a=i==="dialog"&&em(e);function u(d){if(d===!0){ra(l),r.value=!0;return}r.value=!1,s.value===!1&&(a===!1&&o===null&&(o=xf(!1,i)),s.value=!0,Xn.push(e.proxy),Rh(l))}function c(d){if(r.value=!1,d!==!0)return;ra(l),s.value=!1;const f=Xn.indexOf(e.proxy);f!==-1&&Xn.splice(f,1),o!==null&&(Mf(o),o=null)}return Tf(()=>{c(!0)}),e.proxy.__qPortal=!0,nr(e.proxy,"contentEl",()=>t.value),{showPortal:u,hidePortal:c,portalIsActive:s,portalIsAccessible:r,renderPortal:()=>a===!0?n():s.value===!0?[y(Ef,{to:o},y(Jh,n))]:void 0}}const Hu={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Uu(e,t=()=>{},n=()=>{}){return{transitionProps:p(()=>{const i=`q-transition--${e.transitionShow||t()}`,s=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:p(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const kn=[];let li;function tm(e){li=e.keyCode===27}function nm(){li===!0&&(li=!1)}function im(e){li===!0&&(li=!1,di(e,27)===!0&&kn[kn.length-1](e))}function Bu(e){window[e]("keydown",tm),window[e]("blur",nm),window[e]("keyup",im),li=!1}function zu(e){it.is.desktop===!0&&(kn.push(e),kn.length===1&&Bu("addEventListener"))}function Os(e){const t=kn.indexOf(e);t!==-1&&(kn.splice(t,1),kn.length===0&&Bu("removeEventListener"))}const Tn=[];function $u(e){Tn[Tn.length-1](e)}function ju(e){it.is.desktop===!0&&(Tn.push(e),Tn.length===1&&document.body.addEventListener("focusin",$u))}function eo(e){const t=Tn.indexOf(e);t!==-1&&(Tn.splice(t,1),Tn.length===0&&document.body.removeEventListener("focusin",$u))}const{notPassiveCapture:As}=Pt,En=[];function Fs(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=Xn.length-1;for(;n>=0;){const i=Xn[n].$;if(i.type.name==="QTooltip"){n--;continue}if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=En.length-1;i>=0;i--){const s=En[i];if((s.anchorEl.value===null||s.anchorEl.value.contains(t)===!1)&&(t===document.body||s.innerRef.value!==null&&s.innerRef.value.contains(t)===!1))e.qClickOutside=!0,s.onClickOutside(e);else return}}function sm(e){En.push(e),En.length===1&&(document.addEventListener("mousedown",Fs,As),document.addEventListener("touchstart",Fs,As))}function aa(e){const t=En.findIndex(n=>n===e);t!==-1&&(En.splice(t,1),En.length===0&&(document.removeEventListener("mousedown",Fs,As),document.removeEventListener("touchstart",Fs,As)))}let ua,ca;function da(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function rm(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const to={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{to[`${e}#ltr`]=e,to[`${e}#rtl`]=e});function fa(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:to[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function om(e,t){let{top:n,left:i,right:s,bottom:r,width:o,height:l}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],r+=t[1],s+=t[0],o+=t[0],l+=t[1]),{top:n,bottom:r,height:l,left:i,right:s,width:o,middle:i+(s-i)/2,center:n+(r-n)/2}}function lm(e,t,n){let{top:i,left:s}=e.getBoundingClientRect();return i+=t.top,s+=t.left,n!==void 0&&(i+=n[1],s+=n[0]),{top:i,bottom:i+1,height:1,left:s,right:s+1,width:1,middle:s,center:i}}function am(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function ha(e,t,n,i){return{top:e[n.vertical]-t[i.vertical],left:e[n.horizontal]-t[i.horizontal]}}function Gu(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Gu(e,t+1)},10);return}const{targetEl:n,offset:i,anchorEl:s,anchorOrigin:r,selfOrigin:o,absoluteOffset:l,fit:a,cover:u,maxHeight:c,maxWidth:d}=e;if(it.is.ios===!0&&window.visualViewport!==void 0){const F=document.body.style,{offsetLeft:j,offsetTop:K}=window.visualViewport;j!==ua&&(F.setProperty("--q-pe-left",j+"px"),ua=j),K!==ca&&(F.setProperty("--q-pe-top",K+"px"),ca=K)}const{scrollLeft:f,scrollTop:m}=n,_=l===void 0?om(s,u===!0?[0,0]:i):lm(s,l,i);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:d,maxHeight:c,visibility:"visible"});const{offsetWidth:I,offsetHeight:w}=n,{elWidth:$,elHeight:N}=a===!0||u===!0?{elWidth:Math.max(_.width,I),elHeight:u===!0?Math.max(_.height,w):w}:{elWidth:I,elHeight:w};let S={maxWidth:d,maxHeight:c};(a===!0||u===!0)&&(S.minWidth=_.width+"px",u===!0&&(S.minHeight=_.height+"px")),Object.assign(n.style,S);const b=am($,N);let Q=ha(_,b,r,o);if(l===void 0||i===void 0)Nr(Q,_,b,r,o);else{const{top:F,left:j}=Q;Nr(Q,_,b,r,o);let K=!1;if(Q.top!==F){K=!0;const k=2*i[1];_.center=_.top-=k,_.bottom-=k+2}if(Q.left!==j){K=!0;const k=2*i[0];_.middle=_.left-=k,_.right-=k+2}K===!0&&(Q=ha(_,b,r,o),Nr(Q,_,b,r,o))}S={top:Q.top+"px",left:Q.left+"px"},Q.maxHeight!==void 0&&(S.maxHeight=Q.maxHeight+"px",_.height>Q.maxHeight&&(S.minHeight=S.maxHeight)),Q.maxWidth!==void 0&&(S.maxWidth=Q.maxWidth+"px",_.width>Q.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(n.style,S),n.scrollTop!==m&&(n.scrollTop=m),n.scrollLeft!==f&&(n.scrollLeft=f)}function Nr(e,t,n,i,s){const r=n.bottom,o=n.right,l=ah(),a=window.innerHeight-l,u=document.body.clientWidth;if(e.top<0||e.top+r>a)if(s.vertical==="center")e.top=t[i.vertical]>a/2?Math.max(0,a-r):0,e.maxHeight=Math.min(r,a);else if(t[i.vertical]>a/2){const c=Math.min(a,i.vertical==="center"?t.center:i.vertical===s.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,c),e.top=Math.max(0,c-r)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===s.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,a-e.top);if(e.left<0||e.left+o>u)if(e.maxWidth=Math.min(o,u),s.horizontal==="middle")e.left=t[i.horizontal]>u/2?Math.max(0,u-o):0;else if(t[i.horizontal]>u/2){const c=Math.min(u,i.horizontal==="middle"?t.middle:i.horizontal===s.horizontal?t.right:t.left);e.maxWidth=Math.min(o,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===s.horizontal?t.left:t.right),e.maxWidth=Math.min(o,u-e.left)}const Qu=We({name:"QMenu",inheritAttrs:!1,props:{...Gh,...Lu,...Pn,...Hu,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:da},self:{type:String,validator:da},offset:{type:Array,validator:rm},scrollTarget:uh,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...qu,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){let s=null,r,o,l;const a=Pe(),{proxy:u}=a,{$q:c}=u,d=B(null),f=B(!1),m=p(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),_=On(e,c),{registerTick:I,removeTick:w}=Ri(),{registerTimeout:$}=Vi(),{transitionProps:N,transitionStyle:S}=Uu(e),{localScrollTarget:b,changeScrollEvent:Q,unconfigureScrollTarget:F}=Kh(e,L),{anchorEl:j,canShow:K}=Qh({showing:f}),{hide:k}=Vu({showing:f,canShow:K,handleShow:re,handleHide:g,hideOnRouteChange:m,processOnMount:!0}),{showPortal:T,hidePortal:H,renderPortal:C}=Wu(a,d,Se,"menu"),ee={anchorEl:j,innerRef:d,onClickOutside(O){if(e.persistent!==!0&&f.value===!0)return k(O),(O.type==="touchstart"||O.target.classList.contains("q-dialog__backdrop"))&&Ze(O),!0}},R=p(()=>fa(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),z=p(()=>e.cover===!0?R.value:fa(e.self||"top start",c.lang.rtl)),U=p(()=>(e.square===!0?" q-menu--square":"")+(_.value===!0?" q-menu--dark q-dark":"")),J=p(()=>e.autoClose===!0?{onClick:ie}:{}),P=p(()=>f.value===!0&&e.persistent!==!0);he(P,O=>{O===!0?(zu(E),sm(ee)):(Os(E),aa(ee))});function X(){sr(()=>{let O=d.value;O&&O.contains(document.activeElement)!==!0&&(O=O.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||O.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||O.querySelector("[autofocus], [data-autofocus]")||O,O.focus({preventScroll:!0}))})}function re(O){if(s=e.noRefocus===!1?document.activeElement:null,ju(le),T(),L(),r=void 0,O!==void 0&&(e.touchPosition||e.contextMenu)){const Re=Zr(O);if(Re.left!==void 0){const{top:ht,left:tn}=j.value.getBoundingClientRect();r={left:Re.left-tn,top:Re.top-ht}}}o===void 0&&(o=he(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,q)),e.noFocus!==!0&&document.activeElement.blur(),I(()=>{q(),e.noFocus!==!0&&X()}),$(()=>{c.platform.is.ios===!0&&(l=e.autoClose,d.value.click()),q(),T(!0),n("show",O)},e.transitionDuration)}function g(O){w(),H(),v(!0),s!==null&&(O===void 0||O.qClickOutside!==!0)&&(((O?.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),$(()=>{H(!0),n("hide",O)},e.transitionDuration)}function v(O){r=void 0,o!==void 0&&(o(),o=void 0),(O===!0||f.value===!0)&&(eo(le),F(),aa(ee),Os(E)),O!==!0&&(s=null)}function L(){(j.value!==null||e.scrollTarget!==void 0)&&(b.value=ch(j.value,e.scrollTarget),Q(b.value,q))}function ie(O){l!==!0?(Yu(u,O),n("click",O)):l=!1}function le(O){P.value===!0&&e.noFocus!==!0&&xu(d.value,O.target)!==!0&&X()}function E(O){e.noEscDismiss!==!0&&(n("escapeKey"),k(O))}function q(){Gu({targetEl:d.value,offset:e.offset,anchorEl:j.value,anchorOrigin:R.value,selfOrigin:z.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Se(){return y(qi,N.value,()=>f.value===!0?y("div",{role:"menu",...i,ref:d,tabindex:-1,class:["q-menu q-position-engine scroll"+U.value,i.class],style:[i.style,S.value],...J.value},lt(t.default)):null)}return st(v),Object.assign(u,{focus:X,updatePosition:q}),C}});function um(e,t,n){let i;function s(){i!==void 0&&(zl.remove(i),i=void 0)}return st(()=>{e.value===!0&&s()}),{removeFromHistory:s,addToHistory(){i={condition:()=>n.value===!0,handler:t},zl.add(i)}}}let wi=0,Pr,Or,Ii,Ar=!1,ma,va,_a,gn=null;function cm(e){dm(e)&&Ze(e)}function dm(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=If(e),n=e.shiftKey&&!e.deltaX,i=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),s=n||i?e.deltaY:e.deltaX;for(let r=0;r<t.length;r++){const o=t[r];if(hh(o,i))return i?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function ga(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function ps(e){Ar!==!0&&(Ar=!0,requestAnimationFrame(()=>{Ar=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:i}=document.scrollingElement;(Ii===void 0||t!==window.innerHeight)&&(Ii=n-t,document.scrollingElement.scrollTop=i),i>Ii&&(document.scrollingElement.scrollTop-=Math.ceil((i-Ii)/8))}))}function pa(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:i,overflowX:s}=window.getComputedStyle(t);Pr=dh(window),Or=fh(window),ma=t.style.left,va=t.style.top,_a=window.location.href,t.style.left=`-${Pr}px`,t.style.top=`-${Or}px`,s!=="hidden"&&(s==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,it.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",ps,Pt.passiveCapture),window.visualViewport.addEventListener("scroll",ps,Pt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",ga,Pt.passiveCapture))}it.is.desktop===!0&&it.is.mac===!0&&window[`${e}EventListener`]("wheel",cm,Pt.notPassive),e==="remove"&&(it.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",ps,Pt.passiveCapture),window.visualViewport.removeEventListener("scroll",ps,Pt.passiveCapture)):window.removeEventListener("scroll",ga,Pt.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=ma,t.style.top=va,window.location.href===_a&&window.scrollTo(Pr,Or),Ii=void 0)}function fm(e){let t="add";if(e===!0){if(wi++,gn!==null){clearTimeout(gn),gn=null;return}if(wi>1)return}else{if(wi===0||(wi--,wi>0))return;if(t="remove",it.is.ios===!0&&it.is.nativeMobile===!0){gn!==null&&clearTimeout(gn),gn=setTimeout(()=>{pa(t),gn=null},100);return}}pa(t)}function hm(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,fm(t))}}}let ys=0;const mm={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},ya={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},vm=We({name:"QDialog",inheritAttrs:!1,props:{...Lu,...Hu,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...qu,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){const s=Pe(),r=B(null),o=B(!1),l=B(!1);let a=null,u=null,c,d;const f=p(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:m}=hm(),{registerTimeout:_}=Vi(),{registerTick:I,removeTick:w}=Ri(),{transitionProps:$,transitionStyle:N}=Uu(e,()=>ya[e.position][0],()=>ya[e.position][1]),S=p(()=>N.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:b,hidePortal:Q,portalIsAccessible:F,renderPortal:j}=Wu(s,r,le,"dialog"),{hide:K}=Vu({showing:o,hideOnRouteChange:f,handleShow:z,handleHide:U,processOnMount:!0}),{addToHistory:k,removeFromHistory:T}=um(o,K,f),H=p(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${mm[e.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),C=p(()=>o.value===!0&&e.seamless!==!0),ee=p(()=>e.autoClose===!0?{onClick:v}:{}),R=p(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${C.value===!0?"modal":"seamless"}`,i.class]);he(()=>e.maximized,E=>{o.value===!0&&g(E)}),he(C,E=>{m(E),E===!0?(ju(ie),zu(X)):(eo(ie),Os(X))});function z(E){k(),u=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,g(e.maximized),b(),l.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),I(J)):w(),_(()=>{if(s.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:q,bottom:Se}=document.activeElement.getBoundingClientRect(),{innerHeight:O}=window,Re=window.visualViewport!==void 0?window.visualViewport.height:O;q>0&&Se>Re/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Re,Se>=O?1/0:Math.ceil(document.scrollingElement.scrollTop+Se-Re/2))),document.activeElement.scrollIntoView()}d=!0,r.value.click(),d=!1}b(!0),l.value=!1,n("show",E)},e.transitionDuration)}function U(E){w(),T(),re(!0),l.value=!0,Q(),u!==null&&(((E?.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),_(()=>{Q(!0),l.value=!1,n("hide",E)},e.transitionDuration)}function J(E){sr(()=>{let q=r.value;if(q!==null){if(E!==void 0){const Se=q.querySelector(E);if(Se!==null){Se.focus({preventScroll:!0});return}}q.contains(document.activeElement)!==!0&&(q=q.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||q.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||q.querySelector("[autofocus], [data-autofocus]")||q,q.focus({preventScroll:!0}))}})}function P(E){E&&typeof E.focus=="function"?E.focus({preventScroll:!0}):J(),n("shake");const q=r.value;q!==null&&(q.classList.remove("q-animate--scale"),q.classList.add("q-animate--scale"),a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,r.value!==null&&(q.classList.remove("q-animate--scale"),J())},170))}function X(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&P():(n("escapeKey"),K()))}function re(E){a!==null&&(clearTimeout(a),a=null),(E===!0||o.value===!0)&&(g(!1),e.seamless!==!0&&(m(!1),eo(ie),Os(X))),E!==!0&&(u=null)}function g(E){E===!0?c!==!0&&(ys<1&&document.body.classList.add("q-body--dialog"),ys++,c=!0):c===!0&&(ys<2&&document.body.classList.remove("q-body--dialog"),ys--,c=!1)}function v(E){d!==!0&&(K(E),n("click",E))}function L(E){e.persistent!==!0&&e.noBackdropDismiss!==!0?K(E):e.noShake!==!0&&P()}function ie(E){e.allowFocusOutside!==!0&&F.value===!0&&xu(r.value,E.target)!==!0&&J('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:J,shake:P,__updateRefocusTarget(E){u=E||null}}),st(re);function le(){return y("div",{role:"dialog","aria-modal":C.value===!0?"true":"false",...i,class:R.value},[y(qi,{name:"q-transition--fade",appear:!0},()=>C.value===!0?y("div",{class:"q-dialog__backdrop fixed-full",style:S.value,"aria-hidden":"true",tabindex:-1,onClick:L}):null),y(qi,$.value,()=>o.value===!0?y("div",{ref:r,class:H.value,style:N.value,tabindex:-1,...ee.value},lt(t.default)):null)])}return j}}),wt=1e3,_m=["start","center","end","start-force","center-force","end-force"],Ku=Array.prototype.filter,gm=window.getComputedStyle(document.body).overflowAnchor===void 0?Mu:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Ku.call(n,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const i=n[t];i?.dataset&&(i.dataset.qVsAnchor="")}))};function Jn(e,t){return e+t}function Fr(e,t,n,i,s,r,o,l){const a=e===window?document.scrollingElement||document.documentElement:e,u=s===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-o-l,scrollMaxSize:0,offsetStart:-o,offsetEnd:-l};if(s===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=a.scrollLeft,c.scrollViewSize+=a.clientWidth),c.scrollMaxSize=a.scrollWidth,r===!0&&(c.scrollStart=(Yi===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=a.scrollTop,c.scrollViewSize+=a.clientHeight),c.scrollMaxSize=a.scrollHeight),n!==null)for(let d=n.previousElementSibling;d!==null;d=d.previousElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=d[u]);if(i!==null)for(let d=i.nextElementSibling;d!==null;d=d.nextElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=d[u]);if(t!==e){const d=a.getBoundingClientRect(),f=t.getBoundingClientRect();s===!0?(c.offsetStart+=f.left-d.left,c.offsetEnd-=f.width):(c.offsetStart+=f.top-d.top,c.offsetEnd-=f.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function wa(e,t,n,i){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(i===!0&&(t=(Yi===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(i===!0&&(t=(Yi===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Si(e,t,n,i){if(n>=i)return 0;const s=t.length,r=Math.floor(n/wt),o=Math.floor((i-1)/wt)+1;let l=e.slice(r,o).reduce(Jn,0);return n%wt!==0&&(l-=t.slice(r*wt,n).reduce(Jn,0)),i%wt!==0&&i!==s&&(l-=t.slice(i,o*wt).reduce(Jn,0)),l}const pm={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Sa={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...pm};function ym({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:i}){const s=Pe(),{props:r,emit:o,proxy:l}=s,{$q:a}=l;let u,c,d,f=[],m;const _=B(0),I=B(0),w=B({}),$=B(null),N=B(null),S=B(null),b=B({from:0,to:0}),Q=p(()=>r.tableColspan!==void 0?r.tableColspan:100);i===void 0&&(i=p(()=>r.virtualScrollItemSize));const F=p(()=>i.value+";"+r.virtualScrollHorizontal),j=p(()=>F.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);he(j,()=>{U()}),he(F,K);function K(){z(c,!0)}function k(g){z(g===void 0?c:g)}function T(g,v){const L=t();if(L==null||L.nodeType===8)return;const ie=Fr(L,n(),$.value,N.value,r.virtualScrollHorizontal,a.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);d!==ie.scrollViewSize&&U(ie.scrollViewSize),C(L,ie,Math.min(e.value-1,Math.max(0,parseInt(g,10)||0)),0,_m.indexOf(v)!==-1?v:c!==-1&&g>c?"end":"start")}function H(){const g=t();if(g==null||g.nodeType===8)return;const v=Fr(g,n(),$.value,N.value,r.virtualScrollHorizontal,a.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),L=e.value-1,ie=v.scrollMaxSize-v.offsetStart-v.offsetEnd-I.value;if(u===v.scrollStart)return;if(v.scrollMaxSize<=0){C(g,v,0,0);return}d!==v.scrollViewSize&&U(v.scrollViewSize),ee(b.value.from);const le=Math.floor(v.scrollMaxSize-Math.max(v.scrollViewSize,v.offsetEnd)-Math.min(m[L],v.scrollViewSize/2));if(le>0&&Math.ceil(v.scrollStart)>=le){C(g,v,L,v.scrollMaxSize-v.offsetEnd-f.reduce(Jn,0));return}let E=0,q=v.scrollStart-v.offsetStart,Se=q;if(q<=ie&&q+v.scrollViewSize>=_.value)q-=_.value,E=b.value.from,Se=q;else for(let O=0;q>=f[O]&&E<L;O++)q-=f[O],E+=wt;for(;q>0&&E<L;)q-=m[E],q>-v.scrollViewSize?(E++,Se=q):Se=m[E]+q;C(g,v,E,Se)}function C(g,v,L,ie,le){const E=typeof le=="string"&&le.indexOf("-force")!==-1,q=E===!0?le.replace("-force",""):le,Se=q!==void 0?q:"start";let O=Math.max(0,L-w.value[Se]),Re=O+w.value.total;Re>e.value&&(Re=e.value,O=Math.max(0,Re-w.value.total)),u=v.scrollStart;const ht=O!==b.value.from||Re!==b.value.to;if(ht===!1&&q===void 0){P(L);return}const{activeElement:tn}=document,pt=S.value;ht===!0&&pt!==null&&pt!==tn&&pt.contains(tn)===!0&&(pt.addEventListener("focusout",R),setTimeout(()=>{pt?.removeEventListener("focusout",R)})),gm(pt,L-O);const It=q!==void 0?m.slice(O,L).reduce(Jn,0):0;if(ht===!0){const Rt=Re>=b.value.from&&O<=b.value.to?b.value.to:Re;b.value={from:O,to:Rt},_.value=Si(f,m,0,O),I.value=Si(f,m,Re,e.value),requestAnimationFrame(()=>{b.value.to!==Re&&u===v.scrollStart&&(b.value={from:b.value.from,to:Re},I.value=Si(f,m,Re,e.value))})}requestAnimationFrame(()=>{if(u!==v.scrollStart)return;ht===!0&&ee(O);const Rt=m.slice(O,L).reduce(Jn,0),Vt=Rt+v.offsetStart+_.value,Ln=Vt+m[L];let nn=Vt+ie;if(q!==void 0){const qn=Rt-It,sn=v.scrollStart+qn;nn=E!==!0&&sn<Vt&&Ln<sn+v.scrollViewSize?sn:q==="end"?Ln-v.scrollViewSize:Vt-(q==="start"?0:Math.round((v.scrollViewSize-m[L])/2))}u=nn,wa(g,nn,r.virtualScrollHorizontal,a.lang.rtl),P(L)})}function ee(g){const v=S.value;if(v){const L=Ku.call(v.children,O=>O.classList&&O.classList.contains("q-virtual-scroll--skip")===!1),ie=L.length,le=r.virtualScrollHorizontal===!0?O=>O.getBoundingClientRect().width:O=>O.offsetHeight;let E=g,q,Se;for(let O=0;O<ie;){for(q=le(L[O]),O++;O<ie&&L[O].classList.contains("q-virtual-scroll--with-prev")===!0;)q+=le(L[O]),O++;Se=q-m[E],Se!==0&&(m[E]+=Se,f[Math.floor(E/wt)]+=Se),E++}}}function R(){S.value?.focus()}function z(g,v){const L=1*i.value;(v===!0||Array.isArray(m)===!1)&&(m=[]);const ie=m.length;m.length=e.value;for(let E=e.value-1;E>=ie;E--)m[E]=L;const le=Math.floor((e.value-1)/wt);f=[];for(let E=0;E<=le;E++){let q=0;const Se=Math.min((E+1)*wt,e.value);for(let O=E*wt;O<Se;O++)q+=m[O];f.push(q)}c=-1,u=void 0,_.value=Si(f,m,0,b.value.from),I.value=Si(f,m,b.value.to,e.value),g>=0?(ee(b.value.from),Ye(()=>{T(g)})):X()}function U(g){if(g===void 0&&typeof window<"u"){const q=t();q!=null&&q.nodeType!==8&&(g=Fr(q,n(),$.value,N.value,r.virtualScrollHorizontal,a.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}d=g;const v=parseFloat(r.virtualScrollSliceRatioBefore)||0,L=parseFloat(r.virtualScrollSliceRatioAfter)||0,ie=1+v+L,le=g===void 0||g<=0?1:Math.ceil(g/i.value),E=Math.max(1,le,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/ie));w.value={total:Math.ceil(E*ie),start:Math.ceil(E*v),center:Math.ceil(E*(.5+v)),end:Math.ceil(E*(1+v)),view:le}}function J(g,v){const L=r.virtualScrollHorizontal===!0?"width":"height",ie={["--q-virtual-scroll-item-"+L]:i.value+"px"};return[g==="tbody"?y(g,{class:"q-virtual-scroll__padding",key:"before",ref:$},[y("tr",[y("td",{style:{[L]:`${_.value}px`,...ie},colspan:Q.value})])]):y(g,{class:"q-virtual-scroll__padding",key:"before",ref:$,style:{[L]:`${_.value}px`,...ie}}),y(g,{class:"q-virtual-scroll__content",key:"content",ref:S,tabindex:-1},v.flat()),g==="tbody"?y(g,{class:"q-virtual-scroll__padding",key:"after",ref:N},[y("tr",[y("td",{style:{[L]:`${I.value}px`,...ie},colspan:Q.value})])]):y(g,{class:"q-virtual-scroll__padding",key:"after",ref:N,style:{[L]:`${I.value}px`,...ie}})]}function P(g){c!==g&&(r.onVirtualScroll!==void 0&&o("virtualScroll",{index:g,from:b.value.from,to:b.value.to-1,direction:g<c?"decrease":"increase",ref:l}),c=g)}U();const X=Cu(H,a.platform.is.ios===!0?120:35);Rf(()=>{U()});let re=!1;return Ji(()=>{re=!0}),ko(()=>{if(re!==!0)return;const g=t();u!==void 0&&g!==void 0&&g!==null&&g.nodeType!==8?wa(g,u,r.virtualScrollHorizontal,a.lang.rtl):T(c)}),st(()=>{X.cancel()}),Object.assign(l,{scrollTo:T,reset:K,refresh:k}),{virtualScrollSliceRange:b,virtualScrollSliceSizeComputed:w,setVirtualScrollSize:U,onVirtualScrollEvt:X,localResetVirtualScroll:z,padVirtualScroll:J,scrollTo:T,reset:K,refresh:k}}function ba(e,t,n){if(n<=t)return t;const i=n-t+1;let s=t+(e-t)%i;return s<t&&(s=i+s),s===0?0:s}const Ca=e=>["add","add-unique","toggle"].includes(e),wm=".*+?^${}()|[]\\",Sm=Object.keys(rr);function Lr(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return i=>i!==null&&typeof i=="object"&&n in i?i[n]:i}const ka=We({name:"QSelect",inheritAttrs:!1,props:{...Sa,...Do,...rr,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ca},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Sa.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Mo,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:i}=Pe(),{$q:s}=i,r=B(!1),o=B(!1),l=B(-1),a=B(""),u=B(!1),c=B(!1);let d=null,f=null,m,_,I,w=null,$,N,S,b;const Q=B(null),F=B(null),j=B(null),K=B(null),k=B(null),T=Ou(e),H=Au(Yl),C=p(()=>Array.isArray(e.options)?e.options.length:0),ee=p(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:R,virtualScrollSliceSizeComputed:z,localResetVirtualScroll:U,padVirtualScroll:J,onVirtualScrollEvt:P,scrollTo:X,setVirtualScrollSize:re}=ym({virtualScrollLength:C,getVirtualScrollTarget:tf,getVirtualScrollEl:ql,virtualScrollItemSizeComputed:ee}),g=Io(),v=p(()=>{const h=e.mapOptions===!0&&e.multiple!==!0,V=e.modelValue!==void 0&&(e.modelValue!==null||h===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const Y=e.mapOptions===!0&&m!==void 0?m:[],de=V.map(Te=>Tr(Te,Y));return e.modelValue===null&&h===!0?de.filter(Te=>Te!==null):de}return V}),L=p(()=>{const h={};return Sm.forEach(V=>{const Y=e[V];Y!==void 0&&(h[V]=Y)}),h}),ie=p(()=>e.optionsDark===null?g.isDark.value:e.optionsDark),le=p(()=>Hi(v.value)),E=p(()=>{let h="q-field__input q-placeholder col";return e.hideSelected===!0||v.value.length===0?[h,e.inputClass]:(h+=" q-field__input--padding",e.inputClass===void 0?h:[h,e.inputClass])}),q=p(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Se=p(()=>C.value===0),O=p(()=>v.value.map(h=>M.value(h)).join(", ")),Re=p(()=>e.displayValue!==void 0?e.displayValue:O.value),ht=p(()=>e.optionsHtml===!0?()=>!0:h=>h?.html===!0),tn=p(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||v.value.some(ht.value))),pt=p(()=>g.focused.value===!0?e.tabindex:-1),It=p(()=>{const h={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${g.targetUid.value}_lb`};return l.value>=0&&(h["aria-activedescendant"]=`${g.targetUid.value}_${l.value}`),h}),Rt=p(()=>({id:`${g.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Vt=p(()=>v.value.map((h,V)=>({index:V,opt:h,html:ht.value(h),selected:!0,removeAtIndex:_e,toggleOption:Ge,tabindex:pt.value}))),Ln=p(()=>{if(C.value===0)return[];const{from:h,to:V}=R.value;return e.options.slice(h,V).map((Y,de)=>{const Te=G.value(Y)===!0,Ce=vn(Y)===!0,Qe=h+de,Fe={clickable:!0,active:Ce,activeClass:sn.value,manualFocus:!0,focused:!1,disable:Te,tabindex:-1,dense:e.optionsDense,dark:ie.value,role:"option","aria-selected":Ce===!0?"true":"false",id:`${g.targetUid.value}_${Qe}`,onClick:()=>{Ge(Y)}};return Te!==!0&&(l.value===Qe&&(Fe.focused=!0),s.platform.is.desktop===!0&&(Fe.onMousemove=()=>{r.value===!0&&Dt(Qe)})),{index:Qe,opt:Y,html:ht.value(Y),label:M.value(Y),selected:Fe.active,focused:Fe.focused,toggleOption:Ge,setOptionIndex:Dt,itemProps:Fe}})}),nn=p(()=>e.dropdownIcon!==void 0?e.dropdownIcon:s.iconSet.arrow.dropdown),qn=p(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),sn=p(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),tt=p(()=>Lr(e.optionValue,"value")),M=p(()=>Lr(e.optionLabel,"label")),G=p(()=>Lr(e.optionDisable,"disable")),se=p(()=>v.value.map(tt.value)),Oe=p(()=>{const h={onInput:Yl,onChange:H,onKeydown:Ll,onKeyup:Al,onKeypress:Fl,onFocus:yt,onClick(V){_===!0&&ln(V)}};return h.onCompositionstart=h.onCompositionupdate=h.onCompositionend=H,h});he(v,h=>{m=h,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&g.innerLoading.value!==!0&&(o.value!==!0&&r.value!==!0||le.value!==!0)&&(I!==!0&&Un(),(o.value===!0||r.value===!0)&&Yn(""))},{immediate:!0}),he(()=>e.fillInput,Un),he(r,Er),he(C,mf);function De(h){return e.emitValue===!0?tt.value(h):h}function ye(h){if(h!==-1&&h<v.value.length)if(e.multiple===!0){const V=e.modelValue.slice();n("remove",{index:h,value:V.splice(h,1)[0]}),n("update:modelValue",V)}else n("update:modelValue",null)}function _e(h){ye(h),g.focus()}function Be(h,V){const Y=De(h);if(e.multiple!==!0){e.fillInput===!0&&pi(M.value(h),!0,!0),n("update:modelValue",Y);return}if(v.value.length===0){n("add",{index:0,value:Y}),n("update:modelValue",e.multiple===!0?[Y]:Y);return}if(V===!0&&vn(h)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const de=e.modelValue.slice();n("add",{index:de.length,value:Y}),de.push(Y),n("update:modelValue",de)}function Ge(h,V){if(g.editable.value!==!0||h===void 0||G.value(h)===!0)return;const Y=tt.value(h);if(e.multiple!==!0){V!==!0&&(pi(e.fillInput===!0?M.value(h):"",!0,!0),_n()),F.value?.focus(),(v.value.length===0||jn(tt.value(v.value[0]),Y)!==!0)&&n("update:modelValue",e.emitValue===!0?Y:h);return}if((_!==!0||u.value===!0)&&g.focus(),yt(),v.value.length===0){const Ce=e.emitValue===!0?Y:h;n("add",{index:0,value:Ce}),n("update:modelValue",e.multiple===!0?[Ce]:Ce);return}const de=e.modelValue.slice(),Te=se.value.findIndex(Ce=>jn(Ce,Y));if(Te!==-1)n("remove",{index:Te,value:de.splice(Te,1)[0]});else{if(e.maxValues!==void 0&&de.length>=e.maxValues)return;const Ce=e.emitValue===!0?Y:h;n("add",{index:de.length,value:Ce}),de.push(Ce)}n("update:modelValue",de)}function Dt(h){if(s.platform.is.desktop!==!0)return;const V=h!==-1&&h<C.value?h:-1;l.value!==V&&(l.value=V)}function Vn(h=1,V){if(r.value===!0){let Y=l.value;do Y=ba(Y+h,-1,C.value-1);while(Y!==-1&&Y!==l.value&&G.value(e.options[Y])===!0);l.value!==Y&&(Dt(Y),X(Y),V!==!0&&e.useInput===!0&&e.fillInput===!0&&ds(Y>=0?M.value(e.options[Y]):$,!0))}}function Tr(h,V){const Y=de=>jn(tt.value(de),h);return e.options.find(Y)||V.find(Y)||h}function vn(h){const V=tt.value(h);return se.value.find(Y=>jn(Y,V))!==void 0}function yt(h){e.useInput===!0&&F.value!==null&&(h===void 0||F.value===h.target&&h.target.value===O.value)&&F.value.select()}function Ol(h){di(h,27)===!0&&r.value===!0&&(ln(h),_n(),Un()),n("keyup",h)}function Al(h){const{value:V}=h.target;if(h.keyCode!==void 0){Ol(h);return}if(h.target.value="",d!==null&&(clearTimeout(d),d=null),f!==null&&(clearTimeout(f),f=null),Un(),typeof V=="string"&&V.length!==0){const Y=V.toLocaleLowerCase(),de=Ce=>{const Qe=e.options.find(Fe=>String(Ce.value(Fe)).toLocaleLowerCase()===Y);return Qe===void 0?!1:(v.value.indexOf(Qe)===-1?Ge(Qe):_n(),!0)},Te=Ce=>{de(tt)!==!0&&Ce!==!0&&de(M)!==!0&&Yn(V,!0,()=>Te(!0))};Te()}else g.clearValue(h)}function Fl(h){n("keypress",h)}function Ll(h){if(n("keydown",h),Co(h)===!0)return;const V=a.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),Y=h.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(l.value!==-1||V===!0);if(h.keyCode===27){Ot(h);return}if(h.keyCode===9&&Y===!1){Wn();return}if(h.target===void 0||h.target.id!==g.targetUid.value||g.editable.value!==!0)return;if(h.keyCode===40&&g.innerLoading.value!==!0&&r.value===!1){Ze(h),Hn();return}if(h.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&a.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ye(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(h.keyCode===35||h.keyCode===36)&&(typeof a.value!="string"||a.value.length===0)&&(Ze(h),l.value=-1,Vn(h.keyCode===36?1:-1,e.multiple)),(h.keyCode===33||h.keyCode===34)&&z.value!==void 0&&(Ze(h),l.value=Math.max(-1,Math.min(C.value,l.value+(h.keyCode===33?-1:1)*z.value.view)),Vn(h.keyCode===33?1:-1,e.multiple)),(h.keyCode===38||h.keyCode===40)&&(Ze(h),Vn(h.keyCode===38?-1:1,e.multiple));const de=C.value;if((S===void 0||b<Date.now())&&(S=""),de>0&&e.useInput!==!0&&h.key!==void 0&&h.key.length===1&&h.altKey===!1&&h.ctrlKey===!1&&h.metaKey===!1&&(h.keyCode!==32||S.length!==0)){r.value!==!0&&Hn(h);const Te=h.key.toLocaleLowerCase(),Ce=S.length===1&&S[0]===Te;b=Date.now()+1500,Ce===!1&&(Ze(h),S+=Te);const Qe=new RegExp("^"+S.split("").map(xr=>wm.indexOf(xr)!==-1?"\\"+xr:xr).join(".*"),"i");let Fe=l.value;if(Ce===!0||Fe<0||Qe.test(M.value(e.options[Fe]))!==!0)do Fe=ba(Fe+1,-1,de-1);while(Fe!==l.value&&(G.value(e.options[Fe])===!0||Qe.test(M.value(e.options[Fe]))!==!0));l.value!==Fe&&Ye(()=>{Dt(Fe),X(Fe),Fe>=0&&e.useInput===!0&&e.fillInput===!0&&ds(M.value(e.options[Fe]),!0)});return}if(!(h.keyCode!==13&&(h.keyCode!==32||e.useInput===!0||S!=="")&&(h.keyCode!==9||Y===!1))){if(h.keyCode!==9&&Ze(h),l.value!==-1&&l.value<de){Ge(e.options[l.value]);return}if(V===!0){const Te=(Ce,Qe)=>{if(Qe){if(Ca(Qe)!==!0)return}else Qe=e.newValueMode;if(pi("",e.multiple!==!0,!0),Ce==null)return;(Qe==="toggle"?Ge:Be)(Ce,Qe==="add-unique"),e.multiple!==!0&&(F.value?.focus(),_n())};if(e.onNewValue!==void 0?n("newValue",a.value,Te):Te(a.value),e.multiple!==!0)return}r.value===!0?Wn():g.innerLoading.value!==!0&&Hn()}}function ql(){return _===!0?k.value:j.value!==null&&j.value.contentEl!==null?j.value.contentEl:void 0}function tf(){return ql()}function nf(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?Vt.value.map(h=>t["selected-item"](h)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?Vt.value.map((h,V)=>y(Jr,{key:"option-"+V,removable:g.editable.value===!0&&G.value(h.opt)!==!0,dense:!0,textColor:e.color,tabindex:pt.value,onRemove(){h.removeAtIndex(V)}},()=>y("span",{class:"ellipsis",[h.html===!0?"innerHTML":"textContent"]:M.value(h.opt)}))):[y("span",{class:"ellipsis",[tn.value===!0?"innerHTML":"textContent"]:Re.value})]}function Vl(){if(Se.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:a.value}):void 0;const h=t.option!==void 0?t.option:Y=>y(Bh,{key:Y.index,...Y.itemProps},()=>y(zh,()=>y($h,()=>y("span",{[Y.html===!0?"innerHTML":"textContent"]:Y.label}))));let V=J("div",Ln.value.map(h));return t["before-options"]!==void 0&&(V=t["before-options"]().concat(V)),tr(t["after-options"],V)}function sf(h,V){const Y=V===!0?{...It.value,...g.splitAttrs.attributes.value}:void 0,de={ref:V===!0?F:void 0,key:"i_t",class:E.value,style:e.inputStyle,value:a.value!==void 0?a.value:"",type:"search",...Y,id:V===!0?g.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":h===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Oe.value};return h!==!0&&_===!0&&(Array.isArray(de.class)===!0?de.class=[...de.class,"no-pointer-events"]:de.class+=" no-pointer-events"),y("input",de)}function Yl(h){d!==null&&(clearTimeout(d),d=null),f!==null&&(clearTimeout(f),f=null),!(h&&h.target&&h.target.qComposing===!0)&&(ds(h.target.value||""),I=!0,$=a.value,g.focused.value!==!0&&(_!==!0||u.value===!0)&&g.focus(),e.onFilter!==void 0&&(d=setTimeout(()=>{d=null,Yn(a.value)},e.inputDebounce)))}function ds(h,V){a.value!==h&&(a.value=h,V===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",h):f=setTimeout(()=>{f=null,n("inputValue",h)},e.inputDebounce))}function pi(h,V,Y){I=Y!==!0,e.useInput===!0&&(ds(h,!0),(V===!0||Y!==!0)&&($=h),V!==!0&&Yn(h))}function Yn(h,V,Y){if(e.onFilter===void 0||V!==!0&&g.focused.value!==!0)return;g.innerLoading.value===!0?n("filterAbort"):(g.innerLoading.value=!0,c.value=!0),h!==""&&e.multiple!==!0&&v.value.length!==0&&I!==!0&&h===M.value(v.value[0])&&(h="");const de=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);w!==null&&clearTimeout(w),w=de,n("filter",h,(Te,Ce)=>{(V===!0||g.focused.value===!0)&&w===de&&(clearTimeout(w),typeof Te=="function"&&Te(),c.value=!1,Ye(()=>{g.innerLoading.value=!1,g.editable.value===!0&&(V===!0?r.value===!0&&_n():r.value===!0?Er(!0):r.value=!0),typeof Ce=="function"&&Ye(()=>{Ce(i)}),typeof Y=="function"&&Ye(()=>{Y(i)})}))},()=>{g.focused.value===!0&&w===de&&(clearTimeout(w),g.innerLoading.value=!1,c.value=!1),r.value===!0&&(r.value=!1)})}function rf(){return y(Qu,{ref:j,class:q.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Se.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:ie.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:qn.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Rt.value,onScrollPassive:P,onBeforeShow:Hl,onBeforeHide:of,onShow:lf},Vl)}function of(h){Ul(h),Wn()}function lf(){re()}function af(h){ln(h),F.value?.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function uf(h){ln(h),Ye(()=>{u.value=!1})}function cf(){const h=[y(Uh,{class:`col-auto ${g.fieldClass.value}`,...L.value,for:g.targetUid.value,dark:ie.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:a.value.length!==0,...g.splitAttrs.listeners.value,onFocus:af,onBlur:uf},{...t,rawControl:()=>g.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&h.push(y("div",{ref:k,class:q.value+" scroll",style:e.popupContentStyle,...Rt.value,onClick:Ot,onScrollPassive:P},Vl())),y(vm,{ref:K,modelValue:o.value,position:e.useInput===!0?"top":void 0,transitionShow:N,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Hl,onBeforeHide:df,onHide:ff,onShow:hf},()=>y("div",{class:"q-select__dialog"+(ie.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},h))}function df(h){Ul(h),K.value!==null&&K.value.__updateRefocusTarget(g.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),g.focused.value=!1}function ff(h){_n(),g.focused.value===!1&&n("blur",h),Un()}function hf(){const h=document.activeElement;(h===null||h.id!==g.targetUid.value)&&F.value!==null&&F.value!==h&&F.value.focus(),re()}function Wn(){o.value!==!0&&(l.value=-1,r.value===!0&&(r.value=!1),g.focused.value===!1&&(w!==null&&(clearTimeout(w),w=null),g.innerLoading.value===!0&&(n("filterAbort"),g.innerLoading.value=!1,c.value=!1)))}function Hn(h){g.editable.value===!0&&(_===!0?(g.onControlFocusin(h),o.value=!0,Ye(()=>{g.focus()})):g.focus(),e.onFilter!==void 0?Yn(a.value):(Se.value!==!0||t["no-option"]!==void 0)&&(r.value=!0))}function _n(){o.value=!1,Wn()}function Un(){e.useInput===!0&&pi(e.multiple!==!0&&e.fillInput===!0&&v.value.length!==0&&M.value(v.value[0])||"",!0,!0)}function Er(h){let V=-1;if(h===!0){if(v.value.length!==0){const Y=tt.value(v.value[0]);V=e.options.findIndex(de=>jn(tt.value(de),Y))}U(V)}Dt(V)}function mf(h,V){r.value===!0&&g.innerLoading.value===!1&&(U(-1,!0),Ye(()=>{r.value===!0&&g.innerLoading.value===!1&&(h>V?U():Er(!0))}))}function Wl(){o.value===!1&&j.value!==null&&j.value.updatePosition()}function Hl(h){h!==void 0&&ln(h),n("popupShow",h),g.hasPopupOpen=!0,g.onControlFocusin(h)}function Ul(h){h!==void 0&&ln(h),n("popupHide",h),g.hasPopupOpen=!1,g.onControlFocusout(h)}function Bl(){_=s.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||Se.value===!1:!0),N=s.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return bu(Bl),Df(Wl),Bl(),st(()=>{d!==null&&clearTimeout(d),f!==null&&clearTimeout(f)}),Object.assign(i,{showPopup:Hn,hidePopup:_n,removeAtIndex:ye,add:Be,toggleOption:Ge,getOptionIndex:()=>l.value,setOptionIndex:Dt,moveOptionSelection:Vn,filter:Yn,updateMenuPosition:Wl,updateInputValue:pi,isOptionSelected:vn,getEmittingOptionValue:De,isOptionDisabled:(...h)=>G.value.apply(null,h)===!0,getOptionValue:(...h)=>tt.value.apply(null,h),getOptionLabel:(...h)=>M.value.apply(null,h)}),Object.assign(g,{innerValue:v,fieldClass:p(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Q,targetRef:F,hasValue:le,showPopup:Hn,floatingLabel:p(()=>e.hideSelected!==!0&&le.value===!0||typeof a.value=="number"||a.value.length!==0||Hi(e.displayValue)),getControlChild:()=>{if(g.editable.value!==!1&&(o.value===!0||Se.value!==!0||t["no-option"]!==void 0))return _===!0?cf():rf();g.hasPopupOpen===!0&&(g.hasPopupOpen=!1)},controlEvents:{onFocusin(h){g.onControlFocusin(h)},onFocusout(h){g.onControlFocusout(h,()=>{Un(),Wn()})},onClick(h){if(Ot(h),_!==!0&&r.value===!0){Wn(),F.value?.focus();return}Hn(h)}},getControl:h=>{const V=nf(),Y=h===!0||o.value!==!0||_!==!0;if(e.useInput===!0)V.push(sf(h,Y));else if(g.editable.value===!0){const Te=Y===!0?It.value:void 0;V.push(y("input",{ref:Y===!0?F:void 0,key:"d_t",class:"q-select__focus-target",id:Y===!0?g.targetUid.value:void 0,value:Re.value,readonly:!0,"data-autofocus":h===!0||e.autofocus===!0||void 0,...Te,onKeydown:Ll,onKeyup:Ol,onKeypress:Fl})),Y===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&V.push(y("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Al}))}if(T.value!==void 0&&e.disable!==!0&&se.value.length!==0){const Te=se.value.map(Ce=>y("option",{value:Ce,selected:!0}));V.push(y("select",{class:"hidden",name:T.value,multiple:e.multiple},Te))}const de=e.useInput===!0||Y!==!0?void 0:g.splitAttrs.attributes.value;return y("div",{class:"q-field__native row items-center",...de,...g.splitAttrs.listeners.value},V)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[y(vt,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:nn.value})]:null}),Ro(g)}}),bm=["top","middle","bottom"],Cm=We({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>bm.includes(e)}},setup(e,{slots:t}){const n=p(()=>e.align!==void 0?{verticalAlign:e.align}:null),i=p(()=>{const s=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(s!==void 0?` text-${s}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>y("div",{class:i.value,style:n.value,role:"status","aria-label":e.label},tr(t.default,e.label!==void 0?[e.label]:[]))}});function Di(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const i=e.valueOf();if(Object(i)!==i){const s=new e.constructor(i);return t.set(e,s),s}}return t.set(e,n),e instanceof Set?e.forEach(i=>{n.add(Di(i,t))}):e instanceof Map&&e.forEach((i,s)=>{n.set(s,Di(i,t))}),Object.assign(n,...Object.keys(e).map(i=>({[i]:Di(e[i],t)})))}const km=We({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:i}=Pe(),{$q:s}=i,r=B(null),o=B(""),l=B("");let a=!1;const u=p(()=>nr({initialValue:o.value,validate:e.validate,set:c,cancel:d,updatePosition:f},"value",()=>l.value,b=>{l.value=b}));function c(){e.validate(l.value)!==!1&&(m()===!0&&(n("save",l.value,o.value),n("update:modelValue",l.value)),_())}function d(){m()===!0&&n("cancel",l.value,o.value),_()}function f(){Ye(()=>{r.value.updatePosition()})}function m(){return jn(l.value,o.value)===!1}function _(){a=!0,r.value.hide()}function I(){a=!1,o.value=Di(e.modelValue),l.value=Di(e.modelValue),n("beforeShow")}function w(){n("show")}function $(){a===!1&&m()===!0&&(e.autoSave===!0&&e.validate(l.value)===!0?(n("save",l.value,o.value),n("update:modelValue",l.value)):n("cancel",l.value,o.value)),n("beforeHide")}function N(){n("hide")}function S(){const b=t.default!==void 0?[].concat(t.default(u.value)):[];return e.title&&b.unshift(y("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&b.push(y("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[y(nt,{flat:!0,color:e.color,label:e.labelCancel||s.lang.label.cancel,onClick:d}),y(nt,{flat:!0,color:e.color,label:e.labelSet||s.lang.label.set,onClick:c})])),b}return Object.assign(i,{set:c,cancel:d,show(b){r.value?.show(b)},hide(b){r.value?.hide(b)},updatePosition:f}),()=>{if(e.disable!==!0)return y(Qu,{ref:r,class:"q-popup-edit",cover:e.cover,onBeforeShow:I,onShow:w,onBeforeHide:$,onHide:N,onEscapeKey:d},S)}}}),Tm={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},qr={xs:2,sm:4,md:8,lg:16,xl:24},Ta=We({name:"QSeparator",props:{...Pn,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=Pe(),n=On(e,t.proxy.$q),i=p(()=>e.vertical===!0?"vertical":"horizontal"),s=p(()=>` q-separator--${i.value}`),r=p(()=>e.inset!==!1?`${s.value}-${Tm[e.inset]}`:""),o=p(()=>`q-separator${s.value}${r.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),l=p(()=>{const a={};if(e.size!==void 0&&(a[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const u=e.spaced===!0?`${qr.md}px`:e.spaced in qr?`${qr[e.spaced]}px`:e.spaced,c=e.vertical===!0?["Left","Right"]:["Top","Bottom"];a[`margin${c[0]}`]=a[`margin${c[1]}`]=u}return a});return()=>y("hr",{class:o.value,style:l.value,"aria-orientation":i.value})}}),No={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Em=Object.keys(No);No.all=!0;function Ea(e){const t={};for(const n of Em)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?No:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const xm=["INPUT","TEXTAREA"];function xa(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&xm.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Mm(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,i)=>{const s=parseFloat(n);s&&(t[i]=s)}),t}const Im=Iu({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:i}){if(i.mouse!==!0&&it.has.touch!==!0)return;const s=i.mouseCapture===!0?"Capture":"",r={handler:t,sensitivity:Mm(n),direction:Ea(i),noop:Mu,mouseStart(o){xa(o,r)&&Nf(o)&&(Qn(r,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(o,!0))},touchStart(o){if(xa(o,r)){const l=o.target;Qn(r,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),r.start(o)}},start(o,l){it.is.firefox===!0&&Mr(e,!0);const a=Zr(o);r.event={x:a.left,y:a.top,time:Date.now(),mouse:l===!0,dir:!1}},move(o){if(r.event===void 0)return;if(r.event.dir!==!1){Ze(o);return}const l=Date.now()-r.event.time;if(l===0)return;const a=Zr(o),u=a.left-r.event.x,c=Math.abs(u),d=a.top-r.event.y,f=Math.abs(d);if(r.event.mouse!==!0){if(c<r.sensitivity[1]&&f<r.sensitivity[1]){r.end(o);return}}else if(window.getSelection().toString()!==""){r.end(o);return}else if(c<r.sensitivity[2]&&f<r.sensitivity[2])return;const m=c/l,_=f/l;r.direction.vertical===!0&&c<f&&c<100&&_>r.sensitivity[0]&&(r.event.dir=d<0?"up":"down"),r.direction.horizontal===!0&&c>f&&f<100&&m>r.sensitivity[0]&&(r.event.dir=u<0?"left":"right"),r.direction.up===!0&&c<f&&d<0&&c<100&&_>r.sensitivity[0]&&(r.event.dir="up"),r.direction.down===!0&&c<f&&d>0&&c<100&&_>r.sensitivity[0]&&(r.event.dir="down"),r.direction.left===!0&&c>f&&u<0&&f<100&&m>r.sensitivity[0]&&(r.event.dir="left"),r.direction.right===!0&&c>f&&u>0&&f<100&&m>r.sensitivity[0]&&(r.event.dir="right"),r.event.dir!==!1?(Ze(o),r.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Fu(),r.styleCleanup=I=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const w=()=>{document.body.classList.remove("no-pointer-events--children")};I===!0?setTimeout(w,50):w()}),r.handler({evt:o,touch:r.event.mouse!==!0,mouse:r.event.mouse,direction:r.event.dir,duration:l,distance:{x:c,y:f}})):r.end(o)},end(o){r.event!==void 0&&(Ts(r,"temp"),it.is.firefox===!0&&Mr(e,!1),r.styleCleanup?.(!0),o!==void 0&&r.event.dir!==!1&&Ze(o),r.event=void 0)}};if(e.__qtouchswipe=r,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Qn(r,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}it.has.touch===!0&&Qn(r,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=Ea(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(Ts(t,"main"),Ts(t,"temp"),it.is.firefox===!0&&Mr(e,!1),t.styleCleanup?.(),delete e.__qtouchswipe)}});function Rm(){let e=Object.create(null);return{getCache:(t,n)=>e[t]===void 0?e[t]=typeof n=="function"?n():n:e[t],setCache(t,n){e[t]=n},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const Dm={name:{required:!0},disable:Boolean},Ma={setup(e,{slots:t}){return()=>y("div",{class:"q-panel scroll",role:"tabpanel"},lt(t.default))}},Nm={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Pm=["update:modelValue","beforeTransition","transition"];function Om(){const{props:e,emit:t,proxy:n}=Pe(),{getCache:i}=Rm(),{registerTimeout:s}=Vi();let r,o;const l=B(null),a={value:null};function u(R){const z=e.vertical===!0?"up":"left";K((n.$q.lang.rtl===!0?-1:1)*(R.direction===z?1:-1))}const c=p(()=>[[Im,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=p(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),f=p(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),m=p(()=>`--q-transition-duration: ${e.transitionDuration}ms`),_=p(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),I=p(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=p(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);he(()=>e.modelValue,(R,z)=>{const U=b(R)===!0?Q(R):-1;o!==!0&&j(U===-1?0:U<Q(z)?-1:1),a.value!==U&&(a.value=U,t("beforeTransition",R,z),s(()=>{t("transition",R,z)},e.transitionDuration))});function $(){K(1)}function N(){K(-1)}function S(R){t("update:modelValue",R)}function b(R){return R!=null&&R!==""}function Q(R){return r.findIndex(z=>z.props.name===R&&z.props.disable!==""&&z.props.disable!==!0)}function F(){return r.filter(R=>R.props.disable!==""&&R.props.disable!==!0)}function j(R){const z=R!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(R===-1?d.value:f.value):null;l.value!==z&&(l.value=z)}function K(R,z=a.value){let U=z+R;for(;U!==-1&&U<r.length;){const J=r[U];if(J!==void 0&&J.props.disable!==""&&J.props.disable!==!0){j(R),o=!0,t("update:modelValue",J.props.name),setTimeout(()=>{o=!1});return}U+=R}e.infinite===!0&&r.length!==0&&z!==-1&&z!==r.length&&K(R,R===-1?r.length:-1)}function k(){const R=Q(e.modelValue);return a.value!==R&&(a.value=R),!0}function T(){const R=b(e.modelValue)===!0&&k()&&r[a.value];return e.keepAlive===!0?[y(Of,I.value,[y(w.value===!0?i(_.value,()=>({...Ma,name:_.value})):Ma,{key:_.value,style:m.value},()=>R)])]:[y("div",{class:"q-panel scroll",style:m.value,key:_.value,role:"tabpanel"},[R])]}function H(){if(r.length!==0)return e.animated===!0?[y(qi,{name:l.value},T)]:T()}function C(R){return r=Pf(lt(R.default,[])).filter(z=>z.props!==null&&z.props.slot===void 0&&b(z.props.name)===!0),r.length}function ee(){return r}return Object.assign(n,{next:$,previous:N,goTo:S}),{panelIndex:a,panelDirectives:c,updatePanelsList:C,updatePanelIndex:k,getPanelContent:H,getEnabledPanels:F,getPanels:ee,isValidPanelName:b,keepAliveProps:I,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:K,goToPanel:S,nextPanel:$,previousPanel:N}}const Ia=We({name:"QTabPanel",props:Dm,setup(e,{slots:t}){return()=>y("div",{class:"q-tab-panel",role:"tabpanel"},lt(t.default))}});function Am(e,t){const n=B(null),i=p(()=>e.disable===!0?null:y("span",{ref:n,class:"no-outline",tabindex:-1}));function s(r){const o=t.value;r?.qAvoidFocus!==!0&&(r?.type.indexOf("key")===0?document.activeElement!==o&&o?.contains(document.activeElement)===!0&&o.focus():n.value!==null&&(r===void 0||o?.contains(r.target)===!0)&&n.value.focus())}return{refocusTargetEl:i,refocusTarget:s}}const Fm={xs:30,sm:35,md:40,lg:50,xl:60},Lm=()=>y("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[y("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),y("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),ws=We({name:"QRadio",props:{...Pn,...ku,...Do,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:i}=Pe(),s=On(e,i.$q),r=Tu(e,Fm),o=B(null),{refocusTargetEl:l,refocusTarget:a}=Am(e,o),u=p(()=>$l(e.modelValue)===$l(e.val)),c=p(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),d=p(()=>{const b=e.color!==void 0&&(e.keepColor===!0||u.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${b}`}),f=p(()=>(u.value===!0?e.checkedIcon:e.uncheckedIcon)||null),m=p(()=>e.disable===!0?-1:e.tabindex||0),_=p(()=>{const b={type:"radio"};return e.name!==void 0&&Object.assign(b,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:e.name,value:e.val}),b}),I=Fh(_);function w(b){b!==void 0&&(Ze(b),a(b)),e.disable!==!0&&u.value!==!0&&n("update:modelValue",e.val,b)}function $(b){(b.keyCode===13||b.keyCode===32)&&Ze(b)}function N(b){(b.keyCode===13||b.keyCode===32)&&w(b)}Object.assign(i,{set:w});const S=Lm();return()=>{const b=f.value!==null?[y("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[y(vt,{class:"q-radio__icon",name:f.value})])]:[S];e.disable!==!0&&I(b,"unshift"," q-radio__native q-ma-none q-pa-none");const Q=[y("div",{class:d.value,style:r.value,"aria-hidden":"true"},b)];l.value!==null&&Q.push(l.value);const F=e.label!==void 0?tr(t.default,[e.label]):lt(t.default);return F!==void 0&&Q.push(y("div",{class:"q-radio__label q-anchor--skip"},F)),y("div",{ref:o,class:c.value,tabindex:m.value,role:"radio","aria-label":e.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:w,onKeydown:$,onKeyup:N},Q)}}}),qm=We({name:"QTabPanels",props:{...Nm,...Pn},emits:Pm,setup(e,{slots:t}){const n=Pe(),i=On(e,n.proxy.$q),{updatePanelsList:s,getPanelContent:r,panelDirectives:o}=Om(),l=p(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(t),Eu("div",{class:l.value},r(),"pan",e.swipeable,()=>o.value))}}),Vm=We({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Pe(),i=Ds(Af,Ht);if(i===Ht)return console.error("QPage needs to be a deep child of QLayout"),Ht;if(Ds(Ff,Ht)===Ht)return console.error("QPage needs to be child of QPageContainer"),Ht;const r=p(()=>{const l=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof e.styleFn=="function"){const a=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return e.styleFn(l,a)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-l+"px":n.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":n.screen.height-l+"px"}}),o=p(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>y("main",{class:o.value,style:r.value},lt(t.default))}});function Ra(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const Ym=Iu({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Ra(t),handler(i){n.depth!==0&&setTimeout(()=>{const s=Zh(e);s!==void 0&&Xh(s,i,n.depth)})},handlerKey(i){di(i,13)===!0&&n.handler(i)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Ra(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});var Da={};const Na="@firebase/database",Pa="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu="";function Wm(e){Zu=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),je(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:xo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Xt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Hm(t)}}catch{}return new Um},Sn=Xu("localStorage"),Bm=Xu("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Yf("@firebase/database"),zm=function(){let e=1;return function(){return e++}}(),Ju=function(e){const t=$f(e),n=new jf;n.update(t);const i=n.digest();return Gf.encodeByteArray(i)},ns=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=ns.apply(null,i):typeof i=="object"?t+=je(i):t+=i,t+=" "}return t};let Ni=null,Oa=!0;const $m=function(e,t){D(!0,"Can't turn on custom loggers persistently."),ei.logLevel=zf.VERBOSE,Ni=ei.log.bind(ei)},Je=function(...e){if(Oa===!0&&(Oa=!1,Ni===null&&Bm.get("logging_enabled")===!0&&$m()),Ni){const t=ns.apply(null,e);Ni(t)}},is=function(e){return function(...t){Je(e,...t)}},no=function(...e){const t="FIREBASE INTERNAL ERROR: "+ns(...e);ei.error(t)},Qt=function(...e){const t=`FIREBASE FATAL ERROR: ${ns(...e)}`;throw ei.error(t),new Error(t)},ct=function(...e){const t="FIREBASE WARNING: "+ns(...e);ei.warn(t)},jm=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ct("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ec=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Gm=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ai="[MIN_NAME]",Mn="[MAX_NAME]",fi=function(e,t){if(e===t)return 0;if(e===ai||t===Mn)return-1;if(t===ai||e===Mn)return 1;{const n=Aa(e),i=Aa(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},Qm=function(e,t){return e===t?0:e<t?-1:1},bi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+je(t))},Po=function(e){if(typeof e!="object"||e===null)return je(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=je(t[i]),n+=":",n+=Po(e[t[i]]);return n+="}",n},tc=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function dt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const nc=function(e){D(!ec(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let s,r,o,l,a;e===0?(r=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=l+i,o=Math.round(e*Math.pow(2,n-l)-Math.pow(2,n))):(r=0,o=Math.round(e/Math.pow(2,1-i-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=t;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(s?1:0),u.reverse();const c=u.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(c.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Km=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zm=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Xm(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}const Jm=new RegExp("^-?(0*)\\d{1,10}$"),ev=-2147483648,tv=2147483647,Aa=function(e){if(Jm.test(e)){const t=Number(e);if(t>=ev&&t<=tv)return t}return null},hi=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw ct("Exception was thrown by user callback.",n),t},Math.floor(0))}},nv=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pi=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Zf(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){ct(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ct(t)}}class xs{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}xs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="5",ic="v",sc="s",rc="r",oc="f",lc=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ac="ls",uc="p",io="ac",cc="websocket",dc="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,n,i,s,r=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Sn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function rv(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function hc(e,t,n){D(typeof t=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let i;if(t===cc)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===dc)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);rv(e)&&(n.ns=e.namespace);const s=[];return dt(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.counters_={}}incrementCounter(t,n=1){Xt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return nh(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr={},Yr={};function Ao(e){const t=e.toString();return Vr[t]||(Vr[t]=new ov),Vr[t]}function lv(e,t){const n=e.toString();return Yr[n]||(Yr[n]=t()),Yr[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&hi(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="start",uv="close",cv="pLPCommand",dv="pRTLPCB",mc="id",vc="pw",_c="ser",fv="cb",hv="seg",mv="ts",vv="d",_v="dframe",gc=1870,pc=30,gv=gc-pc,pv=25e3,yv=3e4;class Kn{constructor(t,n,i,s,r,o,l){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=is(t),this.stats_=Ao(n),this.urlFn=a=>(this.appCheckToken&&(a[io]=this.appCheckToken),hc(n,dc,a))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new av(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(yv)),Gm(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fo((...r)=>{const[o,l,a,u,c]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Fa)this.id=l,this.password=a;else if(o===uv)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[Fa]="t",i[_c]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[fv]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ic]=Oo,this.transportSessionId&&(i[sc]=this.transportSessionId),this.lastSessionId&&(i[ac]=this.lastSessionId),this.applicationId&&(i[uc]=this.applicationId),this.appCheckToken&&(i[io]=this.appCheckToken),typeof location<"u"&&location.hostname&&lc.test(location.hostname)&&(i[rc]=oc);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kn.forceAllow_=!0}static forceDisallow(){Kn.forceDisallow_=!0}static isAvailable(){return Kn.forceAllow_?!0:!Kn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Km()&&!Zm()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=je(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=ih(n),s=tc(i,gv);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[_v]="t",i[mc]=t,i[vc]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=je(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Fo{constructor(t,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=zm(),window[cv+this.uniqueCallbackIdentifier]=t,window[dv+this.uniqueCallbackIdentifier]=n,this.myIFrame=Fo.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Je("frame writing exception"),l.stack&&Je(l.stack),Je(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Je("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[mc]=this.myID,t[vc]=this.myPW,t[_c]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+pc+i.length<=gc;){const o=this.pendingSegs.shift();i=i+"&"+hv+s+"="+o.seg+"&"+mv+s+"="+o.ts+"&"+vv+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(pv)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Je("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=16384,Sv=45e3;let Ls=null;typeof MozWebSocket<"u"?Ls=MozWebSocket:typeof WebSocket<"u"&&(Ls=WebSocket);class St{constructor(t,n,i,s,r,o,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=is(this.connId),this.stats_=Ao(n),this.connURL=St.connectionURL_(n,o,l,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,s,r){const o={};return o[ic]=Oo,typeof location<"u"&&location.hostname&&lc.test(location.hostname)&&(o[rc]=oc),n&&(o[sc]=n),i&&(o[ac]=i),s&&(o[io]=s),r&&(o[uc]=r),hc(t,cc,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sn.set("previous_websocket_failure",!0);try{let i;sh(),this.mySock=new Ls(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){St.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Ls!==null&&!St.forceDisallow_}static previouslyFailed(){return Sn.isInMemoryStorage||Sn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Sn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=xo(n);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(D(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const n=je(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=tc(n,wv);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Sv))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}St.responsesRequiredToBeHealthy=2;St.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{static get ALL_TRANSPORTS(){return[Kn,St]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=St&&St.isAvailable();let i=n&&!St.previouslyFailed();if(t.webSocketOnly&&(n||ct("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[St];else{const s=this.transports_=[];for(const r of Ui.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);Ui.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ui.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=6e4,Cv=5e3,kv=10*1024,Tv=100*1024,Wr="t",La="d",Ev="s",qa="r",xv="e",Va="o",Ya="a",Wa="n",Ha="p",Mv="h";class Iv{constructor(t,n,i,s,r,o,l,a,u,c){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=is("c:"+this.id+":"),this.transportManager_=new Ui(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Pi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Tv?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kv?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Wr in t){const n=t[Wr];n===Ya?this.upgradeIfSecondaryHealthy_():n===qa?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Va&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=bi("t",t),i=bi("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ha,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ya,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wa,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=bi("t",t),i=bi("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=bi(Wr,t);if(La in t){const i=t[La];if(n===Mv){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Wa){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ev?this.onConnectionShutdown_(i):n===qa?this.onReset_(i):n===xv?no("Server Error: "+i):n===Va?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):no("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Oo!==i&&ct("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Pi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bv))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Cv))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ha,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(t){this.allowedEvents_=t,this.listeners_={},D(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){D(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends wc{static getInstance(){return new qs}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Du()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return D(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=32,Ba=768;class ke{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function we(){return new ke("")}function ue(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function fn(e){return e.pieces_.length-e.pieceNum_}function Ee(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ke(e.pieces_,t)}function Sc(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Rv(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function bc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Cc(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ke(t,0)}function He(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ke)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new ke(n,0)}function fe(e){return e.pieceNum_>=e.pieces_.length}function at(e,t){const n=ue(e),i=ue(t);if(n===null)return t;if(n===i)return at(Ee(e),Ee(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Lo(e,t){if(fn(e)!==fn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function bt(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(fn(e)>fn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Dv{constructor(t,n){this.errorPrefix_=n,this.parts_=bc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ir(this.parts_[i]);kc(this)}}function Nv(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ir(t),kc(e)}function Pv(e){const t=e.parts_.pop();e.byteLength_-=ir(t),e.parts_.length>0&&(e.byteLength_-=1)}function kc(e){if(e.byteLength_>Ba)throw new Error(e.errorPrefix_+"has a key path longer than "+Ba+" bytes ("+e.byteLength_+").");if(e.parts_.length>Ua)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ua+") or object contains a cycle "+yn(e))}function yn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends wc{static getInstance(){return new qo}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return D(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=1e3,Ov=60*5*1e3,za=30*1e3,Av=1.3,Fv=3e4,Lv="server_kill",$a=3;class $t extends yc{constructor(t,n,i,s,r,o,l,a){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=$t.nextPersistentConnectionId_++,this.log_=is("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ci,this.maxReconnectDelay_=Ov,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qo.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&qs.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const s=++this.requestNumber_,r={r:s,a:t,b:n};this.log_(je(r)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const n=new To,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(t,n,i,s){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),D(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:t,tag:i};this.listens.get(o).set(r,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(t){const n=t.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";t.tag&&(r.q=n._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest(o,r,l=>{const a=l.d,u=l.s;$t.warnOnListenWarnings_(a,n),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,a))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Xt(t,"w")){const i=oi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();ct(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Jf(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=za)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=eh(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===t&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,i=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(t,n){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),D(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,n)}sendUnlisten_(t,n,i,s){this.log_("Unlisten on "+t+" for "+n);const r={p:t},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,n,i,s){this.putInternal("p",t,n,i,s)}merge(t,n,i,s){this.putInternal("m",t,n,i,s)}putInternal(t,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+je(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):no("Unrecognized action received from server: "+je(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Fv&&(this.reconnectDelay_=Ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Av)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+$t.nextConnectionId_++,r=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,i())},u=function(d){D(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new Iv(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,m=>{ct(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lv)},r))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ct(d),a())}}}interrupt(t){Je("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Je("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Gl(this.interruptReasons_)&&(this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;n?i=n.map(r=>Po(r)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const i=new ke(t).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,n){Je("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$a&&(this.reconnectDelay_=za,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Je("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$a&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+Zu.replace(/\./g,"-")]=1,Du()?t["framework.cordova"]=1:th()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=qs.getInstance().currentlyOnline();return Gl(this.interruptReasons_)&&t}}$t.nextPersistentConnectionId_=0;$t.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new ce(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new ce(ai,t),s=new ce(ai,n);return this.compare(i,s)!==0}minPost(){return ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ss;class Tc extends or{static get __EMPTY_NODE(){return Ss}static set __EMPTY_NODE(t){Ss=t}compare(t,n){return fi(t.name,n.name)}isDefinedOn(t){throw ts("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return ce.MIN}maxPost(){return new ce(Mn,Ss)}makePost(t,n){return D(typeof t=="string","KeyIndex indexValue must always be a string."),new ce(t,Ss)}toString(){return".key"}}const ti=new Tc;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class $e{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??$e.RED,this.left=s??ut.EMPTY_NODE,this.right=r??ut.EMPTY_NODE}copy(t,n,i,s,r){return new $e(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ut.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,s;if(i=this,n(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(t,i.key)===0){if(i.right.isEmpty())return ut.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}$e.RED=!0;$e.BLACK=!1;class qv{copy(t,n,i,s,r){return this}insert(t,n,i){return new $e(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ut{constructor(t,n=ut.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ut(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,$e.BLACK,null,null))}remove(t){return new ut(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$e.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new bs(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new bs(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new bs(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new bs(this.root_,null,this.comparator_,!0,t)}}ut.EMPTY_NODE=new qv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(e,t){return fi(e.name,t.name)}function Vo(e,t){return fi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so;function Yv(e){so=e}const Ec=function(e){return typeof e=="number"?"number:"+nc(e):"string:"+e},xc=function(e){if(e.isLeafNode()){const t=e.val();D(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Xt(t,".sv"),"Priority must be a string or number.")}else D(e===so||e.isEmpty(),"priority of unexpected type.");D(e===so||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja;class ze{static set __childrenNodeConstructor(t){ja=t}static get __childrenNodeConstructor(){return ja}constructor(t,n=ze.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xc(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ze(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ze.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return fe(t)?this:ue(t)===".priority"?this.priorityNode_:ze.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:ze.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=ue(t);return i===null?n:n.isEmpty()&&i!==".priority"?this:(D(i!==".priority"||fn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ze.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ee(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ec(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=nc(this.value_):t+=this.value_,this.lazyHash_=Ju(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ze.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ze.__childrenNodeConstructor?-1:(D(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,s=ze.VALUE_TYPE_ORDER.indexOf(n),r=ze.VALUE_TYPE_ORDER.indexOf(i);return D(s>=0,"Unknown leaf type: "+n),D(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ze.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc,Ic;function Wv(e){Mc=e}function Hv(e){Ic=e}class Uv extends or{compare(t,n){const i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?fi(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return ce.MIN}maxPost(){return new ce(Mn,new ze("[PRIORITY-POST]",Ic))}makePost(t,n){const i=Mc(t);return new ce(n,new ze("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ae=new Uv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=Math.log(2);class zv{constructor(t){const n=r=>parseInt(Math.log(r)/Bv,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Vs=function(e,t,n,i){e.sort(t);const s=function(a,u){const c=u-a;let d,f;if(c===0)return null;if(c===1)return d=e[a],f=n?n(d):d,new $e(f,d.node,$e.BLACK,null,null);{const m=parseInt(c/2,10)+a,_=s(a,m),I=s(m+1,u);return d=e[m],f=n?n(d):d,new $e(f,d.node,$e.BLACK,_,I)}},r=function(a){let u=null,c=null,d=e.length;const f=function(_,I){const w=d-_,$=d;d-=_;const N=s(w+1,$),S=e[w],b=n?n(S):S;m(new $e(b,S.node,I,null,N))},m=function(_){u?(u.left=_,u=_):(c=_,u=_)};for(let _=0;_<a.count;++_){const I=a.nextBitIsOne(),w=Math.pow(2,a.count-(_+1));I?f(w,$e.BLACK):(f(w,$e.BLACK),f(w,$e.RED))}return c},o=new zv(e.length),l=r(o);return new ut(i||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hr;const zn={};class Ut{static get Default(){return D(zn&&Ae,"ChildrenNode.ts has not been loaded"),Hr=Hr||new Ut({".priority":zn},{".priority":Ae}),Hr}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=oi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ut?n:null}hasIndex(t){return Xt(this.indexSet_,t.toString())}addIndex(t,n){D(t!==ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(ce.Wrap);let o=r.getNext();for(;o;)s=s||t.isDefinedOn(o.node),i.push(o),o=r.getNext();let l;s?l=Vs(i,t.getCompare()):l=zn;const a=t.toString(),u=Object.assign({},this.indexSet_);u[a]=t;const c=Object.assign({},this.indexes_);return c[a]=l,new Ut(c,u)}addToIndexes(t,n){const i=Ns(this.indexes_,(s,r)=>{const o=oi(this.indexSet_,r);if(D(o,"Missing index implementation for "+r),s===zn)if(o.isDefinedOn(t.node)){const l=[],a=n.getIterator(ce.Wrap);let u=a.getNext();for(;u;)u.name!==t.name&&l.push(u),u=a.getNext();return l.push(t),Vs(l,o.getCompare())}else return zn;else{const l=n.get(t.name);let a=s;return l&&(a=a.remove(new ce(t.name,l))),a.insert(t,t.node)}});return new Ut(i,this.indexSet_)}removeFromIndexes(t,n){const i=Ns(this.indexes_,s=>{if(s===zn)return s;{const r=n.get(t.name);return r?s.remove(new ce(t.name,r)):s}});return new Ut(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki;class te{static get EMPTY_NODE(){return ki||(ki=new te(new ut(Vo),null,Ut.Default))}constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&xc(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ki}updatePriority(t){return this.children_.isEmpty()?this:new te(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?ki:n}}getChild(t){const n=ue(t);return n===null?this:this.getImmediateChild(n).getChild(Ee(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(D(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const i=new ce(t,n);let s,r;n.isEmpty()?(s=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?ki:this.priorityNode_;return new te(s,o,r)}}updateChild(t,n){const i=ue(t);if(i===null)return n;{D(ue(t)!==".priority"||fn(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Ee(t),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(Ae,(o,l)=>{n[o]=l.val(t),i++,r&&te.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!t&&r&&s<2*i){const o=[];for(const l in n)o[l]=n[l];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ec(this.getPriority().val())+":"),this.forEachChild(Ae,(n,i)=>{const s=i.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":Ju(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new ce(t,n));return r?r.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new ce(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new ce(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ce.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ce.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)>0;)s.getNext(),r=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ss?-1:0}withIndex(t){if(t===ti||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new te(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===ti||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ae),s=n.getIterator(Ae);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===ti?null:this.indexMap_.get(t.toString())}}te.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class $v extends te{constructor(){super(new ut(Vo),te.EMPTY_NODE,Ut.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return te.EMPTY_NODE}isEmpty(){return!1}}const ss=new $v;Object.defineProperties(ce,{MIN:{value:new ce(ai,te.EMPTY_NODE)},MAX:{value:new ce(Mn,ss)}});Tc.__EMPTY_NODE=te.EMPTY_NODE;ze.__childrenNodeConstructor=te;Yv(ss);Hv(ss);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=!0;function Xe(e,t=null){if(e===null)return te.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),D(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new ze(n,Xe(t))}if(!(e instanceof Array)&&jv){const n=[];let i=!1;if(dt(e,(o,l)=>{if(o.substring(0,1)!=="."){const a=Xe(l);a.isEmpty()||(i=i||!a.getPriority().isEmpty(),n.push(new ce(o,a)))}}),n.length===0)return te.EMPTY_NODE;const r=Vs(n,Vv,o=>o.name,Vo);if(i){const o=Vs(n,Ae.getCompare());return new te(r,Xe(t),new Ut({".priority":o},{".priority":Ae}))}else return new te(r,Xe(t),Ut.Default)}else{let n=te.EMPTY_NODE;return dt(e,(i,s)=>{if(Xt(e,i)&&i.substring(0,1)!=="."){const r=Xe(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Xe(t))}}Wv(Xe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends or{constructor(t){super(),this.indexPath_=t,D(!fe(t)&&ue(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?fi(t.name,n.name):r}makePost(t,n){const i=Xe(t),s=te.EMPTY_NODE.updateChild(this.indexPath_,i);return new ce(n,s)}maxPost(){const t=te.EMPTY_NODE.updateChild(this.indexPath_,ss);return new ce(Mn,t)}toString(){return bc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends or{compare(t,n){const i=t.node.compareTo(n.node);return i===0?fi(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return ce.MIN}maxPost(){return ce.MAX}makePost(t,n){const i=Xe(t);return new ce(n,i)}toString(){return".value"}}const Kv=new Qv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(e){return{type:"value",snapshotNode:e}}function ui(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Bi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function zi(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Zv(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t){this.index_=t}updateChild(t,n,i,s,r,o){D(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(n);return l.getChild(s).equals(i.getChild(s))&&l.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?t.hasChild(n)?o.trackChildChange(Bi(n,l)):D(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(ui(n,i)):o.trackChildChange(zi(n,i,l))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(t,n,i){return i!=null&&(t.isLeafNode()||t.forEachChild(Ae,(s,r)=>{n.hasChild(s)||i.trackChildChange(Bi(s,r))}),n.isLeafNode()||n.forEachChild(Ae,(s,r)=>{if(t.hasChild(s)){const o=t.getImmediateChild(s);o.equals(r)||i.trackChildChange(zi(s,r,o))}else i.trackChildChange(ui(s,r))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?te.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t){this.indexedFilter_=new Yo(t.getIndex()),this.index_=t.getIndex(),this.startPost_=$i.getStartPost_(t),this.endPost_=$i.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&i}updateChild(t,n,i,s,r,o){return this.matches(new ce(n,i))||(i=te.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,i,s,r,o)}updateFullNode(t,n,i){n.isLeafNode()&&(n=te.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(te.EMPTY_NODE);const r=this;return n.forEachChild(Ae,(o,l)=>{r.matches(new ce(o,l))||(s=s.updateImmediateChild(o,te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new $i(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,i,s,r,o){return this.rangedFilter_.matches(new ce(n,i))||(i=te.EMPTY_NODE),t.getImmediateChild(n).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,i,s,r,o):this.fullLimitUpdateChild_(t,n,i,r,o)}updateFullNode(t,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=te.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=te.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const l=r.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(te.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const l=r.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,i,s,r){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,m)=>d(m,f)}else o=this.index_.getCompare();const l=t;D(l.numChildren()===this.limit_,"");const a=new ce(n,i),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,a);if(c&&!i.isEmpty()&&m>=0)return r?.trackChildChange(zi(n,i,d)),l.updateImmediateChild(n,i);{r?.trackChildChange(Bi(n,d));const I=l.updateImmediateChild(n,te.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(r?.trackChildChange(ui(f.name,f.node)),I.updateImmediateChild(f.name,f.node)):I}}else return i.isEmpty()?t:c&&o(u,a)>=0?(r!=null&&(r.trackChildChange(Bi(u.name,u.node)),r.trackChildChange(ui(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(u.name,te.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ai}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const t=new Wo;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Jv(e){return e.loadsAllData()?new Yo(e.getIndex()):e.hasLimit()?new Xv(e):new $i(e)}function Ga(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ae?n="$priority":e.index_===Kv?n="$value":e.index_===ti?n="$key":(D(e.index_ instanceof Gv,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=je(n),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";t[i]=je(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+je(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";t[i]=je(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+je(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Qa(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ae&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends yc{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(D(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=is("p:rest:"),this.listens_={}}listen(t,n,i,s){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=Ys.getListenId_(t,i),l={};this.listens_[o]=l;const a=Ga(t._queryParams);this.restRequest_(r+".json",a,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(r,d,!1,i),oi(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(t,n){const i=Ys.getListenId_(t,n);delete this.listens_[i]}get(t){const n=Ga(t._queryParams),i=t._path.toString(),s=new To;return this.restRequest_(i+".json",n,(r,o)=>{let l=o;r===404&&(l=null,r=null),r===null?(this.onDataUpdate_(i,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Xf(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=xo(l.responseText)}catch{ct("Failed to parse JSON response for "+o+": "+l.responseText)}i(null,a)}else l.status!==401&&l.status!==404&&ct("Got unsuccessful REST response for "+o+" Status: "+l.status),i(l.status);i=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.rootNode_=te.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return{value:null,children:new Map}}function Dc(e,t,n){if(fe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const i=ue(t);e.children.has(i)||e.children.set(i,Ws());const s=e.children.get(i);t=Ee(t),Dc(s,t,n)}}function ro(e,t,n){e.value!==null?n(t,e.value):t_(e,(i,s)=>{const r=new ke(t.toString()+"/"+i);ro(s,r,n)})}function t_(e,t){e.children.forEach((n,i)=>{t(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&dt(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=10*1e3,i_=30*1e3,s_=5*60*1e3;class r_{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new n_(t);const i=Ka+(i_-Ka)*Math.random();Pi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;dt(t,(s,r)=>{r>0&&Xt(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Pi(this.reportStats_.bind(this),Math.floor(Math.random()*2*s_))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ct||(Ct={}));function Nc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ho(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Uo(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Ct.ACK_USER_WRITE,this.source=Nc()}operationForChild(t){if(fe(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ke(t));return new Hs(we(),n,this.revert)}}else return D(ue(this.path)===t,"operationForChild called for unrelated child."),new Hs(Ee(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){this.source=t,this.path=n,this.type=Ct.LISTEN_COMPLETE}operationForChild(t){return fe(this.path)?new ji(this.source,we()):new ji(this.source,Ee(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Ct.OVERWRITE}operationForChild(t){return fe(this.path)?new In(this.source,we(),this.snap.getImmediateChild(t)):new In(this.source,Ee(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Ct.MERGE}operationForChild(t){if(fe(this.path)){const n=this.children.subtree(new ke(t));return n.isEmpty()?null:n.value?new In(this.source,we(),n.value):new Gi(this.source,we(),n)}else return D(ue(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gi(this.source,Ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(fe(t))return this.isFullyInitialized()&&!this.filtered_;const n=ue(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function l_(e,t,n,i){const s=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Zv(o.childName,o.snapshotNode))}),Ti(e,s,"child_removed",t,i,n),Ti(e,s,"child_added",t,i,n),Ti(e,s,"child_moved",r,i,n),Ti(e,s,"child_changed",t,i,n),Ti(e,s,"value",t,i,n),s}function Ti(e,t,n,i,s,r){const o=i.filter(l=>l.type===n);o.sort((l,a)=>u_(e,l,a)),o.forEach(l=>{const a=a_(e,l,r);s.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(a,e.query_))})})}function a_(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function u_(e,t,n){if(t.childName==null||n.childName==null)throw ts("Should only compare child_ events.");const i=new ce(t.childName,t.snapshotNode),s=new ce(n.childName,n.snapshotNode);return e.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(e,t){return{eventCache:e,serverCache:t}}function Oi(e,t,n,i){return lr(new Rn(t,n,i),e.serverCache)}function Pc(e,t,n,i){return lr(e.eventCache,new Rn(t,n,i))}function oo(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Dn(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur;const c_=()=>(Ur||(Ur=new ut(Qm)),Ur);class xe{static fromObject(t){let n=new xe(null);return dt(t,(i,s)=>{n=n.set(new ke(i),s)}),n}constructor(t,n=c_()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:we(),value:this.value};if(fe(t))return null;{const i=ue(t),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(Ee(t),n);return r!=null?{path:He(new ke(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(fe(t))return this;{const n=ue(t),i=this.children.get(n);return i!==null?i.subtree(Ee(t)):new xe(null)}}set(t,n){if(fe(t))return new xe(n,this.children);{const i=ue(t),r=(this.children.get(i)||new xe(null)).set(Ee(t),n),o=this.children.insert(i,r);return new xe(this.value,o)}}remove(t){if(fe(t))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=ue(t),i=this.children.get(n);if(i){const s=i.remove(Ee(t));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new xe(null):new xe(this.value,r)}else return this}}get(t){if(fe(t))return this.value;{const n=ue(t),i=this.children.get(n);return i?i.get(Ee(t)):null}}setTree(t,n){if(fe(t))return n;{const i=ue(t),r=(this.children.get(i)||new xe(null)).setTree(Ee(t),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new xe(this.value,o)}}fold(t){return this.fold_(we(),t)}fold_(t,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(He(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,we(),n)}findOnPath_(t,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(fe(t))return null;{const r=ue(t),o=this.children.get(r);return o?o.findOnPath_(Ee(t),He(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,we(),n)}foreachOnPath_(t,n,i){if(fe(t))return this;{this.value&&i(n,this.value);const s=ue(t),r=this.children.get(s);return r?r.foreachOnPath_(Ee(t),He(n,s),i):new xe(null)}}foreach(t){this.foreach_(we(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(He(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.writeTree_=t}static empty(){return new Tt(new xe(null))}}function Ai(e,t,n){if(fe(t))return new Tt(new xe(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let r=i.value;const o=at(s,t);return r=r.updateChild(o,n),new Tt(e.writeTree_.set(s,r))}else{const s=new xe(n),r=e.writeTree_.setTree(t,s);return new Tt(r)}}}function Za(e,t,n){let i=e;return dt(n,(s,r)=>{i=Ai(i,He(t,s),r)}),i}function Xa(e,t){if(fe(t))return Tt.empty();{const n=e.writeTree_.setTree(t,new xe(null));return new Tt(n)}}function lo(e,t){return An(e,t)!=null}function An(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(at(n.path,t)):null}function Ja(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ae,(i,s)=>{t.push(new ce(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new ce(i,s.value))}),t}function cn(e,t){if(fe(t))return e;{const n=An(e,t);return n!=null?new Tt(new xe(n)):new Tt(e.writeTree_.subtree(t))}}function ao(e){return e.writeTree_.isEmpty()}function ci(e,t){return Oc(we(),e.writeTree_,t)}function Oc(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(D(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=Oc(He(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(He(e,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e,t){return qc(t,e)}function d_(e,t,n,i,s){D(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=Ai(e.visibleWrites,t,n)),e.lastWriteId=i}function f_(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function h_(e,t){const n=e.allWrites.findIndex(l=>l.writeId===t);D(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,o=e.allWrites.length-1;for(;s&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=n&&m_(l,i.path)?s=!1:bt(i.path,l.path)&&(r=!0)),o--}if(s){if(r)return v_(e),!0;if(i.snap)e.visibleWrites=Xa(e.visibleWrites,i.path);else{const l=i.children;dt(l,a=>{e.visibleWrites=Xa(e.visibleWrites,He(i.path,a))})}return!0}else return!1}function m_(e,t){if(e.snap)return bt(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&bt(He(e.path,n),t))return!0;return!1}function v_(e){e.visibleWrites=Ac(e.allWrites,__,we()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function __(e){return e.visible}function Ac(e,t,n){let i=Tt.empty();for(let s=0;s<e.length;++s){const r=e[s];if(t(r)){const o=r.path;let l;if(r.snap)bt(n,o)?(l=at(n,o),i=Ai(i,l,r.snap)):bt(o,n)&&(l=at(o,n),i=Ai(i,we(),r.snap.getChild(l)));else if(r.children){if(bt(n,o))l=at(n,o),i=Za(i,l,r.children);else if(bt(o,n))if(l=at(o,n),fe(l))i=Za(i,we(),r.children);else{const a=oi(r.children,ue(l));if(a){const u=a.getChild(Ee(l));i=Ai(i,we(),u)}}}else throw ts("WriteRecord should have .snap or .children")}}return i}function Fc(e,t,n,i,s){if(!i&&!s){const r=An(e.visibleWrites,t);if(r!=null)return r;{const o=cn(e.visibleWrites,t);if(ao(o))return n;if(n==null&&!lo(o,we()))return null;{const l=n||te.EMPTY_NODE;return ci(o,l)}}}else{const r=cn(e.visibleWrites,t);if(!s&&ao(r))return n;if(!s&&n==null&&!lo(r,we()))return null;{const o=function(u){return(u.visible||s)&&(!i||!~i.indexOf(u.writeId))&&(bt(u.path,t)||bt(t,u.path))},l=Ac(e.allWrites,o,t),a=n||te.EMPTY_NODE;return ci(l,a)}}}function g_(e,t,n){let i=te.EMPTY_NODE;const s=An(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Ae,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=cn(e.visibleWrites,t);return n.forEachChild(Ae,(o,l)=>{const a=ci(cn(r,new ke(o)),l);i=i.updateImmediateChild(o,a)}),Ja(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=cn(e.visibleWrites,t);return Ja(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function p_(e,t,n,i,s){D(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=He(t,n);if(lo(e.visibleWrites,r))return null;{const o=cn(e.visibleWrites,r);return ao(o)?s.getChild(n):ci(o,s.getChild(n))}}function y_(e,t,n,i){const s=He(t,n),r=An(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=cn(e.visibleWrites,s);return ci(o,i.getNode().getImmediateChild(n))}else return null}function w_(e,t){return An(e.visibleWrites,t)}function S_(e,t,n,i,s,r,o){let l;const a=cn(e.visibleWrites,t),u=An(a,we());if(u!=null)l=u;else if(n!=null)l=ci(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const c=[],d=o.getCompare(),f=r?l.getReverseIteratorFrom(i,o):l.getIteratorFrom(i,o);let m=f.getNext();for(;m&&c.length<s;)d(m,i)!==0&&c.push(m),m=f.getNext();return c}else return[]}function b_(){return{visibleWrites:Tt.empty(),allWrites:[],lastWriteId:-1}}function Us(e,t,n,i){return Fc(e.writeTree,e.treePath,t,n,i)}function zo(e,t){return g_(e.writeTree,e.treePath,t)}function eu(e,t,n,i){return p_(e.writeTree,e.treePath,t,n,i)}function Bs(e,t){return w_(e.writeTree,He(e.treePath,t))}function C_(e,t,n,i,s,r){return S_(e.writeTree,e.treePath,t,n,i,s,r)}function $o(e,t,n){return y_(e.writeTree,e.treePath,t,n)}function Lc(e,t){return qc(He(e.treePath,t),e.writeTree)}function qc(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,zi(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,Bi(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,ui(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,zi(i,t.snapshotNode,s.oldSnap));else throw ts("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}}const Vc=new T_;class jo{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $o(this.writes_,t,i)}}getChildAfterChild(t,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dn(this.viewCache_),r=C_(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(e){return{filter:e}}function x_(e,t){D(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),D(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function M_(e,t,n,i,s){const r=new k_;let o,l;if(n.type===Ct.OVERWRITE){const u=n;u.source.fromUser?o=uo(e,t,u.path,u.snap,i,s,r):(D(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!fe(u.path),o=zs(e,t,u.path,u.snap,i,s,l,r))}else if(n.type===Ct.MERGE){const u=n;u.source.fromUser?o=R_(e,t,u.path,u.children,i,s,r):(D(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=co(e,t,u.path,u.children,i,s,l,r))}else if(n.type===Ct.ACK_USER_WRITE){const u=n;u.revert?o=P_(e,t,u.path,i,s,r):o=D_(e,t,u.path,u.affectedTree,i,s,r)}else if(n.type===Ct.LISTEN_COMPLETE)o=N_(e,t,n.path,i,r);else throw ts("Unknown operation type: "+n.type);const a=r.getChanges();return I_(t,o,a),{viewCache:o,changes:a}}function I_(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=oo(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(Rc(oo(t)))}}function Yc(e,t,n,i,s,r){const o=t.eventCache;if(Bs(i,n)!=null)return t;{let l,a;if(fe(n))if(D(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=Dn(t),c=u instanceof te?u:te.EMPTY_NODE,d=zo(i,c);l=e.filter.updateFullNode(t.eventCache.getNode(),d,r)}else{const u=Us(i,Dn(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,r)}else{const u=ue(n);if(u===".priority"){D(fn(n)===1,"Can't have a priority with additional path components");const c=o.getNode();a=t.serverCache.getNode();const d=eu(i,n,c,a);d!=null?l=e.filter.updatePriority(c,d):l=o.getNode()}else{const c=Ee(n);let d;if(o.isCompleteForChild(u)){a=t.serverCache.getNode();const f=eu(i,n,o.getNode(),a);f!=null?d=o.getNode().getImmediateChild(u).updateChild(c,f):d=o.getNode().getImmediateChild(u)}else d=$o(i,u,t.serverCache);d!=null?l=e.filter.updateChild(o.getNode(),u,d,c,s,r):l=o.getNode()}}return Oi(t,l,o.isFullyInitialized()||fe(n),e.filter.filtersNodes())}}function zs(e,t,n,i,s,r,o,l){const a=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(fe(n))u=c.updateFullNode(a.getNode(),i,null);else if(c.filtersNodes()&&!a.isFiltered()){const m=a.getNode().updateChild(n,i);u=c.updateFullNode(a.getNode(),m,null)}else{const m=ue(n);if(!a.isCompleteForPath(n)&&fn(n)>1)return t;const _=Ee(n),w=a.getNode().getImmediateChild(m).updateChild(_,i);m===".priority"?u=c.updatePriority(a.getNode(),w):u=c.updateChild(a.getNode(),m,w,_,Vc,null)}const d=Pc(t,u,a.isFullyInitialized()||fe(n),c.filtersNodes()),f=new jo(s,d,r);return Yc(e,d,n,s,f,l)}function uo(e,t,n,i,s,r,o){const l=t.eventCache;let a,u;const c=new jo(s,t,r);if(fe(n))u=e.filter.updateFullNode(t.eventCache.getNode(),i,o),a=Oi(t,u,!0,e.filter.filtersNodes());else{const d=ue(n);if(d===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),i),a=Oi(t,u,l.isFullyInitialized(),l.isFiltered());else{const f=Ee(n),m=l.getNode().getImmediateChild(d);let _;if(fe(f))_=i;else{const I=c.getCompleteChild(d);I!=null?Sc(f)===".priority"&&I.getChild(Cc(f)).isEmpty()?_=I:_=I.updateChild(f,i):_=te.EMPTY_NODE}if(m.equals(_))a=t;else{const I=e.filter.updateChild(l.getNode(),d,_,f,c,o);a=Oi(t,I,l.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function tu(e,t){return e.eventCache.isCompleteForChild(t)}function R_(e,t,n,i,s,r,o){let l=t;return i.foreach((a,u)=>{const c=He(n,a);tu(t,ue(c))&&(l=uo(e,l,c,u,s,r,o))}),i.foreach((a,u)=>{const c=He(n,a);tu(t,ue(c))||(l=uo(e,l,c,u,s,r,o))}),l}function nu(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function co(e,t,n,i,s,r,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let a=t,u;fe(n)?u=i:u=new xe(null).setTree(n,i);const c=t.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(c.hasChild(d)){const m=t.serverCache.getNode().getImmediateChild(d),_=nu(e,m,f);a=zs(e,a,new ke(d),_,s,r,o,l)}}),u.children.inorderTraversal((d,f)=>{const m=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!c.hasChild(d)&&!m){const _=t.serverCache.getNode().getImmediateChild(d),I=nu(e,_,f);a=zs(e,a,new ke(d),I,s,r,o,l)}}),a}function D_(e,t,n,i,s,r,o){if(Bs(s,n)!=null)return t;const l=t.serverCache.isFiltered(),a=t.serverCache;if(i.value!=null){if(fe(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return zs(e,t,n,a.getNode().getChild(n),s,r,l,o);if(fe(n)){let u=new xe(null);return a.getNode().forEachChild(ti,(c,d)=>{u=u.set(new ke(c),d)}),co(e,t,n,u,s,r,l,o)}else return t}else{let u=new xe(null);return i.foreach((c,d)=>{const f=He(n,c);a.isCompleteForPath(f)&&(u=u.set(c,a.getNode().getChild(f)))}),co(e,t,n,u,s,r,l,o)}}function N_(e,t,n,i,s){const r=t.serverCache,o=Pc(t,r.getNode(),r.isFullyInitialized()||fe(n),r.isFiltered());return Yc(e,o,n,i,Vc,s)}function P_(e,t,n,i,s,r){let o;if(Bs(i,n)!=null)return t;{const l=new jo(i,t,s),a=t.eventCache.getNode();let u;if(fe(n)||ue(n)===".priority"){let c;if(t.serverCache.isFullyInitialized())c=Us(i,Dn(t));else{const d=t.serverCache.getNode();D(d instanceof te,"serverChildren would be complete if leaf node"),c=zo(i,d)}c=c,u=e.filter.updateFullNode(a,c,r)}else{const c=ue(n);let d=$o(i,c,t.serverCache);d==null&&t.serverCache.isCompleteForChild(c)&&(d=a.getImmediateChild(c)),d!=null?u=e.filter.updateChild(a,c,d,Ee(n),l,r):t.eventCache.getNode().hasChild(c)?u=e.filter.updateChild(a,c,te.EMPTY_NODE,Ee(n),l,r):u=a,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Us(i,Dn(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,r)))}return o=t.serverCache.isFullyInitialized()||Bs(i,we())!=null,Oi(t,u,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new Yo(i.getIndex()),r=Jv(i);this.processor_=E_(r);const o=n.serverCache,l=n.eventCache,a=s.updateFullNode(te.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(te.EMPTY_NODE,l.getNode(),null),c=new Rn(a,o.isFullyInitialized(),s.filtersNodes()),d=new Rn(u,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=lr(d,c),this.eventGenerator_=new o_(this.query_)}get query(){return this.query_}}function A_(e){return e.viewCache_.serverCache.getNode()}function F_(e,t){const n=Dn(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!fe(t)&&!n.getImmediateChild(ue(t)).isEmpty())?n.getChild(t):null}function iu(e){return e.eventRegistrations_.length===0}function L_(e,t){e.eventRegistrations_.push(t)}function su(e,t,n){const i=[];if(n){D(t==null,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(t){let s=[];for(let r=0;r<e.eventRegistrations_.length;++r){const o=e.eventRegistrations_[r];if(!o.matches(t))s.push(o);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return i}function ru(e,t,n,i){t.type===Ct.MERGE&&t.source.queryId!==null&&(D(Dn(e.viewCache_),"We should always have a full cache before handling merges"),D(oo(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,r=M_(e.processor_,s,t,n,i);return x_(e.processor_,r.viewCache),D(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,Wc(e,r.changes,r.viewCache.eventCache.getNode(),null)}function q_(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ae,(r,o)=>{i.push(ui(r,o))}),n.isFullyInitialized()&&i.push(Rc(n.getNode())),Wc(e,i,n.getNode(),t)}function Wc(e,t,n,i){const s=i?[i]:e.eventRegistrations_;return l_(e.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s;class V_{constructor(){this.views=new Map}}function Y_(e){D(!$s,"__referenceConstructor has already been defined"),$s=e}function W_(){return D($s,"Reference.ts has not been loaded"),$s}function H_(e){return e.views.size===0}function Go(e,t,n,i){const s=t.source.queryId;if(s!==null){const r=e.views.get(s);return D(r!=null,"SyncTree gave us an op for an invalid query."),ru(r,t,n,i)}else{let r=[];for(const o of e.views.values())r=r.concat(ru(o,t,n,i));return r}}function U_(e,t,n,i,s){const r=t._queryIdentifier,o=e.views.get(r);if(!o){let l=Us(n,s?i:null),a=!1;l?a=!0:i instanceof te?(l=zo(n,i),a=!1):(l=te.EMPTY_NODE,a=!1);const u=lr(new Rn(l,a,!1),new Rn(i,s,!1));return new O_(t,u)}return o}function B_(e,t,n,i,s,r){const o=U_(e,t,i,s,r);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),L_(o,n),q_(o,n)}function z_(e,t,n,i){const s=t._queryIdentifier,r=[];let o=[];const l=hn(e);if(s==="default")for(const[a,u]of e.views.entries())o=o.concat(su(u,n,i)),iu(u)&&(e.views.delete(a),u.query._queryParams.loadsAllData()||r.push(u.query));else{const a=e.views.get(s);a&&(o=o.concat(su(a,n,i)),iu(a)&&(e.views.delete(s),a.query._queryParams.loadsAllData()||r.push(a.query)))}return l&&!hn(e)&&r.push(new(W_())(t._repo,t._path)),{removed:r,events:o}}function Hc(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ni(e,t){let n=null;for(const i of e.views.values())n=n||F_(i,t);return n}function Uc(e,t){if(t._queryParams.loadsAllData())return ar(e);{const i=t._queryIdentifier;return e.views.get(i)}}function Bc(e,t){return Uc(e,t)!=null}function hn(e){return ar(e)!=null}function ar(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js;function $_(e){D(!js,"__referenceConstructor has already been defined"),js=e}function j_(){return D(js,"Reference.ts has not been loaded"),js}let G_=1;class ou{constructor(t){this.listenProvider_=t,this.syncPointTree_=new xe(null),this.pendingWriteTree_=b_(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zc(e,t,n,i,s){return d_(e.pendingWriteTree_,t,n,i,s),s?rs(e,new In(Nc(),t,n)):[]}function bn(e,t,n=!1){const i=f_(e.pendingWriteTree_,t);if(h_(e.pendingWriteTree_,t)){let r=new xe(null);return i.snap!=null?r=r.set(we(),!0):dt(i.children,o=>{r=r.set(new ke(o),!0)}),rs(e,new Hs(i.path,r,n))}else return[]}function ur(e,t,n){return rs(e,new In(Ho(),t,n))}function Q_(e,t,n){const i=xe.fromObject(n);return rs(e,new Gi(Ho(),t,i))}function K_(e,t){return rs(e,new ji(Ho(),t))}function Z_(e,t,n){const i=Ko(e,n);if(i){const s=Zo(i),r=s.path,o=s.queryId,l=at(r,t),a=new ji(Uo(o),l);return Xo(e,r,a)}else return[]}function fo(e,t,n,i,s=!1){const r=t._path,o=e.syncPointTree_.get(r);let l=[];if(o&&(t._queryIdentifier==="default"||Bc(o,t))){const a=z_(o,t,n,i);H_(o)&&(e.syncPointTree_=e.syncPointTree_.remove(r));const u=a.removed;if(l=a.events,!s){const c=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(r,(f,m)=>hn(m));if(c&&!d){const f=e.syncPointTree_.subtree(r);if(!f.isEmpty()){const m=eg(f);for(let _=0;_<m.length;++_){const I=m[_],w=I.query,$=Gc(e,I);e.listenProvider_.startListening(Fi(w),Gs(e,w),$.hashFn,$.onComplete)}}}!d&&u.length>0&&!i&&(c?e.listenProvider_.stopListening(Fi(t),null):u.forEach(f=>{const m=e.queryToTagMap.get(cr(f));e.listenProvider_.stopListening(Fi(f),m)}))}tg(e,u)}return l}function X_(e,t,n,i){const s=Ko(e,i);if(s!=null){const r=Zo(s),o=r.path,l=r.queryId,a=at(o,t),u=new In(Uo(l),a,n);return Xo(e,o,u)}else return[]}function J_(e,t,n,i){const s=Ko(e,i);if(s){const r=Zo(s),o=r.path,l=r.queryId,a=at(o,t),u=xe.fromObject(n),c=new Gi(Uo(l),a,u);return Xo(e,o,c)}else return[]}function lu(e,t,n,i=!1){const s=t._path;let r=null,o=!1;e.syncPointTree_.foreachOnPath(s,(f,m)=>{const _=at(f,s);r=r||ni(m,_),o=o||hn(m)});let l=e.syncPointTree_.get(s);l?(o=o||hn(l),r=r||ni(l,we())):(l=new V_,e.syncPointTree_=e.syncPointTree_.set(s,l));let a;r!=null?a=!0:(a=!1,r=te.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((m,_)=>{const I=ni(_,we());I&&(r=r.updateImmediateChild(m,I))}));const u=Bc(l,t);if(!u&&!t._queryParams.loadsAllData()){const f=cr(t);D(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=ng();e.queryToTagMap.set(f,m),e.tagToQueryMap.set(m,f)}const c=Bo(e.pendingWriteTree_,s);let d=B_(l,t,n,c,r,a);if(!u&&!o&&!i){const f=Uc(l,t);d=d.concat(ig(e,t,f))}return d}function Qo(e,t,n){const s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,l)=>{const a=at(o,t),u=ni(l,a);if(u)return u});return Fc(s,t,r,n,!0)}function rs(e,t){return $c(t,e.syncPointTree_,null,Bo(e.pendingWriteTree_,we()))}function $c(e,t,n,i){if(fe(e.path))return jc(e,t,n,i);{const s=t.get(we());n==null&&s!=null&&(n=ni(s,we()));let r=[];const o=ue(e.path),l=e.operationForChild(o),a=t.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,c=Lc(i,o);r=r.concat($c(l,a,u,c))}return s&&(r=r.concat(Go(s,e,i,n))),r}}function jc(e,t,n,i){const s=t.get(we());n==null&&s!=null&&(n=ni(s,we()));let r=[];return t.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Lc(i,o),c=e.operationForChild(o);c&&(r=r.concat(jc(c,l,a,u)))}),s&&(r=r.concat(Go(s,e,i,n))),r}function Gc(e,t){const n=t.query,i=Gs(e,n);return{hashFn:()=>(A_(t)||te.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Z_(e,n._path,i):K_(e,n._path);{const r=Xm(s,n);return fo(e,n,null,r)}}}}function Gs(e,t){const n=cr(t);return e.queryToTagMap.get(n)}function cr(e){return e._path.toString()+"$"+e._queryIdentifier}function Ko(e,t){return e.tagToQueryMap.get(t)}function Zo(e){const t=e.indexOf("$");return D(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ke(e.substr(0,t))}}function Xo(e,t,n){const i=e.syncPointTree_.get(t);D(i,"Missing sync point for query tag that we're tracking");const s=Bo(e.pendingWriteTree_,t);return Go(i,n,s,null)}function eg(e){return e.fold((t,n,i)=>{if(n&&hn(n))return[ar(n)];{let s=[];return n&&(s=Hc(n)),dt(i,(r,o)=>{s=s.concat(o)}),s}})}function Fi(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(j_())(e._repo,e._path):e}function tg(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const s=cr(i),r=e.queryToTagMap.get(s);e.queryToTagMap.delete(s),e.tagToQueryMap.delete(r)}}}function ng(){return G_++}function ig(e,t,n){const i=t._path,s=Gs(e,t),r=Gc(e,n),o=e.listenProvider_.startListening(Fi(t),s,r.hashFn,r.onComplete),l=e.syncPointTree_.subtree(i);if(s)D(!hn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,c,d)=>{if(!fe(u)&&c&&hn(c))return[ar(c).query];{let f=[];return c&&(f=f.concat(Hc(c).map(m=>m.query))),dt(d,(m,_)=>{f=f.concat(_)}),f}});for(let u=0;u<a.length;++u){const c=a[u];e.listenProvider_.stopListening(Fi(c),Gs(e,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new Jo(n)}node(){return this.node_}}class el{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=He(this.path_,t);return new el(this.syncTree_,n)}node(){return Qo(this.syncTree_,this.path_)}}const sg=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},au=function(e,t,n){if(!e||typeof e!="object")return e;if(D(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return rg(e[".sv"],t,n);if(typeof e[".sv"]=="object")return og(e[".sv"],t);D(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},rg=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+e)}},og=function(e,t,n){e.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;typeof i!="number"&&D(!1,"Unexpected increment value: "+i);const s=t.node();if(D(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},lg=function(e,t,n,i){return tl(t,new el(n,e),i)},Qc=function(e,t,n){return tl(e,new Jo(t),n)};function tl(e,t,n){const i=e.getPriority().val(),s=au(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const o=e,l=au(o.getValue(),t,n);return l!==o.getValue()||s!==o.getPriority().val()?new ze(l,Xe(s)):e}else{const o=e;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new ze(s))),o.forEachChild(Ae,(l,a)=>{const u=tl(a,t.getImmediateChild(l),n);u!==a&&(r=r.updateImmediateChild(l,u))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function il(e,t){let n=t instanceof ke?t:new ke(t),i=e,s=ue(n);for(;s!==null;){const r=oi(i.node.children,s)||{children:{},childCount:0};i=new nl(s,i,r),n=Ee(n),s=ue(n)}return i}function mi(e){return e.node.value}function Kc(e,t){e.node.value=t,ho(e)}function Zc(e){return e.node.childCount>0}function ag(e){return mi(e)===void 0&&!Zc(e)}function dr(e,t){dt(e.node.children,(n,i)=>{t(new nl(n,e,i))})}function Xc(e,t,n,i){n&&!i&&t(e),dr(e,s=>{Xc(s,t,!0,i)}),n&&i&&t(e)}function ug(e,t,n){let i=e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function os(e){return new ke(e.parent===null?e.name:os(e.parent)+"/"+e.name)}function ho(e){e.parent!==null&&cg(e.parent,e.name,e)}function cg(e,t,n){const i=ag(n),s=Xt(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,ho(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,ho(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=/[\[\].#$\/\u0000-\u001F\u007F]/,fg=/[\[\].#$\u0000-\u001F\u007F]/,Br=10*1024*1024,Jc=function(e){return typeof e=="string"&&e.length!==0&&!dg.test(e)},ed=function(e){return typeof e=="string"&&e.length!==0&&!fg.test(e)},hg=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ed(e)},mg=function(e,t,n,i){sl(Eo(e,"value"),t,n)},sl=function(e,t,n){const i=n instanceof ke?new Dv(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+yn(i));if(typeof t=="function")throw new Error(e+"contains a function "+yn(i)+" with contents = "+t.toString());if(ec(t))throw new Error(e+"contains "+t.toString()+" "+yn(i));if(typeof t=="string"&&t.length>Br/3&&ir(t)>Br)throw new Error(e+"contains a string greater than "+Br+" utf8 bytes "+yn(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(dt(t,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Jc(o)))throw new Error(e+" contains an invalid key ("+o+") "+yn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Nv(i,o),sl(e,l,i),Pv(i)}),s&&r)throw new Error(e+' contains ".value" child '+yn(i)+" in addition to actual children.")}},td=function(e,t,n,i){if(!ed(n))throw new Error(Eo(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vg=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),td(e,t,n)},_g=function(e,t){if(ue(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},gg=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Jc(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!hg(n))throw new Error(Eo(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rl(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();n!==null&&!Lo(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function nd(e,t,n){rl(e,n),id(e,i=>Lo(i,t))}function Kt(e,t,n){rl(e,n),id(e,i=>bt(i,t)||bt(t,i))}function id(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){const r=s.path;t(r)?(yg(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function yg(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const i=n.getEventRunner();Ni&&Je("event: "+n.toString()),hi(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="repo_interrupt",Sg=25;class bg{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ws(),this.transactionQueueTree_=new nl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cg(e,t,n){if(e.stats_=Ao(e.repoInfo_),e.forceRestClient_||nv())e.server_=new Ys(e.repoInfo_,(i,s,r,o)=>{uu(e,i,s,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>cu(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{je(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new $t(e.repoInfo_,t,(i,s,r,o)=>{uu(e,i,s,r,o)},i=>{cu(e,i)},i=>{Tg(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=lv(e.repoInfo_,()=>new r_(e.stats_,e.server_)),e.infoData_=new e_,e.infoSyncTree_=new ou({startListening:(i,s,r,o)=>{let l=[];const a=e.infoData_.getNode(i._path);return a.isEmpty()||(l=ur(e.infoSyncTree_,i._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),ll(e,"connected",!1),e.serverSyncTree_=new ou({startListening:(i,s,r,o)=>(e.server_.listen(i,r,s,(l,a)=>{const u=o(l,a);Kt(e.eventQueue_,i._path,u)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function kg(e){const n=e.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ol(e){return sg({timestamp:kg(e)})}function uu(e,t,n,i,s){e.dataUpdateCount++;const r=new ke(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(i){const a=Ns(n,u=>Xe(u));o=J_(e.serverSyncTree_,r,a,s)}else{const a=Xe(n);o=X_(e.serverSyncTree_,r,a,s)}else if(i){const a=Ns(n,u=>Xe(u));o=Q_(e.serverSyncTree_,r,a)}else{const a=Xe(n);o=ur(e.serverSyncTree_,r,a)}let l=r;o.length>0&&(l=fr(e,r)),Kt(e.eventQueue_,l,o)}function cu(e,t){ll(e,"connected",t),t===!1&&xg(e)}function Tg(e,t){dt(t,(n,i)=>{ll(e,n,i)})}function ll(e,t,n){const i=new ke("/.info/"+t),s=Xe(n);e.infoData_.updateSnapshot(i,s);const r=ur(e.infoSyncTree_,i,s);Kt(e.eventQueue_,i,r)}function sd(e){return e.nextWriteId_++}function Eg(e,t,n,i,s){al(e,"set",{path:t.toString(),value:n,priority:i});const r=ol(e),o=Xe(n,i),l=Qo(e.serverSyncTree_,t),a=Qc(o,l,r),u=sd(e),c=zc(e.serverSyncTree_,t,a,u,!0);rl(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(f,m)=>{const _=f==="ok";_||ct("set at "+t+" failed: "+f);const I=bn(e.serverSyncTree_,u,!_);Kt(e.eventQueue_,t,I),Dg(e,s,f,m)});const d=ud(e,t);fr(e,d),Kt(e.eventQueue_,d,[])}function xg(e){al(e,"onDisconnectEvents");const t=ol(e),n=Ws();ro(e.onDisconnect_,we(),(s,r)=>{const o=lg(s,r,e.serverSyncTree_,t);Dc(n,s,o)});let i=[];ro(n,we(),(s,r)=>{i=i.concat(ur(e.serverSyncTree_,s,r));const o=ud(e,s);fr(e,o)}),e.onDisconnect_=Ws(),Kt(e.eventQueue_,we(),i)}function Mg(e,t,n){let i;ue(t._path)===".info"?i=lu(e.infoSyncTree_,t,n):i=lu(e.serverSyncTree_,t,n),nd(e.eventQueue_,t._path,i)}function Ig(e,t,n){let i;ue(t._path)===".info"?i=fo(e.infoSyncTree_,t,n):i=fo(e.serverSyncTree_,t,n),nd(e.eventQueue_,t._path,i)}function Rg(e){e.persistentConnection_&&e.persistentConnection_.interrupt(wg)}function al(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Je(n,...t)}function Dg(e,t,n,i){t&&hi(()=>{if(n==="ok")t(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,t(o)}})}function rd(e,t,n){return Qo(e.serverSyncTree_,t,n)||te.EMPTY_NODE}function ul(e,t=e.transactionQueueTree_){if(t||hr(e,t),mi(t)){const n=ld(e,t);D(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Ng(e,os(t),n)}else Zc(t)&&dr(t,n=>{ul(e,n)})}function Ng(e,t,n){const i=n.map(u=>u.currentWriteId),s=rd(e,t,i);let r=s;const o=s.hash();for(let u=0;u<n.length;u++){const c=n[u];D(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=at(t,c.path);r=r.updateChild(d,c.currentOutputSnapshotRaw)}const l=r.val(!0),a=t;e.server_.put(a.toString(),l,u=>{al(e,"transaction put response",{path:a.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,c=c.concat(bn(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();hr(e,il(e.transactionQueueTree_,t)),ul(e,e.transactionQueueTree_),Kt(e.eventQueue_,t,c);for(let f=0;f<d.length;f++)hi(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ct("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}fr(e,t)}},o)}function fr(e,t){const n=od(e,t),i=os(n),s=ld(e,n);return Pg(e,s,i),i}function Pg(e,t,n){if(t.length===0)return;const i=[];let s=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const a=t[l],u=at(n,a.path);let c=!1,d;if(D(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,d=a.abortReason,s=s.concat(bn(e.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Sg)c=!0,d="maxretry",s=s.concat(bn(e.serverSyncTree_,a.currentWriteId,!0));else{const f=rd(e,a.path,o);a.currentInputSnapshot=f;const m=t[l].update(f.val());if(m!==void 0){sl("transaction failed: Data returned ",m,a.path);let _=Xe(m);typeof m=="object"&&m!=null&&Xt(m,".priority")||(_=_.updatePriority(f.getPriority()));const w=a.currentWriteId,$=ol(e),N=Qc(_,f,$);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=N,a.currentWriteId=sd(e),o.splice(o.indexOf(w),1),s=s.concat(zc(e.serverSyncTree_,a.path,N,a.currentWriteId,a.applyLocally)),s=s.concat(bn(e.serverSyncTree_,w,!0))}else c=!0,d="nodata",s=s.concat(bn(e.serverSyncTree_,a.currentWriteId,!0))}Kt(e.eventQueue_,n,s),s=[],c&&(t[l].status=2,function(f){setTimeout(f,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(d==="nodata"?i.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):i.push(()=>t[l].onComplete(new Error(d),!1,null))))}hr(e,e.transactionQueueTree_);for(let l=0;l<i.length;l++)hi(i[l]);ul(e,e.transactionQueueTree_)}function od(e,t){let n,i=e.transactionQueueTree_;for(n=ue(t);n!==null&&mi(i)===void 0;)i=il(i,n),t=Ee(t),n=ue(t);return i}function ld(e,t){const n=[];return ad(e,t,n),n.sort((i,s)=>i.order-s.order),n}function ad(e,t,n){const i=mi(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);dr(t,s=>{ad(e,s,n)})}function hr(e,t){const n=mi(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,Kc(t,n.length>0?n:void 0)}dr(t,i=>{hr(e,i)})}function ud(e,t){const n=os(od(e,t)),i=il(e.transactionQueueTree_,t);return ug(i,s=>{zr(e,s)}),zr(e,i),Xc(i,s=>{zr(e,s)}),n}function zr(e,t){const n=mi(t);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(D(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(D(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(bn(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Kc(t,void 0):n.length=r+1,Kt(e.eventQueue_,os(t),s);for(let o=0;o<i.length;o++)hi(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function Ag(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ct(`Invalid query segment '${n}' in query '${e}'`)}return t}const du=function(e,t){const n=Fg(e),i=n.namespace;n.domain==="firebase.com"&&Qt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Qt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||jm();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new fc(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new ke(n.pathString)}},Fg=function(e){let t="",n="",i="",s="",r="",o=!0,l="https",a=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");c===-1&&(c=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(c,d)),c<d&&(s=Og(e.substring(c,d)));const f=Ag(e.substring(Math.min(e.length,d)));u=t.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(t.substring(u+1),10)):u=t.length;const m=t.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=t.indexOf(".");i=t.substring(0,_).toLowerCase(),n=t.substring(_+1),r=i}"ns"in f&&(r=f.ns)}return{host:t,port:a,domain:n,subdomain:i,secure:o,scheme:l,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t,n,i,s){this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+je(this.snapshot.exportVal())}}class qg{constructor(t,n,i){this.eventRegistration=t,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return fe(this._path)?null:Sc(this._path)}get ref(){return new mn(this._repo,this._path)}get _queryIdentifier(){const t=Qa(this._queryParams),n=Po(t);return n==="{}"?"default":n}get _queryObject(){return Qa(this._queryParams)}isEqual(t){if(t=es(t),!(t instanceof cl))return!1;const n=this._repo===t._repo,i=Lo(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Rv(this._path)}}class mn extends cl{constructor(t,n){super(t,n,new Wo,!1)}get parent(){const t=Cc(this._path);return t===null?null:new mn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Qs{constructor(t,n,i){this._node=t,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new ke(t),i=mo(this.ref,t);return new Qs(this._node.getChild(n),i,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new Qs(s,mo(this.ref,i),Ae)))}hasChild(t){const n=new ke(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rn(e,t){return e=es(e),e._checkNotDeleted("ref"),t!==void 0?mo(e._root,t):e._root}function mo(e,t){return e=es(e),ue(e._path)===null?vg("child","path",t):td("child","path",t),new mn(e._repo,He(e._path,t))}function Ei(e,t){e=es(e),_g("set",e._path),mg("set",t,e._path);const n=new To;return Eg(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class dl{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const i=n._queryParams.getIndex();return new Lg("value",this,new Qs(t.snapshotNode,new mn(n._repo,n._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new qg(this,t,n):null}matches(t){return t instanceof dl?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Yg(e,t,n,i,s){const r=new Vg(n,void 0),o=new dl(r);return Mg(e._repo,e,o),()=>Ig(e._repo,e,o)}function $r(e,t,n,i){return Yg(e,"value",t)}Y_(mn);$_(mn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="FIREBASE_DATABASE_EMULATOR_HOST",vo={};let Hg=!1;function Ug(e,t,n,i){const s=t.lastIndexOf(":"),r=t.substring(0,s),o=Ru(r);e.repoInfo_=new fc(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(e.authTokenProvider_=i)}function Bg(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||Qt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=du(r,s),l=o.repoInfo,a;typeof process<"u"&&Da&&(a=Da[Wg]),a?(r=`http://${a}?ns=${l.namespace}`,o=du(r,s),l=o.repoInfo):o.repoInfo.secure;const u=new sv(e.name,e.options,t);gg("Invalid Firebase Database URL",o),fe(o.path)||Qt("Database URL must point to the root of a Firebase Database (not including a child path).");const c=$g(l,e,u,new iv(e,n));return new jg(c,e)}function zg(e,t){const n=vo[t];(!n||n[e.key]!==e)&&Qt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Rg(e),delete n[e.key]}function $g(e,t,n,i){let s=vo[t.name];s||(s={},vo[t.name]=s);let r=s[e.toURLString()];return r&&Qt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new bg(e,Hg,n,i),s[e.toURLString()]=r,r}class jg{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Cg(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mn(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zg(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Qt("Cannot call "+t+" on a deleted database.")}}function Gg(e=Lf(),t){const n=qf(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const i=Vf("database");i&&Qg(n,...i)}return n}function Qg(e,t,n,i={}){e=es(e),e._checkNotDeleted("useEmulator");const s=`${t}:${n}`,r=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&Wf(i,r.repoInfo_.emulatorOptions))return;Qt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Qt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xs(xs.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:Hf(i.mockUserToken,e.app.options.projectId);o=new xs(l)}Ru(t)&&(Uf(t),Bf("Database",!0)),Ug(r,s,i,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(e){Wm(rh),Qf(new Kf("database",(t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return Bg(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),jl(Na,Pa,e),jl(Na,Pa,"esm2017")}$t.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};$t.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Kg();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var cd;function A(){return cd.apply(null,arguments)}function Zg(e){cd=e}function Et(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function xn(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ge(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fl(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ge(e,t))return!1;return!0}function ot(e){return e===void 0}function Zt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function ls(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function dd(e,t){var n=[],i,s=e.length;for(i=0;i<s;++i)n.push(t(e[i],i));return n}function an(e,t){for(var n in t)ge(t,n)&&(e[n]=t[n]);return ge(t,"toString")&&(e.toString=t.toString),ge(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Lt(e,t,n,i){return Od(e,t,n,i,!0).utc()}function Xg(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function oe(e){return e._pf==null&&(e._pf=Xg()),e._pf}var _o;Array.prototype.some?_o=Array.prototype.some:_o=function(e){var t=Object(this),n=t.length>>>0,i;for(i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};function hl(e){var t=null,n=!1,i=e._d&&!isNaN(e._d.getTime());if(i&&(t=oe(e),n=_o.call(t.parsedDateParts,function(s){return s!=null}),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i;return e._isValid}function mr(e){var t=Lt(NaN);return e!=null?an(oe(t),e):oe(t).userInvalidated=!0,t}var fu=A.momentProperties=[],jr=!1;function ml(e,t){var n,i,s,r=fu.length;if(ot(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),ot(t._i)||(e._i=t._i),ot(t._f)||(e._f=t._f),ot(t._l)||(e._l=t._l),ot(t._strict)||(e._strict=t._strict),ot(t._tzm)||(e._tzm=t._tzm),ot(t._isUTC)||(e._isUTC=t._isUTC),ot(t._offset)||(e._offset=t._offset),ot(t._pf)||(e._pf=oe(t)),ot(t._locale)||(e._locale=t._locale),r>0)for(n=0;n<r;n++)i=fu[n],s=t[i],ot(s)||(e[i]=s);return e}function as(e){ml(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),jr===!1&&(jr=!0,A.updateOffset(this),jr=!1)}function xt(e){return e instanceof as||e!=null&&e._isAMomentObject!=null}function fd(e){A.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function _t(e,t){var n=!0;return an(function(){if(A.deprecationHandler!=null&&A.deprecationHandler(null,e),n){var i=[],s,r,o,l=arguments.length;for(r=0;r<l;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])ge(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}fd(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var hu={};function hd(e,t){A.deprecationHandler!=null&&A.deprecationHandler(e,t),hu[e]||(fd(t),hu[e]=!0)}A.suppressDeprecationWarnings=!1;A.deprecationHandler=null;function qt(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Jg(e){var t,n;for(n in e)ge(e,n)&&(t=e[n],qt(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function go(e,t){var n=an({},e),i;for(i in t)ge(t,i)&&(xn(e[i])&&xn(t[i])?(n[i]={},an(n[i],e[i]),an(n[i],t[i])):t[i]!=null?n[i]=t[i]:delete n[i]);for(i in e)ge(e,i)&&!ge(t,i)&&xn(e[i])&&(n[i]=an({},n[i]));return n}function vl(e){e!=null&&this.set(e)}var po;Object.keys?po=Object.keys:po=function(e){var t,n=[];for(t in e)ge(e,t)&&n.push(t);return n};var ep={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function tp(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return qt(i)?i.call(t,n):i}function Ft(e,t,n){var i=""+Math.abs(e),s=t-i.length,r=e>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var _l=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Gr={},ii={};function Z(e,t,n,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),e&&(ii[e]=s),t&&(ii[t[0]]=function(){return Ft(s.apply(this,arguments),t[1],t[2])}),n&&(ii[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function np(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function ip(e){var t=e.match(_l),n,i;for(n=0,i=t.length;n<i;n++)ii[t[n]]?t[n]=ii[t[n]]:t[n]=np(t[n]);return function(s){var r="",o;for(o=0;o<i;o++)r+=qt(t[o])?t[o].call(s,e):t[o];return r}}function Ms(e,t){return e.isValid()?(t=md(t,e.localeData()),Gr[t]=Gr[t]||ip(t),Gr[t](e)):e.localeData().invalidDate()}function md(e,t){var n=5;function i(s){return t.longDateFormat(s)||s}for(Cs.lastIndex=0;n>=0&&Cs.test(e);)e=e.replace(Cs,i),Cs.lastIndex=0,n-=1;return e}var sp={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function rp(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(_l).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var op="Invalid date";function lp(){return this._invalidDate}var ap="%d",up=/\d{1,2}/;function cp(e){return this._ordinal.replace("%d",e)}var dp={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function fp(e,t,n,i){var s=this._relativeTime[n];return qt(s)?s(e,t,n,i):s.replace(/%d/i,e)}function hp(e,t){var n=this._relativeTime[e>0?"future":"past"];return qt(n)?n(t):n.replace(/%s/i,t)}var mu={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function gt(e){return typeof e=="string"?mu[e]||mu[e.toLowerCase()]:void 0}function gl(e){var t={},n,i;for(i in e)ge(e,i)&&(n=gt(i),n&&(t[n]=e[i]));return t}var mp={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function vp(e){var t=[],n;for(n in e)ge(e,n)&&t.push({unit:n,priority:mp[n]});return t.sort(function(i,s){return i.priority-s.priority}),t}var vd=/\d/,ft=/\d\d/,_d=/\d{3}/,pl=/\d{4}/,vr=/[+-]?\d{6}/,Ie=/\d\d?/,gd=/\d\d\d\d?/,pd=/\d\d\d\d\d\d?/,_r=/\d{1,3}/,yl=/\d{1,4}/,gr=/[+-]?\d{1,6}/,vi=/\d+/,pr=/[+-]?\d+/,_p=/Z|[+-]\d\d:?\d\d/gi,yr=/Z|[+-]\d\d(?::?\d\d)?/gi,gp=/[+-]?\d+(\.\d{1,3})?/,us=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_i=/^[1-9]\d?/,wl=/^([1-9]\d|\d)/,Ks;Ks={};function W(e,t,n){Ks[e]=qt(t)?t:function(i,s){return i&&n?n:t}}function pp(e,t){return ge(Ks,e)?Ks[e](t._strict,t._locale):new RegExp(yp(e))}function yp(e){return jt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,i,s,r){return n||i||s||r}))}function jt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function mt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function me(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=mt(t)),n}var yo={};function be(e,t){var n,i=t,s;for(typeof e=="string"&&(e=[e]),Zt(t)&&(i=function(r,o){o[t]=me(r)}),s=e.length,n=0;n<s;n++)yo[e[n]]=i}function cs(e,t){be(e,function(n,i,s,r){s._w=s._w||{},t(n,s._w,s,r)})}function wp(e,t,n){t!=null&&ge(yo,e)&&yo[e](t,n._a,n,e)}function wr(e){return e%4===0&&e%100!==0||e%400===0}var et=0,Bt=1,At=2,Ue=3,kt=4,zt=5,Cn=6,Sp=7,bp=8;Z("Y",0,0,function(){var e=this.year();return e<=9999?Ft(e,4):"+"+e});Z(0,["YY",2],0,function(){return this.year()%100});Z(0,["YYYY",4],0,"year");Z(0,["YYYYY",5],0,"year");Z(0,["YYYYYY",6,!0],0,"year");W("Y",pr);W("YY",Ie,ft);W("YYYY",yl,pl);W("YYYYY",gr,vr);W("YYYYYY",gr,vr);be(["YYYYY","YYYYYY"],et);be("YYYY",function(e,t){t[et]=e.length===2?A.parseTwoDigitYear(e):me(e)});be("YY",function(e,t){t[et]=A.parseTwoDigitYear(e)});be("Y",function(e,t){t[et]=parseInt(e,10)});function Li(e){return wr(e)?366:365}A.parseTwoDigitYear=function(e){return me(e)+(me(e)>68?1900:2e3)};var yd=gi("FullYear",!0);function Cp(){return wr(this.year())}function gi(e,t){return function(n){return n!=null?(wd(this,e,n),A.updateOffset(this,t),this):Qi(this,e)}}function Qi(e,t){if(!e.isValid())return NaN;var n=e._d,i=e._isUTC;switch(t){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function wd(e,t,n){var i,s,r,o,l;if(!(!e.isValid()||isNaN(n))){switch(i=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(s?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(s?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(s?i.setUTCHours(n):i.setHours(n));case"Date":return void(s?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}r=n,o=e.month(),l=e.date(),l=l===29&&o===1&&!wr(r)?28:l,s?i.setUTCFullYear(r,o,l):i.setFullYear(r,o,l)}}function kp(e){return e=gt(e),qt(this[e])?this[e]():this}function Tp(e,t){if(typeof e=="object"){e=gl(e);var n=vp(e),i,s=n.length;for(i=0;i<s;i++)this[n[i].unit](e[n[i].unit])}else if(e=gt(e),qt(this[e]))return this[e](t);return this}function Ep(e,t){return(e%t+t)%t}var qe;Array.prototype.indexOf?qe=Array.prototype.indexOf:qe=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Sl(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Ep(t,12);return e+=(t-n)/12,n===1?wr(e)?29:28:31-n%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1});Z("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Z("MMMM",0,0,function(e){return this.localeData().months(this,e)});W("M",Ie,_i);W("MM",Ie,ft);W("MMM",function(e,t){return t.monthsShortRegex(e)});W("MMMM",function(e,t){return t.monthsRegex(e)});be(["M","MM"],function(e,t){t[Bt]=me(e)-1});be(["MMM","MMMM"],function(e,t,n,i){var s=n._locale.monthsParse(e,i,n._strict);s!=null?t[Bt]=s:oe(n).invalidMonth=e});var xp="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Sd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),bd=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Mp=us,Ip=us;function Rp(e,t){return e?Et(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||bd).test(t)?"format":"standalone"][e.month()]:Et(this._months)?this._months:this._months.standalone}function Dp(e,t){return e?Et(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[bd.test(t)?"format":"standalone"][e.month()]:Et(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Np(e,t,n){var i,s,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=Lt([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?t==="MMM"?(s=qe.call(this._shortMonthsParse,o),s!==-1?s:null):(s=qe.call(this._longMonthsParse,o),s!==-1?s:null):t==="MMM"?(s=qe.call(this._shortMonthsParse,o),s!==-1?s:(s=qe.call(this._longMonthsParse,o),s!==-1?s:null)):(s=qe.call(this._longMonthsParse,o),s!==-1?s:(s=qe.call(this._shortMonthsParse,o),s!==-1?s:null))}function Pp(e,t,n){var i,s,r;if(this._monthsParseExact)return Np.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=Lt([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(n&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function Cd(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=me(t);else if(t=e.localeData().monthsParse(t),!Zt(t))return e}var n=t,i=e.date();return i=i<29?i:Math.min(i,Sl(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,i):e._d.setMonth(n,i),e}function kd(e){return e!=null?(Cd(this,e),A.updateOffset(this,!0),this):Qi(this,"Month")}function Op(){return Sl(this.year(),this.month())}function Ap(e){return this._monthsParseExact?(ge(this,"_monthsRegex")||Td.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ge(this,"_monthsShortRegex")||(this._monthsShortRegex=Mp),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Fp(e){return this._monthsParseExact?(ge(this,"_monthsRegex")||Td.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ge(this,"_monthsRegex")||(this._monthsRegex=Ip),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Td(){function e(a,u){return u.length-a.length}var t=[],n=[],i=[],s,r,o,l;for(s=0;s<12;s++)r=Lt([2e3,s]),o=jt(this.monthsShort(r,"")),l=jt(this.months(r,"")),t.push(o),n.push(l),i.push(l),i.push(o);t.sort(e),n.sort(e),i.sort(e),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Lp(e,t,n,i,s,r,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,i,s,r,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,i,s,r,o),l}function Ki(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Zs(e,t,n){var i=7+t-n,s=(7+Ki(e,0,i).getUTCDay()-t)%7;return-s+i-1}function Ed(e,t,n,i,s){var r=(7+n-i)%7,o=Zs(e,i,s),l=1+7*(t-1)+r+o,a,u;return l<=0?(a=e-1,u=Li(a)+l):l>Li(e)?(a=e+1,u=l-Li(e)):(a=e,u=l),{year:a,dayOfYear:u}}function Zi(e,t,n){var i=Zs(e.year(),t,n),s=Math.floor((e.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=e.year()-1,r=s+Gt(o,t,n)):s>Gt(e.year(),t,n)?(r=s-Gt(e.year(),t,n),o=e.year()+1):(o=e.year(),r=s),{week:r,year:o}}function Gt(e,t,n){var i=Zs(e,t,n),s=Zs(e+1,t,n);return(Li(e)-i+s)/7}Z("w",["ww",2],"wo","week");Z("W",["WW",2],"Wo","isoWeek");W("w",Ie,_i);W("ww",Ie,ft);W("W",Ie,_i);W("WW",Ie,ft);cs(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=me(e)});function qp(e){return Zi(e,this._week.dow,this._week.doy).week}var Vp={dow:0,doy:6};function Yp(){return this._week.dow}function Wp(){return this._week.doy}function Hp(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Up(e){var t=Zi(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Z("d",0,"do","day");Z("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Z("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Z("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Z("e",0,0,"weekday");Z("E",0,0,"isoWeekday");W("d",Ie);W("e",Ie);W("E",Ie);W("dd",function(e,t){return t.weekdaysMinRegex(e)});W("ddd",function(e,t){return t.weekdaysShortRegex(e)});W("dddd",function(e,t){return t.weekdaysRegex(e)});cs(["dd","ddd","dddd"],function(e,t,n,i){var s=n._locale.weekdaysParse(e,i,n._strict);s!=null?t.d=s:oe(n).invalidWeekday=e});cs(["d","e","E"],function(e,t,n,i){t[i]=me(e)});function Bp(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function zp(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function bl(e,t){return e.slice(t,7).concat(e.slice(0,t))}var $p="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),xd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),jp="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Gp=us,Qp=us,Kp=us;function Zp(e,t){var n=Et(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?bl(n,this._week.dow):e?n[e.day()]:n}function Xp(e){return e===!0?bl(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Jp(e){return e===!0?bl(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function ey(e,t,n){var i,s,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=Lt([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?t==="dddd"?(s=qe.call(this._weekdaysParse,o),s!==-1?s:null):t==="ddd"?(s=qe.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=qe.call(this._minWeekdaysParse,o),s!==-1?s:null):t==="dddd"?(s=qe.call(this._weekdaysParse,o),s!==-1||(s=qe.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=qe.call(this._minWeekdaysParse,o),s!==-1?s:null)):t==="ddd"?(s=qe.call(this._shortWeekdaysParse,o),s!==-1||(s=qe.call(this._weekdaysParse,o),s!==-1)?s:(s=qe.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=qe.call(this._minWeekdaysParse,o),s!==-1||(s=qe.call(this._weekdaysParse,o),s!==-1)?s:(s=qe.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function ty(e,t,n){var i,s,r;if(this._weekdaysParseExact)return ey.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=Lt([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(n&&t==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(n&&t==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function ny(e){if(!this.isValid())return e!=null?this:NaN;var t=Qi(this,"Day");return e!=null?(e=Bp(e,this.localeData()),this.add(e-t,"d")):t}function iy(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function sy(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=zp(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ry(e){return this._weekdaysParseExact?(ge(this,"_weekdaysRegex")||Cl.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ge(this,"_weekdaysRegex")||(this._weekdaysRegex=Gp),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function oy(e){return this._weekdaysParseExact?(ge(this,"_weekdaysRegex")||Cl.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ge(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qp),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ly(e){return this._weekdaysParseExact?(ge(this,"_weekdaysRegex")||Cl.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ge(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kp),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Cl(){function e(c,d){return d.length-c.length}var t=[],n=[],i=[],s=[],r,o,l,a,u;for(r=0;r<7;r++)o=Lt([2e3,1]).day(r),l=jt(this.weekdaysMin(o,"")),a=jt(this.weekdaysShort(o,"")),u=jt(this.weekdays(o,"")),t.push(l),n.push(a),i.push(u),s.push(l),s.push(a),s.push(u);t.sort(e),n.sort(e),i.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function kl(){return this.hours()%12||12}function ay(){return this.hours()||24}Z("H",["HH",2],0,"hour");Z("h",["hh",2],0,kl);Z("k",["kk",2],0,ay);Z("hmm",0,0,function(){return""+kl.apply(this)+Ft(this.minutes(),2)});Z("hmmss",0,0,function(){return""+kl.apply(this)+Ft(this.minutes(),2)+Ft(this.seconds(),2)});Z("Hmm",0,0,function(){return""+this.hours()+Ft(this.minutes(),2)});Z("Hmmss",0,0,function(){return""+this.hours()+Ft(this.minutes(),2)+Ft(this.seconds(),2)});function Md(e,t){Z(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Md("a",!0);Md("A",!1);function Id(e,t){return t._meridiemParse}W("a",Id);W("A",Id);W("H",Ie,wl);W("h",Ie,_i);W("k",Ie,_i);W("HH",Ie,ft);W("hh",Ie,ft);W("kk",Ie,ft);W("hmm",gd);W("hmmss",pd);W("Hmm",gd);W("Hmmss",pd);be(["H","HH"],Ue);be(["k","kk"],function(e,t,n){var i=me(e);t[Ue]=i===24?0:i});be(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});be(["h","hh"],function(e,t,n){t[Ue]=me(e),oe(n).bigHour=!0});be("hmm",function(e,t,n){var i=e.length-2;t[Ue]=me(e.substr(0,i)),t[kt]=me(e.substr(i)),oe(n).bigHour=!0});be("hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[Ue]=me(e.substr(0,i)),t[kt]=me(e.substr(i,2)),t[zt]=me(e.substr(s)),oe(n).bigHour=!0});be("Hmm",function(e,t,n){var i=e.length-2;t[Ue]=me(e.substr(0,i)),t[kt]=me(e.substr(i))});be("Hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[Ue]=me(e.substr(0,i)),t[kt]=me(e.substr(i,2)),t[zt]=me(e.substr(s))});function uy(e){return(e+"").toLowerCase().charAt(0)==="p"}var cy=/[ap]\.?m?\.?/i,dy=gi("Hours",!0);function fy(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var Rd={calendar:ep,longDateFormat:sp,invalidDate:op,ordinal:ap,dayOfMonthOrdinalParse:up,relativeTime:dp,months:xp,monthsShort:Sd,week:Vp,weekdays:$p,weekdaysMin:jp,weekdaysShort:xd,meridiemParse:cy},Ne={},xi={},Xi;function hy(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function vu(e){return e&&e.toLowerCase().replace("_","-")}function my(e){for(var t=0,n,i,s,r;t<e.length;){for(r=vu(e[t]).split("-"),n=r.length,i=vu(e[t+1]),i=i?i.split("-"):null;n>0;){if(s=Sr(r.slice(0,n).join("-")),s)return s;if(i&&i.length>=n&&hy(r,i)>=n-1)break;n--}t++}return Xi}function vy(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Sr(e){var t=null,n;if(Ne[e]===void 0&&typeof module<"u"&&module&&module.exports&&vy(e))try{t=Xi._abbr,n=require,n("./locale/"+e),dn(t)}catch{Ne[e]=null}return Ne[e]}function dn(e,t){var n;return e&&(ot(t)?n=Jt(e):n=Tl(e,t),n?Xi=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Xi._abbr}function Tl(e,t){if(t!==null){var n,i=Rd;if(t.abbr=e,Ne[e]!=null)hd("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ne[e]._config;else if(t.parentLocale!=null)if(Ne[t.parentLocale]!=null)i=Ne[t.parentLocale]._config;else if(n=Sr(t.parentLocale),n!=null)i=n._config;else return xi[t.parentLocale]||(xi[t.parentLocale]=[]),xi[t.parentLocale].push({name:e,config:t}),null;return Ne[e]=new vl(go(i,t)),xi[e]&&xi[e].forEach(function(s){Tl(s.name,s.config)}),dn(e),Ne[e]}else return delete Ne[e],null}function _y(e,t){if(t!=null){var n,i,s=Rd;Ne[e]!=null&&Ne[e].parentLocale!=null?Ne[e].set(go(Ne[e]._config,t)):(i=Sr(e),i!=null&&(s=i._config),t=go(s,t),i==null&&(t.abbr=e),n=new vl(t),n.parentLocale=Ne[e],Ne[e]=n),dn(e)}else Ne[e]!=null&&(Ne[e].parentLocale!=null?(Ne[e]=Ne[e].parentLocale,e===dn()&&dn(e)):Ne[e]!=null&&delete Ne[e]);return Ne[e]}function Jt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Xi;if(!Et(e)){if(t=Sr(e),t)return t;e=[e]}return my(e)}function gy(){return po(Ne)}function El(e){var t,n=e._a;return n&&oe(e).overflow===-2&&(t=n[Bt]<0||n[Bt]>11?Bt:n[At]<1||n[At]>Sl(n[et],n[Bt])?At:n[Ue]<0||n[Ue]>24||n[Ue]===24&&(n[kt]!==0||n[zt]!==0||n[Cn]!==0)?Ue:n[kt]<0||n[kt]>59?kt:n[zt]<0||n[zt]>59?zt:n[Cn]<0||n[Cn]>999?Cn:-1,oe(e)._overflowDayOfYear&&(t<et||t>At)&&(t=At),oe(e)._overflowWeeks&&t===-1&&(t=Sp),oe(e)._overflowWeekday&&t===-1&&(t=bp),oe(e).overflow=t),e}var py=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yy=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wy=/Z|[+-]\d\d(?::?\d\d)?/,ks=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Qr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Sy=/^\/?Date\((-?\d+)/i,by=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cy={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Dd(e){var t,n,i=e._i,s=py.exec(i)||yy.exec(i),r,o,l,a,u=ks.length,c=Qr.length;if(s){for(oe(e).iso=!0,t=0,n=u;t<n;t++)if(ks[t][1].exec(s[1])){o=ks[t][0],r=ks[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(s[3]){for(t=0,n=c;t<n;t++)if(Qr[t][1].exec(s[3])){l=(s[2]||" ")+Qr[t][0];break}if(l==null){e._isValid=!1;return}}if(!r&&l!=null){e._isValid=!1;return}if(s[4])if(wy.exec(s[4]))a="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(a||""),Ml(e)}else e._isValid=!1}function ky(e,t,n,i,s,r){var o=[Ty(e),Sd.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function Ty(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Ey(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xy(e,t,n){if(e){var i=xd.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(i!==s)return oe(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function My(e,t,n){if(e)return Cy[e];if(t)return 0;var i=parseInt(n,10),s=i%100,r=(i-s)/100;return r*60+s}function Nd(e){var t=by.exec(Ey(e._i)),n;if(t){if(n=ky(t[4],t[3],t[2],t[5],t[6],t[7]),!xy(t[1],n,e))return;e._a=n,e._tzm=My(t[8],t[9],t[10]),e._d=Ki.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),oe(e).rfc2822=!0}else e._isValid=!1}function Iy(e){var t=Sy.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Dd(e),e._isValid===!1)delete e._isValid;else return;if(Nd(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:A.createFromInputFallback(e)}A.createFromInputFallback=_t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Gn(e,t,n){return e??t??n}function Ry(e){var t=new Date(A.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function xl(e){var t,n,i=[],s,r,o;if(!e._d){for(s=Ry(e),e._w&&e._a[At]==null&&e._a[Bt]==null&&Dy(e),e._dayOfYear!=null&&(o=Gn(e._a[et],s[et]),(e._dayOfYear>Li(o)||e._dayOfYear===0)&&(oe(e)._overflowDayOfYear=!0),n=Ki(o,0,e._dayOfYear),e._a[Bt]=n.getUTCMonth(),e._a[At]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=s[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ue]===24&&e._a[kt]===0&&e._a[zt]===0&&e._a[Cn]===0&&(e._nextDay=!0,e._a[Ue]=0),e._d=(e._useUTC?Ki:Lp).apply(null,i),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ue]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==r&&(oe(e).weekdayMismatch=!0)}}function Dy(e){var t,n,i,s,r,o,l,a,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(r=1,o=4,n=Gn(t.GG,e._a[et],Zi(Me(),1,4).year),i=Gn(t.W,1),s=Gn(t.E,1),(s<1||s>7)&&(a=!0)):(r=e._locale._week.dow,o=e._locale._week.doy,u=Zi(Me(),r,o),n=Gn(t.gg,e._a[et],u.year),i=Gn(t.w,u.week),t.d!=null?(s=t.d,(s<0||s>6)&&(a=!0)):t.e!=null?(s=t.e+r,(t.e<0||t.e>6)&&(a=!0)):s=r),i<1||i>Gt(n,r,o)?oe(e)._overflowWeeks=!0:a!=null?oe(e)._overflowWeekday=!0:(l=Ed(n,i,s,r,o),e._a[et]=l.year,e._dayOfYear=l.dayOfYear)}A.ISO_8601=function(){};A.RFC_2822=function(){};function Ml(e){if(e._f===A.ISO_8601){Dd(e);return}if(e._f===A.RFC_2822){Nd(e);return}e._a=[],oe(e).empty=!0;var t=""+e._i,n,i,s,r,o,l=t.length,a=0,u,c;for(s=md(e._f,e._locale).match(_l)||[],c=s.length,n=0;n<c;n++)r=s[n],i=(t.match(pp(r,e))||[])[0],i&&(o=t.substr(0,t.indexOf(i)),o.length>0&&oe(e).unusedInput.push(o),t=t.slice(t.indexOf(i)+i.length),a+=i.length),ii[r]?(i?oe(e).empty=!1:oe(e).unusedTokens.push(r),wp(r,i,e)):e._strict&&!i&&oe(e).unusedTokens.push(r);oe(e).charsLeftOver=l-a,t.length>0&&oe(e).unusedInput.push(t),e._a[Ue]<=12&&oe(e).bigHour===!0&&e._a[Ue]>0&&(oe(e).bigHour=void 0),oe(e).parsedDateParts=e._a.slice(0),oe(e).meridiem=e._meridiem,e._a[Ue]=Ny(e._locale,e._a[Ue],e._meridiem),u=oe(e).era,u!==null&&(e._a[et]=e._locale.erasConvertYear(u,e._a[et])),xl(e),El(e)}function Ny(e,t,n){var i;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(i=e.isPM(n),i&&t<12&&(t+=12),!i&&t===12&&(t=0)),t)}function Py(e){var t,n,i,s,r,o,l=!1,a=e._f.length;if(a===0){oe(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<a;s++)r=0,o=!1,t=ml({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],Ml(t),hl(t)&&(o=!0),r+=oe(t).charsLeftOver,r+=oe(t).unusedTokens.length*10,oe(t).score=r,l?r<i&&(i=r,n=t):(i==null||r<i||o)&&(i=r,n=t,o&&(l=!0));an(e,n||t)}function Oy(e){if(!e._d){var t=gl(e._i),n=t.day===void 0?t.date:t.day;e._a=dd([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(i){return i&&parseInt(i,10)}),xl(e)}}function Ay(e){var t=new as(El(Pd(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Pd(e){var t=e._i,n=e._f;return e._locale=e._locale||Jt(e._l),t===null||n===void 0&&t===""?mr({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),xt(t)?new as(El(t)):(ls(t)?e._d=t:Et(n)?Py(e):n?Ml(e):Fy(e),hl(e)||(e._d=null),e))}function Fy(e){var t=e._i;ot(t)?e._d=new Date(A.now()):ls(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Iy(e):Et(t)?(e._a=dd(t.slice(0),function(n){return parseInt(n,10)}),xl(e)):xn(t)?Oy(e):Zt(t)?e._d=new Date(t):A.createFromInputFallback(e)}function Od(e,t,n,i,s){var r={};return(t===!0||t===!1)&&(i=t,t=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(xn(e)&&fl(e)||Et(e)&&e.length===0)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=n,r._i=e,r._f=t,r._strict=i,Ay(r)}function Me(e,t,n,i){return Od(e,t,n,i,!1)}var Ly=_t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Me.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:mr()}),qy=_t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Me.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:mr()});function Ad(e,t){var n,i;if(t.length===1&&Et(t[0])&&(t=t[0]),!t.length)return Me();for(n=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](n))&&(n=t[i]);return n}function Vy(){var e=[].slice.call(arguments,0);return Ad("isBefore",e)}function Yy(){var e=[].slice.call(arguments,0);return Ad("isAfter",e)}var Wy=function(){return Date.now?Date.now():+new Date},Mi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Hy(e){var t,n=!1,i,s=Mi.length;for(t in e)if(ge(e,t)&&!(qe.call(Mi,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(i=0;i<s;++i)if(e[Mi[i]]){if(n)return!1;parseFloat(e[Mi[i]])!==me(e[Mi[i]])&&(n=!0)}return!0}function Uy(){return this._isValid}function By(){return Mt(NaN)}function br(e){var t=gl(e),n=t.year||0,i=t.quarter||0,s=t.month||0,r=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,a=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=Hy(t),this._milliseconds=+c+u*1e3+a*6e4+l*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+n*12,this._data={},this._locale=Jt(),this._bubble()}function Is(e){return e instanceof br}function wo(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function zy(e,t,n){var i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0,o;for(o=0;o<i;o++)me(e[o])!==me(t[o])&&r++;return r+s}function Fd(e,t){Z(e,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+Ft(~~(n/60),2)+t+Ft(~~n%60,2)})}Fd("Z",":");Fd("ZZ","");W("Z",yr);W("ZZ",yr);be(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Il(yr,e)});var $y=/([\+\-]|\d\d)/gi;function Il(e,t){var n=(t||"").match(e),i,s,r;return n===null?null:(i=n[n.length-1]||[],s=(i+"").match($y)||["-",0,0],r=+(s[1]*60)+me(s[2]),r===0?0:s[0]==="+"?r:-r)}function Rl(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(xt(e)||ls(e)?e.valueOf():Me(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),A.updateOffset(n,!1),n):Me(e).local()}function So(e){return-Math.round(e._d.getTimezoneOffset())}A.updateOffset=function(){};function jy(e,t,n){var i=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Il(yr,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(s=So(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?Vd(this,Mt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,A.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:So(this)}function Gy(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Qy(e){return this.utcOffset(0,e)}function Ky(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(So(this),"m")),this}function Zy(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Il(_p,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Xy(e){return this.isValid()?(e=e?Me(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Jy(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function e0(){if(!ot(this._isDSTShifted))return this._isDSTShifted;var e={},t;return ml(e,this),e=Pd(e),e._a?(t=e._isUTC?Lt(e._a):Me(e._a),this._isDSTShifted=this.isValid()&&zy(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function t0(){return this.isValid()?!this._isUTC:!1}function n0(){return this.isValid()?this._isUTC:!1}function Ld(){return this.isValid()?this._isUTC&&this._offset===0:!1}var i0=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,s0=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Mt(e,t){var n=e,i=null,s,r,o;return Is(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Zt(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(i=i0.exec(e))?(s=i[1]==="-"?-1:1,n={y:0,d:me(i[At])*s,h:me(i[Ue])*s,m:me(i[kt])*s,s:me(i[zt])*s,ms:me(wo(i[Cn]*1e3))*s}):(i=s0.exec(e))?(s=i[1]==="-"?-1:1,n={y:pn(i[2],s),M:pn(i[3],s),w:pn(i[4],s),d:pn(i[5],s),h:pn(i[6],s),m:pn(i[7],s),s:pn(i[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=r0(Me(n.from),Me(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),r=new br(n),Is(e)&&ge(e,"_locale")&&(r._locale=e._locale),Is(e)&&ge(e,"_isValid")&&(r._isValid=e._isValid),r}Mt.fn=br.prototype;Mt.invalid=By;function pn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function _u(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function r0(e,t){var n;return e.isValid()&&t.isValid()?(t=Rl(t,e),e.isBefore(t)?n=_u(e,t):(n=_u(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function qd(e,t){return function(n,i){var s,r;return i!==null&&!isNaN(+i)&&(hd(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),s=Mt(n,i),Vd(this,s,e),this}}function Vd(e,t,n,i){var s=t._milliseconds,r=wo(t._days),o=wo(t._months);e.isValid()&&(i=i??!0,o&&Cd(e,Qi(e,"Month")+o*n),r&&wd(e,"Date",Qi(e,"Date")+r*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&A.updateOffset(e,r||o))}var o0=qd(1,"add"),l0=qd(-1,"subtract");function Yd(e){return typeof e=="string"||e instanceof String}function a0(e){return xt(e)||ls(e)||Yd(e)||Zt(e)||c0(e)||u0(e)||e===null||e===void 0}function u0(e){var t=xn(e)&&!fl(e),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],n=n||ge(e,r);return t&&n}function c0(e){var t=Et(e),n=!1;return t&&(n=e.filter(function(i){return!Zt(i)&&Yd(e)}).length===0),t&&n}function d0(e){var t=xn(e)&&!fl(e),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],n=n||ge(e,r);return t&&n}function f0(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function h0(e,t){arguments.length===1&&(arguments[0]?a0(arguments[0])?(e=arguments[0],t=void 0):d0(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Me(),i=Rl(n,this).startOf("day"),s=A.calendarFormat(this,i)||"sameElse",r=t&&(qt(t[s])?t[s].call(this,n):t[s]);return this.format(r||this.localeData().calendar(s,this,Me(n)))}function m0(){return new as(this)}function v0(e,t){var n=xt(e)?e:Me(e);return this.isValid()&&n.isValid()?(t=gt(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function _0(e,t){var n=xt(e)?e:Me(e);return this.isValid()&&n.isValid()?(t=gt(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function g0(e,t,n,i){var s=xt(e)?e:Me(e),r=xt(t)?t:Me(t);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(i[1]===")"?this.isBefore(r,n):!this.isAfter(r,n))):!1}function p0(e,t){var n=xt(e)?e:Me(e),i;return this.isValid()&&n.isValid()?(t=gt(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function y0(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function w0(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function S0(e,t,n){var i,s,r;if(!this.isValid())return NaN;if(i=Rl(e,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,t=gt(t),t){case"year":r=Rs(this,i)/12;break;case"month":r=Rs(this,i);break;case"quarter":r=Rs(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return n?r:mt(r)}function Rs(e,t){if(e.date()<t.date())return-Rs(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(n,"months"),s,r;return t-i<0?(s=e.clone().add(n-1,"months"),r=(t-i)/(i-s)):(s=e.clone().add(n+1,"months"),r=(t-i)/(s-i)),-(n+r)||0}A.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";A.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function b0(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function C0(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Ms(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):qt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ms(n,"Z")):Ms(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function k0(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,i,s,r;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=t+'[")]',this.format(n+i+s+r)}function T0(e){e||(e=this.isUtc()?A.defaultFormatUtc:A.defaultFormat);var t=Ms(this,e);return this.localeData().postformat(t)}function E0(e,t){return this.isValid()&&(xt(e)&&e.isValid()||Me(e).isValid())?Mt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function x0(e){return this.from(Me(),e)}function M0(e,t){return this.isValid()&&(xt(e)&&e.isValid()||Me(e).isValid())?Mt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function I0(e){return this.to(Me(),e)}function Wd(e){var t;return e===void 0?this._locale._abbr:(t=Jt(e),t!=null&&(this._locale=t),this)}var Hd=_t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ud(){return this._locale}var Xs=1e3,si=60*Xs,Js=60*si,Bd=(365*400+97)*24*Js;function ri(e,t){return(e%t+t)%t}function zd(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Bd:new Date(e,t,n).valueOf()}function $d(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Bd:Date.UTC(e,t,n)}function R0(e){var t,n;if(e=gt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?$d:zd,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ri(t+(this._isUTC?0:this.utcOffset()*si),Js);break;case"minute":t=this._d.valueOf(),t-=ri(t,si);break;case"second":t=this._d.valueOf(),t-=ri(t,Xs);break}return this._d.setTime(t),A.updateOffset(this,!0),this}function D0(e){var t,n;if(e=gt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?$d:zd,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Js-ri(t+(this._isUTC?0:this.utcOffset()*si),Js)-1;break;case"minute":t=this._d.valueOf(),t+=si-ri(t,si)-1;break;case"second":t=this._d.valueOf(),t+=Xs-ri(t,Xs)-1;break}return this._d.setTime(t),A.updateOffset(this,!0),this}function N0(){return this._d.valueOf()-(this._offset||0)*6e4}function P0(){return Math.floor(this.valueOf()/1e3)}function O0(){return new Date(this.valueOf())}function A0(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function F0(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function L0(){return this.isValid()?this.toISOString():null}function q0(){return hl(this)}function V0(){return an({},oe(this))}function Y0(){return oe(this).overflow}function W0(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr");Z("NN",0,0,"eraAbbr");Z("NNN",0,0,"eraAbbr");Z("NNNN",0,0,"eraName");Z("NNNNN",0,0,"eraNarrow");Z("y",["y",1],"yo","eraYear");Z("y",["yy",2],0,"eraYear");Z("y",["yyy",3],0,"eraYear");Z("y",["yyyy",4],0,"eraYear");W("N",Dl);W("NN",Dl);W("NNN",Dl);W("NNNN",X0);W("NNNNN",J0);be(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var s=n._locale.erasParse(e,i,n._strict);s?oe(n).era=s:oe(n).invalidEra=e});W("y",vi);W("yy",vi);W("yyy",vi);W("yyyy",vi);W("yo",ew);be(["y","yy","yyy","yyyy"],et);be(["yo"],function(e,t,n,i){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[et]=n._locale.eraYearOrdinalParse(e,s):t[et]=parseInt(e,10)});function H0(e,t){var n,i,s,r=this._eras||Jt("en")._eras;for(n=0,i=r.length;n<i;++n){switch(typeof r[n].since){case"string":s=A(r[n].since).startOf("day"),r[n].since=s.valueOf();break}switch(typeof r[n].until){case"undefined":r[n].until=1/0;break;case"string":s=A(r[n].until).startOf("day").valueOf(),r[n].until=s.valueOf();break}}return r}function U0(e,t,n){var i,s,r=this.eras(),o,l,a;for(e=e.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),l=r[i].abbr.toUpperCase(),a=r[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(l===e)return r[i];break;case"NNNN":if(o===e)return r[i];break;case"NNNNN":if(a===e)return r[i];break}else if([o,l,a].indexOf(e)>=0)return r[i]}function B0(e,t){var n=e.since<=e.until?1:-1;return t===void 0?A(e.since).year():A(e.since).year()+(t-e.offset)*n}function z0(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].name;return""}function $0(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].narrow;return""}function j0(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].abbr;return""}function G0(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-A(s[e].since).year())*n+s[e].offset;return this.year()}function Q0(e){return ge(this,"_erasNameRegex")||Nl.call(this),e?this._erasNameRegex:this._erasRegex}function K0(e){return ge(this,"_erasAbbrRegex")||Nl.call(this),e?this._erasAbbrRegex:this._erasRegex}function Z0(e){return ge(this,"_erasNarrowRegex")||Nl.call(this),e?this._erasNarrowRegex:this._erasRegex}function Dl(e,t){return t.erasAbbrRegex(e)}function X0(e,t){return t.erasNameRegex(e)}function J0(e,t){return t.erasNarrowRegex(e)}function ew(e,t){return t._eraYearOrdinalRegex||vi}function Nl(){var e=[],t=[],n=[],i=[],s,r,o,l,a,u=this.eras();for(s=0,r=u.length;s<r;++s)o=jt(u[s].name),l=jt(u[s].abbr),a=jt(u[s].narrow),t.push(o),e.push(l),n.push(a),i.push(o),i.push(l),i.push(a);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100});Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Cr(e,t){Z(0,[e,e.length],0,t)}Cr("gggg","weekYear");Cr("ggggg","weekYear");Cr("GGGG","isoWeekYear");Cr("GGGGG","isoWeekYear");W("G",pr);W("g",pr);W("GG",Ie,ft);W("gg",Ie,ft);W("GGGG",yl,pl);W("gggg",yl,pl);W("GGGGG",gr,vr);W("ggggg",gr,vr);cs(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=me(e)});cs(["gg","GG"],function(e,t,n,i){t[i]=A.parseTwoDigitYear(e)});function tw(e){return jd.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function nw(e){return jd.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function iw(){return Gt(this.year(),1,4)}function sw(){return Gt(this.isoWeekYear(),1,4)}function rw(){var e=this.localeData()._week;return Gt(this.year(),e.dow,e.doy)}function ow(){var e=this.localeData()._week;return Gt(this.weekYear(),e.dow,e.doy)}function jd(e,t,n,i,s){var r;return e==null?Zi(this,i,s).year:(r=Gt(e,i,s),t>r&&(t=r),lw.call(this,e,t,n,i,s))}function lw(e,t,n,i,s){var r=Ed(e,t,n,i,s),o=Ki(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Z("Q",0,"Qo","quarter");W("Q",vd);be("Q",function(e,t){t[Bt]=(me(e)-1)*3});function aw(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date");W("D",Ie,_i);W("DD",Ie,ft);W("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});be(["D","DD"],At);be("Do",function(e,t){t[At]=me(e.match(Ie)[0])});var Gd=gi("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear");W("DDD",_r);W("DDDD",_d);be(["DDD","DDDD"],function(e,t,n){n._dayOfYear=me(e)});function uw(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Z("m",["mm",2],0,"minute");W("m",Ie,wl);W("mm",Ie,ft);be(["m","mm"],kt);var cw=gi("Minutes",!1);Z("s",["ss",2],0,"second");W("s",Ie,wl);W("ss",Ie,ft);be(["s","ss"],zt);var dw=gi("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)});Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Z(0,["SSS",3],0,"millisecond");Z(0,["SSSS",4],0,function(){return this.millisecond()*10});Z(0,["SSSSS",5],0,function(){return this.millisecond()*100});Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});W("S",_r,vd);W("SS",_r,ft);W("SSS",_r,_d);var un,Qd;for(un="SSSS";un.length<=9;un+="S")W(un,vi);function fw(e,t){t[Cn]=me(("0."+e)*1e3)}for(un="S";un.length<=9;un+="S")be(un,fw);Qd=gi("Milliseconds",!1);Z("z",0,0,"zoneAbbr");Z("zz",0,0,"zoneName");function hw(){return this._isUTC?"UTC":""}function mw(){return this._isUTC?"Coordinated Universal Time":""}var x=as.prototype;x.add=o0;x.calendar=h0;x.clone=m0;x.diff=S0;x.endOf=D0;x.format=T0;x.from=E0;x.fromNow=x0;x.to=M0;x.toNow=I0;x.get=kp;x.invalidAt=Y0;x.isAfter=v0;x.isBefore=_0;x.isBetween=g0;x.isSame=p0;x.isSameOrAfter=y0;x.isSameOrBefore=w0;x.isValid=q0;x.lang=Hd;x.locale=Wd;x.localeData=Ud;x.max=qy;x.min=Ly;x.parsingFlags=V0;x.set=Tp;x.startOf=R0;x.subtract=l0;x.toArray=A0;x.toObject=F0;x.toDate=O0;x.toISOString=C0;x.inspect=k0;typeof Symbol<"u"&&Symbol.for!=null&&(x[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});x.toJSON=L0;x.toString=b0;x.unix=P0;x.valueOf=N0;x.creationData=W0;x.eraName=z0;x.eraNarrow=$0;x.eraAbbr=j0;x.eraYear=G0;x.year=yd;x.isLeapYear=Cp;x.weekYear=tw;x.isoWeekYear=nw;x.quarter=x.quarters=aw;x.month=kd;x.daysInMonth=Op;x.week=x.weeks=Hp;x.isoWeek=x.isoWeeks=Up;x.weeksInYear=rw;x.weeksInWeekYear=ow;x.isoWeeksInYear=iw;x.isoWeeksInISOWeekYear=sw;x.date=Gd;x.day=x.days=ny;x.weekday=iy;x.isoWeekday=sy;x.dayOfYear=uw;x.hour=x.hours=dy;x.minute=x.minutes=cw;x.second=x.seconds=dw;x.millisecond=x.milliseconds=Qd;x.utcOffset=jy;x.utc=Qy;x.local=Ky;x.parseZone=Zy;x.hasAlignedHourOffset=Xy;x.isDST=Jy;x.isLocal=t0;x.isUtcOffset=n0;x.isUtc=Ld;x.isUTC=Ld;x.zoneAbbr=hw;x.zoneName=mw;x.dates=_t("dates accessor is deprecated. Use date instead.",Gd);x.months=_t("months accessor is deprecated. Use month instead",kd);x.years=_t("years accessor is deprecated. Use year instead",yd);x.zone=_t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Gy);x.isDSTShifted=_t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",e0);function vw(e){return Me(e*1e3)}function _w(){return Me.apply(null,arguments).parseZone()}function Kd(e){return e}var pe=vl.prototype;pe.calendar=tp;pe.longDateFormat=rp;pe.invalidDate=lp;pe.ordinal=cp;pe.preparse=Kd;pe.postformat=Kd;pe.relativeTime=fp;pe.pastFuture=hp;pe.set=Jg;pe.eras=H0;pe.erasParse=U0;pe.erasConvertYear=B0;pe.erasAbbrRegex=K0;pe.erasNameRegex=Q0;pe.erasNarrowRegex=Z0;pe.months=Rp;pe.monthsShort=Dp;pe.monthsParse=Pp;pe.monthsRegex=Fp;pe.monthsShortRegex=Ap;pe.week=qp;pe.firstDayOfYear=Wp;pe.firstDayOfWeek=Yp;pe.weekdays=Zp;pe.weekdaysMin=Jp;pe.weekdaysShort=Xp;pe.weekdaysParse=ty;pe.weekdaysRegex=ry;pe.weekdaysShortRegex=oy;pe.weekdaysMinRegex=ly;pe.isPM=uy;pe.meridiem=fy;function er(e,t,n,i){var s=Jt(),r=Lt().set(i,t);return s[n](r,e)}function Zd(e,t,n){if(Zt(e)&&(t=e,e=void 0),e=e||"",t!=null)return er(e,t,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=er(e,i,n,"month");return s}function Pl(e,t,n,i){typeof e=="boolean"?(Zt(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Zt(t)&&(n=t,t=void 0),t=t||"");var s=Jt(),r=e?s._week.dow:0,o,l=[];if(n!=null)return er(t,(n+r)%7,i,"day");for(o=0;o<7;o++)l[o]=er(t,(o+r)%7,i,"day");return l}function gw(e,t){return Zd(e,t,"months")}function pw(e,t){return Zd(e,t,"monthsShort")}function yw(e,t,n){return Pl(e,t,n,"weekdays")}function ww(e,t,n){return Pl(e,t,n,"weekdaysShort")}function Sw(e,t,n){return Pl(e,t,n,"weekdaysMin")}dn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=me(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});A.lang=_t("moment.lang is deprecated. Use moment.locale instead.",dn);A.langData=_t("moment.langData is deprecated. Use moment.localeData instead.",Jt);var Yt=Math.abs;function bw(){var e=this._data;return this._milliseconds=Yt(this._milliseconds),this._days=Yt(this._days),this._months=Yt(this._months),e.milliseconds=Yt(e.milliseconds),e.seconds=Yt(e.seconds),e.minutes=Yt(e.minutes),e.hours=Yt(e.hours),e.months=Yt(e.months),e.years=Yt(e.years),this}function Xd(e,t,n,i){var s=Mt(t,n);return e._milliseconds+=i*s._milliseconds,e._days+=i*s._days,e._months+=i*s._months,e._bubble()}function Cw(e,t){return Xd(this,e,t,1)}function kw(e,t){return Xd(this,e,t,-1)}function gu(e){return e<0?Math.floor(e):Math.ceil(e)}function Tw(){var e=this._milliseconds,t=this._days,n=this._months,i=this._data,s,r,o,l,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=gu(bo(n)+t)*864e5,t=0,n=0),i.milliseconds=e%1e3,s=mt(e/1e3),i.seconds=s%60,r=mt(s/60),i.minutes=r%60,o=mt(r/60),i.hours=o%24,t+=mt(o/24),a=mt(Jd(t)),n+=a,t-=gu(bo(a)),l=mt(n/12),n%=12,i.days=t,i.months=n,i.years=l,this}function Jd(e){return e*4800/146097}function bo(e){return e*146097/4800}function Ew(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if(e=gt(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+i/864e5,n=this._months+Jd(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(bo(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}function en(e){return function(){return this.as(e)}}var ef=en("ms"),xw=en("s"),Mw=en("m"),Iw=en("h"),Rw=en("d"),Dw=en("w"),Nw=en("M"),Pw=en("Q"),Ow=en("y"),Aw=ef;function Fw(){return Mt(this)}function Lw(e){return e=gt(e),this.isValid()?this[e+"s"]():NaN}function Fn(e){return function(){return this.isValid()?this._data[e]:NaN}}var qw=Fn("milliseconds"),Vw=Fn("seconds"),Yw=Fn("minutes"),Ww=Fn("hours"),Hw=Fn("days"),Uw=Fn("months"),Bw=Fn("years");function zw(){return mt(this.days()/7)}var Wt=Math.round,Zn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function $w(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}function jw(e,t,n,i){var s=Mt(e).abs(),r=Wt(s.as("s")),o=Wt(s.as("m")),l=Wt(s.as("h")),a=Wt(s.as("d")),u=Wt(s.as("M")),c=Wt(s.as("w")),d=Wt(s.as("y")),f=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||l<=1&&["h"]||l<n.h&&["hh",l]||a<=1&&["d"]||a<n.d&&["dd",a];return n.w!=null&&(f=f||c<=1&&["w"]||c<n.w&&["ww",c]),f=f||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d],f[2]=t,f[3]=+e>0,f[4]=i,$w.apply(null,f)}function Gw(e){return e===void 0?Wt:typeof e=="function"?(Wt=e,!0):!1}function Qw(e,t){return Zn[e]===void 0?!1:t===void 0?Zn[e]:(Zn[e]=t,e==="s"&&(Zn.ss=t-1),!0)}function Kw(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=Zn,s,r;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(i=Object.assign({},Zn,t),t.s!=null&&t.ss==null&&(i.ss=t.s-1)),s=this.localeData(),r=jw(this,!n,i,s),n&&(r=s.pastFuture(+this,r)),s.postformat(r)}var Kr=Math.abs;function $n(e){return(e>0)-(e<0)||+e}function kr(){if(!this.isValid())return this.localeData().invalidDate();var e=Kr(this._milliseconds)/1e3,t=Kr(this._days),n=Kr(this._months),i,s,r,o,l=this.asSeconds(),a,u,c,d;return l?(i=mt(e/60),s=mt(i/60),e%=60,i%=60,r=mt(n/12),n%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",u=$n(this._months)!==$n(l)?"-":"",c=$n(this._days)!==$n(l)?"-":"",d=$n(this._milliseconds)!==$n(l)?"-":"",a+"P"+(r?u+r+"Y":"")+(n?u+n+"M":"")+(t?c+t+"D":"")+(s||i||e?"T":"")+(s?d+s+"H":"")+(i?d+i+"M":"")+(e?d+o+"S":"")):"P0D"}var ve=br.prototype;ve.isValid=Uy;ve.abs=bw;ve.add=Cw;ve.subtract=kw;ve.as=Ew;ve.asMilliseconds=ef;ve.asSeconds=xw;ve.asMinutes=Mw;ve.asHours=Iw;ve.asDays=Rw;ve.asWeeks=Dw;ve.asMonths=Nw;ve.asQuarters=Pw;ve.asYears=Ow;ve.valueOf=Aw;ve._bubble=Tw;ve.clone=Fw;ve.get=Lw;ve.milliseconds=qw;ve.seconds=Vw;ve.minutes=Yw;ve.hours=Ww;ve.days=Hw;ve.weeks=zw;ve.months=Uw;ve.years=Bw;ve.humanize=Kw;ve.toISOString=kr;ve.toString=kr;ve.toJSON=kr;ve.locale=Wd;ve.localeData=Ud;ve.toIsoString=_t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",kr);ve.lang=Hd;Z("X",0,0,"unix");Z("x",0,0,"valueOf");W("x",pr);W("X",gp);be("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});be("x",function(e,t,n){n._d=new Date(me(e))});//! moment.js
A.version="2.30.1";Zg(Me);A.fn=x;A.min=Vy;A.max=Yy;A.now=Wy;A.utc=Lt;A.unix=vw;A.months=gw;A.isDate=ls;A.locale=dn;A.invalid=mr;A.duration=Mt;A.isMoment=xt;A.weekdays=yw;A.parseZone=_w;A.localeData=Jt;A.isDuration=Is;A.monthsShort=pw;A.weekdaysMin=Sw;A.defineLocale=Tl;A.updateLocale=_y;A.locales=gy;A.weekdaysShort=ww;A.normalizeUnits=gt;A.relativeTimeRounding=Gw;A.relativeTimeThreshold=Qw;A.calendarFormat=f0;A.prototype=x;A.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const on=Gg(),Zw={data(){return{nuoc:"Thc",desert:{thuc:!1,nguy:!1,ngo:!1,quan:!1},userId:"",tab:"users",moneyUpdate:0,listUser:[],messages:{},userWin:[],userLost:[],optionUsers:[],amount:1e4,cards:[],cardsOrigin:[],nameCard:""}},computed:{},watch:{},methods:{updateMoney(e,t,n){t=JSON.parse(JSON.stringify(t)),t.money=n||0,Ei(rn(on,"users/"+e),t)},addUser(){this.userId&&(Ei(rn(on,"users/"+this.userId),{ttl:0,tltsl:0,tltt:0,svtg:0}),this.userId="",this.$q.notify({type:"positive",message:"Thnh cng ri!",timeout:500}))},updateUser(){if(this.isValidate()){this.$q.notify({avatar:"https://creatorset.com/cdn/shop/files/Screenshot_2024-04-24_173231.png?v=1713973029",message:"Ngu",caption:"B chn ri haha",color:"green",timeout:1e3}),this.speak("My b ngu h? bm li ");return}this.userWin.forEach(e=>{let t=this.listUser[e];this.userWin.length===1?this.update(e,t,"tltsl",!1,this.userLost.length*10):this.update(e,t,"tltt",!1,this.userLost.length/this.userWin.length*10)}),this.userLost.forEach(e=>{this.update(e,this.listUser[e],"svtg",!1)}),this.userWin=[],this.userLost=[]},isValidate(){return this.userLost.length===0||this.userWin.length===0||this.userWin.length>(this.userWin.length+this.userLost.length)/2?!0:this.userWin.some(e=>this.userLost.includes(e))},update(e,t,n,i,s){let r={avatar:t.avatar||"",base:t.base||0,ttl:t.ttl,tltsl:t.tltsl,tltt:t.tltt,svtg:t.svtg,money:parseFloat(t.money||0)+parseFloat(s||0),updated:new Date().getTime()};i?(r[n]--,n!=="svtg"&&(r.ttl--,r.svtg--)):(r[n]++,n!=="svtg"&&(r.ttl++,r.svtg++)),Ei(rn(on,"users/"+e),r),n==="svtg"&&this.$q.notify({avatar:"https://creatorset.com/cdn/shop/files/Screenshot_2024-04-24_173231.png?v=1713973029",message:"G!!!!!!!!!!",caption:"Hahaha.......",color:"green",timeout:1e3})},getData(){$r(rn(on,"/users"),e=>{const t=Object.fromEntries(Object.entries(e.val()).sort(([,i],[,s])=>s.ttl-i.ttl));this.listUser=t;let n=[];Object.keys(t).forEach(i=>{n.push({id:i,avatar:t[i].avatar})}),this.optionUsers=n}),$r(rn(on,"/messages"),e=>{this.messages=e.val()})},percentageFormatter(e,t){let n=(e||0)/(t||0)*100||0;return new Intl.NumberFormat("default",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(n/100)},speak(e){const t=new SpeechSynthesisUtterance(e);t.lang="vi-VN",t.pitch=1,t.rate=1,t.volume=1,speechSynthesis.speak(t)},getLastUpdate(e){return e?A(e).calendar():""},formatNumber(e){return new Intl.NumberFormat("vi-VN",{maximumSignificantDigits:3}).format(e)},addCard(e){this.nameCard&&(Ei(rn(on,"cards/"+this.nameCard),{win:e||0,lost:0,nuoc:this.nuoc}),this.nameCard="",this.$q.notify({type:"positive",message:"Gii qu !!!",timeout:500}))},updateCard(e,t,n,i){t=JSON.parse(JSON.stringify(t)),delete t.key,t.updated=new Date().getTime(),i?t[n]--:t[n]++,Ei(rn(on,"cards/"+e),t),this.$q.notify({type:"positive",message:"Gii qu !!!",timeout:500})},searchCard(){let e=JSON.parse(JSON.stringify(this.cardsOrigin));if(this.nameCard){const t=this.nameCard.toLowerCase();this.cards=e.filter(n=>n.key.toLowerCase().includes(t));return}this.cards=e},getCards(){$r(rn(on,"/cards"),e=>{const t=e.val();let n=[];Object.keys(t).forEach(i=>{t[i].key=i,n.push(t[i])}),this.cards=n.sort((i,s)=>s.win-i.win),this.cardsOrigin=n.sort((i,s)=>s.win-i.win),this.searchCard()})}},created(){},mounted(){this.getData()}},Xw={class:"row q-mb-sm"},Jw={class:"col-2 q-pl-sm row"},eS={class:"row q-mb-sm"},tS=["src"],nS={class:"row col-12 q-mt-sm"},iS=["src"],sS={class:"col-2 q-pl-sm row"},rS={class:"row justify-between items-center"},oS={class:"col-12 row"},lS={class:"text-bold"},aS={style:{"font-size":"10px"}},uS={class:"col-12 row"},cS={class:"col-4 q-pl-md text-bold"},dS={class:"col-12 row justify-between items-center"},fS={class:"col-4 q-pl-md"},hS={class:"col-12 row justify-between items-center"},mS={class:"col-6 q-pl-md"},vS={class:"col-12 row justify-between items-center"},_S={class:"col-4 q-pl-md"},gS={class:"col-4 row justify-end"},pS={class:"col-12 row justify-between items-center"},yS={class:"col-4 q-pl-md"},wS={class:"col-4 row justify-end"},SS={class:"col-12 row justify-between items-center"},bS={class:"col-4 q-pl-md"},CS={class:"col-4 row justify-end"},kS={class:"row q-mb-sm"},TS={class:"col-2 q-pl-sm row"},ES={class:"q-gutter-sm"},xS={class:"row justify-between items-center"},MS={class:"col-12 row"},IS={class:"text-bold"},RS={style:{"font-size":"10px"}},DS={class:"col-12 row justify-between items-center"},NS={class:"col-4 q-pl-md"},PS={class:"col-4 row justify-end"};function OS(e,t,n,i,s,r){return Nt(),Bn(Vm,null,{default:rt(()=>[ae(bh,{modelValue:s.tab,"onUpdate:modelValue":t[1]||(t[1]=o=>s.tab=o),dense:"","mobile-arrows":"",class:"bg-green text-white shadow-2","active-color":"white","indicator-color":"white",align:"justify"},{default:rt(()=>[ae(Jl,{name:"users",icon:"perm_identity"}),ae(Jl,{name:"cards",icon:"flutter_dash",onClick:t[0]||(t[0]=o=>r.getCards())})]),_:1},8,["modelValue"]),ae(qm,{modelValue:s.tab,"onUpdate:modelValue":t[14]||(t[14]=o=>s.tab=o),animated:""},{default:rt(()=>[ae(Ia,{name:"users"},{default:rt(()=>[ne("div",Xw,[ae(Dr,{outlined:"",modelValue:s.userId,"onUpdate:modelValue":t[2]||(t[2]=o=>s.userId=o),square:"",dense:"",label:"Tn ngi chi",class:"col-10"},null,8,["modelValue"]),ae(yi),ne("div",Jw,[ae(nt,{color:"green",icon:"add",square:"",dense:"",class:"col-12",onClick:t[3]||(t[3]=o=>r.addUser())})])]),ne("div",eS,[ae(ka,{filled:"",modelValue:s.userWin,"onUpdate:modelValue":t[4]||(t[4]=o=>s.userWin=o),multiple:"",options:s.optionUsers,"option-value":"id","option-label":"id",class:"col-12",label:"You win","emit-value":"","map-options":""},{"selected-item":rt(o=>[ae(Jr,{removable:"",dense:"",onRemove:l=>o.removeAtIndex(o.index),tabindex:o.tabindex,color:"white","text-color":"secondary",class:"q-ma-none"},{default:rt(()=>[o.opt.avatar?(Nt(),Bn(ms,{key:0,color:"secondary","text-color":"white"},{default:rt(()=>[ne("img",{src:o.opt.avatar},null,8,tS)]),_:2},1024)):(Nt(),Bn(ms,{key:1,color:"secondary","text-color":"white",icon:"perm_identity"})),hs(" "+Le(o.opt.id),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options"]),ne("div",nS,[ae(ka,{filled:"",modelValue:s.userLost,"onUpdate:modelValue":t[5]||(t[5]=o=>s.userLost=o),multiple:"",options:s.optionUsers,"option-value":"id","option-label":"id",class:"col-10",label:"You lost","emit-value":"","map-options":""},{"selected-item":rt(o=>[ae(Jr,{removable:"",dense:"",onRemove:l=>o.removeAtIndex(o.index),tabindex:o.tabindex,color:"white","text-color":"secondary",class:"q-ma-none"},{default:rt(()=>[o.opt.avatar?(Nt(),Bn(ms,{key:0,color:"secondary","text-color":"white"},{default:rt(()=>[ne("img",{src:o.opt.avatar},null,8,iS)]),_:2},1024)):(Nt(),Bn(ms,{key:1,color:"secondary","text-color":"white",icon:"perm_identity"})),hs(" "+Le(o.opt.id),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options"]),ae(yi),ne("div",sS,[ae(nt,{color:"green",icon:"add",square:"",dense:"",class:"col-12",onClick:t[6]||(t[6]=o=>r.updateUser())})])])]),(Nt(!0),fs(Ql,null,Kl(s.listUser,(o,l,a)=>(Nt(),fs("div",{key:l,class:"q-pa-sm"},[ne("div",rS,[ne("div",oS,[ne("div",lS,[hs(" Top "+Le(a+1)+" - "+Le(l)+" ",1),a===0?(Nt(),Bn(Cm,{key:0,align:"top",color:"green"},{default:rt(()=>[ae(vt,{name:"emoji_events"})]),_:1})):oh("",!0)]),ae(yi),ne("div",aS,Le(r.getLastUpdate(o.updated||0)||""),1)]),ne("div",uS,[t[15]||(t[15]=ne("div",{class:"col-4"},"Tng im",-1)),ne("div",cS,[hs(Le(r.formatNumber(o.money||0))+" ",1),ae(km,{modelValue:o.money,"onUpdate:modelValue":u=>o.money=u},{default:rt(u=>[ae(Dr,{autofocus:"",outlined:"",dense:"",modelValue:u.value,"onUpdate:modelValue":c=>u.value=c,"model-value":u.value},{after:rt(()=>[ae(nt,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:Zl(u.cancel,["stop","prevent"])},null,8,["onClick"]),yu(ae(nt,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:Zl(c=>r.updateMoney(l,o,u.value),["stop","prevent"])},null,8,["onClick"]),[[Ym]])]),_:2},1032,["modelValue","onUpdate:modelValue","model-value"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t[16]||(t[16]=ne("div",{class:"col-4 row justify-end"},[ne("div",{style:{"font-size":"8px"}}," Tnh t ngy 13/07/2025 ")],-1))]),ne("div",dS,[t[17]||(t[17]=ne("div",{class:"col-4"},"Tham gia",-1)),ne("div",fS,Le(o.svtg||0),1),t[18]||(t[18]=ne("div",{class:"col-4 row justify-end"},null,-1))]),ne("div",hS,[t[19]||(t[19]=ne("div",{class:"col-4"},"T l thng",-1)),ne("div",mS,Le(o.ttl||0)+" / "+Le(o.svtg||0)+" ("+Le(r.percentageFormatter(o.ttl,o.svtg))+")",1),t[20]||(t[20]=ne("div",{class:"col-2 row justify-end"},null,-1))]),ne("div",vS,[t[21]||(t[21]=ne("div",{class:"col-4"},"T l thua",-1)),ne("div",_S,Le((o.svtg||0)-(o.ttl||0))+" / "+Le(o.svtg||0),1),ne("div",gS,[ae(nt,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"svtg")},null,8,["onClick"]),ae(nt,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"svtg",!0)},null,8,["onClick"])])]),ne("div",pS,[t[22]||(t[22]=ne("div",{class:"col-4"},"T l thng solo",-1)),ne("div",yS,Le(o.tltsl||0)+" / "+Le(o.svtg||0),1),ne("div",wS,[ae(nt,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"tltsl")},null,8,["onClick"]),ae(nt,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"tltsl",!0)},null,8,["onClick"])])]),ne("div",SS,[t[23]||(t[23]=ne("div",{class:"col-4"}," T l thng team",-1)),ne("div",bS,Le(o.tltt||0)+" / "+Le(o.svtg||0),1),ne("div",CS,[ae(nt,{flat:"",icon:"add",size:"sm",onClick:u=>r.update(l,o,"tltt")},null,8,["onClick"]),ae(nt,{flat:"",icon:"remove",size:"sm",onClick:u=>r.update(l,o,"tltt",!0)},null,8,["onClick"])])])]),ae(Ta,{class:"q-mt-md"})]))),128))]),_:1}),ae(Ia,{name:"cards"},{default:rt(()=>[ne("div",kS,[ae(Dr,{outlined:"",modelValue:s.nameCard,"onUpdate:modelValue":[t[7]||(t[7]=o=>s.nameCard=o),t[8]||(t[8]=o=>r.searchCard())],debounce:"1000",square:"",dense:"",label:"Tm tn tng",class:"col-10",clearable:""},null,8,["modelValue"]),ae(yi),ne("div",TS,[ae(nt,{color:"green",icon:"add",square:"",dense:"",class:"col-12",onClick:t[9]||(t[9]=o=>r.addCard(1))})])]),ne("div",ES,[ae(ws,{modelValue:s.nuoc,"onUpdate:modelValue":t[10]||(t[10]=o=>s.nuoc=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Thc",label:"Thc"},null,8,["modelValue"]),ae(ws,{modelValue:s.nuoc,"onUpdate:modelValue":t[11]||(t[11]=o=>s.nuoc=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Ngu",label:"Ngu"},null,8,["modelValue"]),ae(ws,{modelValue:s.nuoc,"onUpdate:modelValue":t[12]||(t[12]=o=>s.nuoc=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Ng",label:"Ng"},null,8,["modelValue"]),ae(ws,{modelValue:s.nuoc,"onUpdate:modelValue":t[13]||(t[13]=o=>s.nuoc=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Qun",label:"Qun"},null,8,["modelValue"])]),(Nt(!0),fs(Ql,null,Kl(s.cards,(o,l)=>(Nt(),fs("div",{key:l,class:"q-pa-sm"},[ne("div",xS,[ne("div",MS,[ne("div",IS,Le(l+1)+" - "+Le(o.nuoc)+" | "+Le(o.key),1),ae(yi),ne("div",RS,Le(r.getLastUpdate(o.updated||0)||""),1)]),ne("div",DS,[t[24]||(t[24]=ne("div",{class:"col-4"},"WIN",-1)),ne("div",NS,Le(o.win),1),ne("div",PS,[ae(nt,{flat:"",icon:"add",size:"sm",onClick:a=>r.updateCard(o.key,o,"win",!1)},null,8,["onClick"]),ae(nt,{flat:"",icon:"remove",size:"sm",onClick:a=>r.updateCard(o.key,o,"win",!0)},null,8,["onClick"])])])]),ae(Ta,{class:"q-mt-md"})]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})}const LS=mh(Zw,[["render",OS]]);export{LS as default};
