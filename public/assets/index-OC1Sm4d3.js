import{k as st,r as V,o as me,w as j,a as S,g as oe,a8 as rt,i as lt,b5 as ut,j as Ce,a5 as ct,X as We,D as dt,F as Q,E as ft,H as gt,h as I,S as ie,Q as Re,b6 as ht,b as ce,a1 as vt,C as mt,$ as Ct,c as pt,aa as we}from"./index-CccC_Qza.js";let pe,de=0;const B=new Array(256);for(let e=0;e<256;e++)B[e]=(e+256).toString(16).substring(1);const Et=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let o=t;o>0;o--)n.push(Math.floor(Math.random()*256));return n}})(),Se=4096;function ye(){(pe===void 0||de+16>Se)&&(de=0,pe=Et(Se));const e=Array.prototype.slice.call(pe,de,de+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,B[e[0]]+B[e[1]]+B[e[2]]+B[e[3]]+"-"+B[e[4]]+B[e[5]]+"-"+B[e[6]]+B[e[7]]+"-"+B[e[8]]+B[e[9]]+"-"+B[e[10]]+B[e[11]]+B[e[12]]+B[e[13]]+B[e[14]]+B[e[15]]}function yt(e){return e??null}function Ae(e,t){return e??(t===!0?`f_${ye()}`:null)}function bt({getValue:e,required:t=!0}={}){if(st.value===!0){const n=e!==void 0?V(yt(e())):V(null);return t===!0&&n.value===null&&me(()=>{n.value=`f_${ye()}`}),e!==void 0&&j(e,o=>{n.value=Ae(o,t)}),n}return e!==void 0?S(()=>Ae(e(),t)):V(`f_${ye()}`)}const Oe=/^on[A-Z]/;function _t(){const{attrs:e,vnode:t}=oe(),n={listeners:V({}),attributes:V({})};function o(){const i={},a={};for(const s in e)s!=="class"&&s!=="style"&&Oe.test(s)===!1&&(i[s]=e[s]);for(const s in t.props)Oe.test(s)===!0&&(a[s]=t.props[s]);n.attributes.value=i,n.listeners.value=a}return rt(o),o(),n}const Rt={dark:{type:Boolean,default:null}};function wt(e,t){return S(()=>e.dark===null?t.dark.isActive:e.dark)}function St({validate:e,resetValidation:t,requiresQForm:n}){const o=lt(ut,!1);if(o!==!1){const{props:i,proxy:a}=oe();Object.assign(a,{validate:e,resetValidation:t}),j(()=>i.disable,s=>{s===!0?(typeof t=="function"&&t(),o.unbindComponent(a)):o.bindComponent(a)}),me(()=>{i.disable!==!0&&o.bindComponent(a)}),Ce(()=>{i.disable!==!0&&o.unbindComponent(a)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Ie=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,xe=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Me=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,fe=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,ge=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Ee={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Ie.test(e),hexaColor:e=>xe.test(e),hexOrHexaColor:e=>Me.test(e),rgbColor:e=>fe.test(e),rgbaColor:e=>ge.test(e),rgbOrRgbaColor:e=>fe.test(e)||ge.test(e),hexOrRgbColor:e=>Ie.test(e)||fe.test(e),hexaOrRgbaColor:e=>xe.test(e)||ge.test(e),anyColor:e=>Me.test(e)||fe.test(e)||ge.test(e)},At=[!0,!1,"ondemand"],Ot={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>At.includes(e)}};function It(e,t){const{props:n,proxy:o}=oe(),i=V(!1),a=V(null),s=V(!1);St({validate:F,resetValidation:A});let d=0,v;const C=S(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),_=S(()=>n.disable!==!0&&C.value===!0&&t.value===!1),m=S(()=>n.error===!0||i.value===!0),R=S(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:a.value);j(()=>n.modelValue,()=>{s.value=!0,_.value===!0&&n.lazyRules===!1&&U()});function h(){n.lazyRules!=="ondemand"&&_.value===!0&&s.value===!0&&U()}j(()=>n.reactiveRules,K=>{K===!0?v===void 0&&(v=j(()=>n.rules,h,{immediate:!0,deep:!0})):v!==void 0&&(v(),v=void 0)},{immediate:!0}),j(()=>n.lazyRules,h),j(e,K=>{K===!0?s.value=!0:_.value===!0&&n.lazyRules!=="ondemand"&&U()});function A(){d++,t.value=!1,s.value=!1,i.value=!1,a.value=null,U.cancel()}function F(K=n.modelValue){if(n.disable===!0||C.value===!1)return!0;const q=++d,W=t.value!==!0?()=>{s.value=!0}:()=>{},P=(M,x)=>{M===!0&&W(),i.value=M,a.value=x||null,t.value=!1},H=[];for(let M=0;M<n.rules.length;M++){const x=n.rules[M];let L;if(typeof x=="function"?L=x(K,Ee):typeof x=="string"&&Ee[x]!==void 0&&(L=Ee[x](K)),L===!1||typeof L=="string")return P(!0,L),!1;L!==!0&&L!==void 0&&H.push(L)}return H.length===0?(P(!1),!0):(t.value=!0,Promise.all(H).then(M=>{if(M===void 0||Array.isArray(M)===!1||M.length===0)return q===d&&P(!1),!0;const x=M.find(L=>L===!1||typeof L=="string");return q===d&&P(x!==void 0,x),x===void 0},M=>(q===d&&(console.error(M),P(!0)),!1)))}const U=ct(F,0);return Ce(()=>{v?.(),U.cancel()}),Object.assign(o,{resetValidation:A,validate:F}),We(o,"hasError",()=>m.value),{isDirtyModel:s,hasRules:C,hasError:m,errorMessage:R,validate:F,resetValidation:A}}let X=[],se=[];function Qe(e){se=se.filter(t=>t!==e)}function Rn(e){Qe(e),se.push(e)}function wn(e){Qe(e),se.length===0&&X.length!==0&&(X[X.length-1](),X=[])}function Xe(e){se.length===0?e():X.push(e)}function xt(e){X=X.filter(t=>t!==e)}function be(e){return e!=null&&(""+e).length!==0}const Mt={...Rt,...Ot,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},kt={...Mt,maxlength:[Number,String]},Tt=["update:modelValue","clear","focus","blur"];function Nt({requiredForAttr:e=!0,tagProp:t,changeEvent:n=!1}={}){const{props:o,proxy:i}=oe(),a=wt(o,i.$q),s=bt({required:e,getValue:()=>o.for});return{requiredForAttr:e,changeEvent:n,tag:t===!0?S(()=>o.tag):{value:"label"},isDark:a,editable:S(()=>o.disable!==!0&&o.readonly!==!0),innerLoading:V(!1),focused:V(!1),hasPopupOpen:!1,splitAttrs:_t(),targetUid:s,rootRef:V(null),targetRef:V(null),controlRef:V(null)}}function Ft(e){const{props:t,emit:n,slots:o,attrs:i,proxy:a}=oe(),{$q:s}=a;let d=null;e.hasValue===void 0&&(e.hasValue=S(()=>be(t.modelValue))),e.emitValue===void 0&&(e.emitValue=f=>{n("update:modelValue",f)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:u,onFocusout:l}),Object.assign(e,{clearValue:g,onControlFocusin:u,onControlFocusout:l,focus:x}),e.computedCounter===void 0&&(e.computedCounter=S(()=>{if(t.counter!==!1){const f=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,b=t.maxlength!==void 0?t.maxlength:t.maxValues;return f+(b!==void 0?" / "+b:"")}}));const{isDirtyModel:v,hasRules:C,hasError:_,errorMessage:m,resetValidation:R}=It(e.focused,e.innerLoading),h=e.floatingLabel!==void 0?S(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):S(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),A=S(()=>t.bottomSlots===!0||t.hint!==void 0||C.value===!0||t.counter===!0||t.error!==null),F=S(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),U=S(()=>`q-field row no-wrap items-start q-field--${F.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(h.value===!0?" q-field--float":"")+(q.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(_.value===!0?" q-field--error":"")+(_.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&A.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),K=S(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(_.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),q=S(()=>t.labelSlot===!0||t.label!==void 0),W=S(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&_.value!==!0?` text-${t.labelColor}`:"")),P=S(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:h.value,modelValue:t.modelValue,emitValue:e.emitValue})),H=S(()=>{const f={};return e.targetUid.value&&(f.for=e.targetUid.value),t.disable===!0&&(f["aria-disabled"]="true"),f});function M(){const f=document.activeElement;let b=e.targetRef?.value;b&&(f===null||f.id!==e.targetUid.value)&&(b.hasAttribute("tabindex")===!0||(b=b.querySelector("[tabindex]")),b!==f&&b?.focus({preventScroll:!0}))}function x(){Xe(M)}function L(){xt(M);const f=document.activeElement;f!==null&&e.rootRef.value.contains(f)&&f.blur()}function u(f){d!==null&&(clearTimeout(d),d=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",f))}function l(f,b){d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",f)),b?.())})}function g(f){dt(f),s.platform.is.mobile!==!0?(e.targetRef?.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),e.changeEvent===!0&&n("change",null),n("clear",t.modelValue),Q(()=>{const b=v.value;R(),v.value=b})}function c(f){[13,32].includes(f.keyCode)&&g(f)}function p(){const f=[];return o.prepend!==void 0&&f.push(I("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:ie},o.prepend())),f.push(I("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},E())),_.value===!0&&t.noErrorIcon===!1&&f.push(y("error",[I(Re,{name:s.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?f.push(y("inner-loading-append",o.loading!==void 0?o.loading():[I(ht,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&f.push(y("inner-clearable-append",[I(Re,{class:"q-field__focusable-action",name:t.clearIcon||s.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":s.lang.label.clear,onKeyup:c,onClick:g})])),o.append!==void 0&&f.push(I("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:ie},o.append())),e.getInnerAppend!==void 0&&f.push(y("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&f.push(e.getControlChild()),f}function E(){const f=[];return t.prefix!==void 0&&t.prefix!==null&&f.push(I("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&f.push(e.getShadowControl()),e.getControl!==void 0?f.push(e.getControl()):o.rawControl!==void 0?f.push(o.rawControl()):o.control!==void 0&&f.push(I("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},o.control(P.value))),q.value===!0&&f.push(I("div",{class:W.value},ce(o.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&f.push(I("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),f.concat(ce(o.default))}function N(){let f,b;_.value===!0?m.value!==null?(f=[I("div",{role:"alert"},m.value)],b=`q--slot-error-${m.value}`):(f=ce(o.error),b="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(f=[I("div",t.hint)],b=`q--slot-hint-${t.hint}`):(f=ce(o.hint),b="q--slot-hint"));const O=t.counter===!0||o.counter!==void 0;if(t.hideBottomSpace===!0&&O===!1&&f===void 0)return;const k=I("div",{key:b,class:"q-field__messages col"},f);return I("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:ie},[t.hideBottomSpace===!0?k:I(vt,{name:"q-transition--field-message"},()=>k),O===!0?I("div",{class:"q-field__counter"},o.counter!==void 0?o.counter():e.computedCounter.value):null])}function y(f,b){return b===null?null:I("div",{key:f,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},b)}let w=!1;return ft(()=>{w=!0}),gt(()=>{w===!0&&t.autofocus===!0&&a.focus()}),t.autofocus===!0&&me(()=>{a.focus()}),Ce(()=>{d!==null&&clearTimeout(d)}),Object.assign(a,{focus:x,blur:L}),function(){const b=e.getControl===void 0&&o.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...H.value}:H.value;return I(e.tag.value,{ref:e.rootRef,class:[U.value,i.class],style:i.style,...b},[o.before!==void 0?I("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:ie},o.before()):null,I("div",{class:"q-field__inner relative-position col self-stretch"},[I("div",{ref:e.controlRef,class:K.value,tabindex:-1,...e.controlEvents},p()),A.value===!0?N():null]),o.after!==void 0?I("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:ie},o.after()):null])}}const ke={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ve={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},et=Object.keys(ve);et.forEach(e=>{ve[e].regex=new RegExp(ve[e].pattern)});const qt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+et.join("")+"])|(.)","g"),Te=/[.*+?^${}()|[\]\\]/g,D="",Dt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Lt(e,t,n,o){let i,a,s,d,v,C;const _=V(null),m=V(h());function R(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}j(()=>e.type+e.autogrow,F),j(()=>e.mask,u=>{if(u!==void 0)U(m.value,!0);else{const l=x(m.value);F(),e.modelValue!==l&&t("update:modelValue",l)}}),j(()=>e.fillMask+e.reverseFillMask,()=>{_.value===!0&&U(m.value,!0)}),j(()=>e.unmaskedValue,()=>{_.value===!0&&U(m.value)});function h(){if(F(),_.value===!0){const u=H(x(e.modelValue));return e.fillMask!==!1?L(u):u}return e.modelValue}function A(u){if(u<i.length)return i.slice(-u);let l="",g=i;const c=g.indexOf(D);if(c!==-1){for(let p=u-g.length;p>0;p--)l+=D;g=g.slice(0,c)+l+g.slice(c)}return g}function F(){if(_.value=e.mask!==void 0&&e.mask.length!==0&&R(),_.value===!1){d=void 0,i="",a="";return}const u=ke[e.mask]===void 0?e.mask:ke[e.mask],l=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",g=l.replace(Te,"\\$&"),c=[],p=[],E=[];let N=e.reverseFillMask===!0,y="",w="";u.replace(qt,(k,r,T,z,Y)=>{if(z!==void 0){const G=ve[z];E.push(G),w=G.negate,N===!0&&(p.push("(?:"+w+"+)?("+G.pattern+"+)?(?:"+w+"+)?("+G.pattern+"+)?"),N=!1),p.push("(?:"+w+"+)?("+G.pattern+")?")}else if(T!==void 0)y="\\"+(T==="\\"?"":T),E.push(T),c.push("([^"+y+"]+)?"+y+"?");else{const G=r!==void 0?r:Y;y=G==="\\"?"\\\\\\\\":G.replace(Te,"\\\\$&"),E.push(G),c.push("([^"+y+"]+)?"+y+"?")}});const f=new RegExp("^"+c.join("")+"("+(y===""?".":"[^"+y+"]")+"+)?"+(y===""?"":"["+y+"]*")+"$"),b=p.length-1,O=p.map((k,r)=>r===0&&e.reverseFillMask===!0?new RegExp("^"+g+"*"+k):r===b?new RegExp("^"+k+"("+(w===""?".":w)+"+)?"+(e.reverseFillMask===!0?"$":g+"*")):new RegExp("^"+k));s=E,d=k=>{const r=f.exec(e.reverseFillMask===!0?k:k.slice(0,E.length+1));r!==null&&(k=r.slice(1).join(""));const T=[],z=O.length;for(let Y=0,G=k;Y<z;Y++){const te=O[Y].exec(G);if(te===null)break;G=G.slice(te.shift().length),T.push(...te)}return T.length!==0?T.join(""):k},i=E.map(k=>typeof k=="string"?k:D).join(""),a=i.split(D).join(l)}function U(u,l,g){const c=o.value,p=c.selectionEnd,E=c.value.length-p,N=x(u);l===!0&&F();const y=H(N),w=e.fillMask!==!1?L(y):y,f=m.value!==w;c.value!==w&&(c.value=w),f===!0&&(m.value=w),document.activeElement===c&&Q(()=>{if(w===a){const O=e.reverseFillMask===!0?a.length:0;c.setSelectionRange(O,O,"forward");return}if(g==="insertFromPaste"&&e.reverseFillMask!==!0){const O=c.selectionEnd;let k=p-1;for(let r=v;r<=k&&r<O;r++)i[r]!==D&&k++;q.right(c,k);return}if(["deleteContentBackward","deleteContentForward"].indexOf(g)!==-1){const O=e.reverseFillMask===!0?p===0?w.length>y.length?1:0:Math.max(0,w.length-(w===a?0:Math.min(y.length,E)+1))+1:p;c.setSelectionRange(O,O,"forward");return}if(e.reverseFillMask===!0)if(f===!0){const O=Math.max(0,w.length-(w===a?0:Math.min(y.length,E+1)));O===1&&p===1?c.setSelectionRange(O,O,"forward"):q.rightReverse(c,O)}else{const O=w.length-E;c.setSelectionRange(O,O,"backward")}else if(f===!0){const O=Math.max(0,i.indexOf(D),Math.min(y.length,p)-1);q.right(c,O)}else{const O=p-1;q.right(c,O)}});const b=e.unmaskedValue===!0?x(w):w;String(e.modelValue)!==b&&(e.modelValue!==null||b!=="")&&n(b,!0)}function K(u,l,g){const c=H(x(u.value));l=Math.max(0,i.indexOf(D),Math.min(c.length,l)),v=l,u.setSelectionRange(l,g,"forward")}const q={left(u,l){const g=i.slice(l-1).indexOf(D)===-1;let c=Math.max(0,l-1);for(;c>=0;c--)if(i[c]===D){l=c,g===!0&&l++;break}if(c<0&&i[l]!==void 0&&i[l]!==D)return q.right(u,0);l>=0&&u.setSelectionRange(l,l,"backward")},right(u,l){const g=u.value.length;let c=Math.min(g,l+1);for(;c<=g;c++)if(i[c]===D){l=c;break}else i[c-1]===D&&(l=c);if(c>g&&i[l-1]!==void 0&&i[l-1]!==D)return q.left(u,g);u.setSelectionRange(l,l,"forward")},leftReverse(u,l){const g=A(u.value.length);let c=Math.max(0,l-1);for(;c>=0;c--)if(g[c-1]===D){l=c;break}else if(g[c]===D&&(l=c,c===0))break;if(c<0&&g[l]!==void 0&&g[l]!==D)return q.rightReverse(u,0);l>=0&&u.setSelectionRange(l,l,"backward")},rightReverse(u,l){const g=u.value.length,c=A(g),p=c.slice(0,l+1).indexOf(D)===-1;let E=Math.min(g,l+1);for(;E<=g;E++)if(c[E-1]===D){l=E,l>0&&p===!0&&l--;break}if(E>g&&c[l-1]!==void 0&&c[l-1]!==D)return q.leftReverse(u,g);u.setSelectionRange(l,l,"forward")}};function W(u){t("click",u),C=void 0}function P(u){if(t("keydown",u),mt(u)===!0||u.altKey===!0)return;const l=o.value,g=l.selectionStart,c=l.selectionEnd;if(u.shiftKey||(C=void 0),u.keyCode===37||u.keyCode===39){u.shiftKey&&C===void 0&&(C=l.selectionDirection==="forward"?g:c);const p=q[(u.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(u.preventDefault(),p(l,C===g?c:g),u.shiftKey){const E=l.selectionStart;l.setSelectionRange(Math.min(C,E),Math.max(C,E),"forward")}}else u.keyCode===8&&e.reverseFillMask!==!0&&g===c?(q.left(l,g),l.setSelectionRange(l.selectionStart,c,"backward")):u.keyCode===46&&e.reverseFillMask===!0&&g===c&&(q.rightReverse(l,c),l.setSelectionRange(g,l.selectionEnd,"forward"))}function H(u){if(u==null||u==="")return"";if(e.reverseFillMask===!0)return M(u);const l=s;let g=0,c="";for(let p=0;p<l.length;p++){const E=u[g],N=l[p];if(typeof N=="string")c+=N;else if(E!==void 0&&N.regex.test(E))c+=N.transform!==void 0?N.transform(E):E,g++;else return c}return c}function M(u){const l=s,g=i.indexOf(D);let c=u.length-1,p="";for(let E=l.length-1;E>=0&&c!==-1;E--){const N=l[E];let y=u[c];if(typeof N=="string")p=N+p;else if(y!==void 0&&N.regex.test(y))do p=(N.transform!==void 0?N.transform(y):y)+p,c--,y=u[c];while(g===E&&y!==void 0&&N.regex.test(y));else return p}return p}function x(u){return typeof u!="string"||d===void 0?typeof u=="number"?d(""+u):u:d(u)}function L(u){return a.length-u.length<=0?u:e.reverseFillMask===!0&&u.length!==0?a.slice(0,-u.length)+u:u+a.slice(u.length)}return{innerValue:m,hasMask:_,moveCursorForPaste:K,updateMaskValue:U,onMaskedKeydown:P,onMaskedClick:W}}const Bt={name:String};function Sn(e={}){return(t,n,o)=>{t[n](I("input",{class:"hidden"+(o||""),...e.value}))}}function Vt(e){return S(()=>e.name||e.for)}function $t(e,t){function n(){const o=e.modelValue;try{const i="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(o)===o&&("length"in o?Array.from(o):[o]).forEach(a=>{i.items.add(a)}),{files:i.files}}catch{return{files:void 0}}}return S(()=>{if(e.type==="file")return n()})}const Ut=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Gt=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,jt=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Ht=/[a-z0-9_ -]$/i;function Kt(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(Ct.is.firefox===!0?Ht.test(n.data)===!1:Ut.test(n.data)===!0||Gt.test(n.data)===!0||jt.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}const An=pt({name:"QInput",inheritAttrs:!1,props:{...kt,...Dt,...Bt,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Tt,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:o}=oe(),{$q:i}=o,a={};let s=NaN,d,v,C=null,_;const m=V(null),R=Vt(e),{innerValue:h,hasMask:A,moveCursorForPaste:F,updateMaskValue:U,onMaskedKeydown:K,onMaskedClick:q}=Lt(e,t,y,m),W=$t(e),P=S(()=>be(h.value)),H=Kt(E),M=Nt({changeEvent:!0}),x=S(()=>e.type==="textarea"||e.autogrow===!0),L=S(()=>x.value===!0||["text","search","url","tel","password"].includes(e.type)),u=S(()=>{const r={...M.splitAttrs.listeners.value,onInput:E,onPaste:p,onChange:f,onBlur:b,onFocus:we};return r.onCompositionstart=r.onCompositionupdate=r.onCompositionend=H,A.value===!0&&(r.onKeydown=K,r.onClick=q),e.autogrow===!0&&(r.onAnimationend=N),r}),l=S(()=>{const r={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:R.value,...M.splitAttrs.attributes.value,id:M.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return x.value===!1&&(r.type=e.type),e.autogrow===!0&&(r.rows=1),r});j(()=>e.type,()=>{m.value&&(m.value.value=e.modelValue)}),j(()=>e.modelValue,r=>{if(A.value===!0){if(v===!0&&(v=!1,String(r)===s))return;U(r)}else h.value!==r&&(h.value=r,e.type==="number"&&a.hasOwnProperty("value")===!0&&(d===!0?d=!1:delete a.value));e.autogrow===!0&&Q(w)}),j(()=>e.autogrow,r=>{r===!0?Q(w):m.value!==null&&n.rows>0&&(m.value.style.height="auto")}),j(()=>e.dense,()=>{e.autogrow===!0&&Q(w)});function g(){Xe(()=>{const r=document.activeElement;m.value!==null&&m.value!==r&&(r===null||r.id!==M.targetUid.value)&&m.value.focus({preventScroll:!0})})}function c(){m.value?.select()}function p(r){if(A.value===!0&&e.reverseFillMask!==!0){const T=r.target;F(T,T.selectionStart,T.selectionEnd)}t("paste",r)}function E(r){if(!r||!r.target)return;if(e.type==="file"){t("update:modelValue",r.target.files);return}const T=r.target.value;if(r.target.qComposing===!0){a.value=T;return}if(A.value===!0)U(T,!1,r.inputType);else if(y(T),L.value===!0&&r.target===document.activeElement){const{selectionStart:z,selectionEnd:Y}=r.target;z!==void 0&&Y!==void 0&&Q(()=>{r.target===document.activeElement&&T.indexOf(r.target.value)===0&&r.target.setSelectionRange(z,Y)})}e.autogrow===!0&&w()}function N(r){t("animationend",r),w()}function y(r,T){_=()=>{C=null,e.type!=="number"&&a.hasOwnProperty("value")===!0&&delete a.value,e.modelValue!==r&&s!==r&&(s=r,T===!0&&(v=!0),t("update:modelValue",r),Q(()=>{s===r&&(s=NaN)})),_=void 0},e.type==="number"&&(d=!0,a.value=r),e.debounce!==void 0?(C!==null&&clearTimeout(C),a.value=r,C=setTimeout(_,e.debounce)):_()}function w(){requestAnimationFrame(()=>{const r=m.value;if(r!==null){const T=r.parentNode.style,{scrollTop:z}=r,{overflowY:Y,maxHeight:G}=i.platform.is.firefox===!0?{}:window.getComputedStyle(r),te=Y!==void 0&&Y!=="scroll";te===!0&&(r.style.overflowY="hidden"),T.marginBottom=r.scrollHeight-1+"px",r.style.height="1px",r.style.height=r.scrollHeight+"px",te===!0&&(r.style.overflowY=parseInt(G,10)<r.scrollHeight?"auto":"hidden"),T.marginBottom="",r.scrollTop=z}})}function f(r){H(r),C!==null&&(clearTimeout(C),C=null),_?.(),t("change",r.target.value)}function b(r){r!==void 0&&we(r),C!==null&&(clearTimeout(C),C=null),_?.(),d=!1,v=!1,delete a.value,e.type!=="file"&&setTimeout(()=>{m.value!==null&&(m.value.value=h.value!==void 0?h.value:"")})}function O(){return a.hasOwnProperty("value")===!0?a.value:h.value!==void 0?h.value:""}Ce(()=>{b()}),me(()=>{e.autogrow===!0&&w()}),Object.assign(M,{innerValue:h,fieldClass:S(()=>`q-${x.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:S(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:m,emitValue:y,hasValue:P,floatingLabel:S(()=>P.value===!0&&(e.type!=="number"||isNaN(h.value)===!1)||be(e.displayValue)),getControl:()=>I(x.value===!0?"textarea":"input",{ref:m,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...l.value,...u.value,...e.type!=="file"?{value:O()}:W.value}),getShadowControl:()=>I("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(x.value===!0?"":" text-no-wrap")},[I("span",{class:"invisible"},O()),I("span",e.shadowText)])});const k=Ft(M);return Object.assign(o,{focus:g,select:c,getNativeElement:()=>m.value}),We(o,"nativeEl",()=>m.value),k}});var Ne;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Ne||(Ne={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Fe||(Fe={}));var qe;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(qe||(qe={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=["user","model","function","system"];var Le;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Le||(Le={}));var Be;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Be||(Be={}));var Ve;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ve||(Ve={}));var $e;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})($e||($e={}));var ae;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ae||(ae={}));var Ue;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Ue||(Ue={}));var Ge;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Ge||(Ge={}));var je;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(je||(je={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ne extends ${constructor(t,n){super(t),this.response=n}}class tt extends ${constructor(t,n,o,i){super(t),this.status=n,this.statusText=o,this.errorDetails=i}}class J extends ${}class nt extends ${}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="https://generativelanguage.googleapis.com",Yt="v1beta",zt="0.24.1",Zt="genai-js";var ee;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ee||(ee={}));class Jt{constructor(t,n,o,i,a){this.model=t,this.task=n,this.apiKey=o,this.stream=i,this.requestOptions=a}toString(){var t,n;const o=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Yt;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Pt}/${o}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function Wt(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${Zt}/${zt}`),t.join(" ")}async function Qt(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Wt(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let o=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(i){throw new J(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${i.message}`)}for(const[i,a]of o.entries()){if(i==="x-goog-api-key")throw new J(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new J(`Header name ${i} can only be set using the apiClient field`);n.append(i,a)}}return n}async function Xt(e,t,n,o,i,a){const s=new Jt(e,t,n,o,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},on(a)),{method:"POST",headers:await Qt(s),body:i})}}async function ue(e,t,n,o,i,a={},s=fetch){const{url:d,fetchOptions:v}=await Xt(e,t,n,o,i,a);return en(d,v,s)}async function en(e,t,n=fetch){let o;try{o=await n(e,t)}catch(i){tn(i,e)}return o.ok||await nn(o,e),o}function tn(e,t){let n=e;throw n.name==="AbortError"?(n=new nt(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof tt||e instanceof J||(n=new $(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function nn(e,t){let n="",o;try{const i=await e.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,o=i.error.details)}catch{}throw new tt(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,o)}function on(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const n=new AbortController;e?.timeout>=0&&setTimeout(()=>n.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),he(e.candidates[0]))throw new ne(`${Z(e)}`,e);return an(e)}else if(e.promptFeedback)throw new ne(`Text not available. ${Z(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),he(e.candidates[0]))throw new ne(`${Z(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),He(e)[0]}else if(e.promptFeedback)throw new ne(`Function call not available. ${Z(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),he(e.candidates[0]))throw new ne(`${Z(e)}`,e);return He(e)}else if(e.promptFeedback)throw new ne(`Function call not available. ${Z(e)}`,e)},e}function an(e){var t,n,o,i;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(o=e.candidates)===null||o===void 0?void 0:o[0].content)===null||i===void 0?void 0:i.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function He(e){var t,n,o,i;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(o=e.candidates)===null||o===void 0?void 0:o[0].content)===null||i===void 0?void 0:i.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}const sn=[ae.RECITATION,ae.SAFETY,ae.LANGUAGE];function he(e){return!!e.finishReason&&sn.includes(e.finishReason)}function Z(e){var t,n,o;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((o=e.candidates)===null||o===void 0)&&o[0]){const a=e.candidates[0];he(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function re(e){return this instanceof re?(this.v=e,this):new re(e)}function rn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i,a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(R){o[R]&&(i[R]=function(h){return new Promise(function(A,F){a.push([R,h,A,F])>1||d(R,h)})})}function d(R,h){try{v(o[R](h))}catch(A){m(a[0][3],A)}}function v(R){R.value instanceof re?Promise.resolve(R.value.v).then(C,_):m(a[0][2],R)}function C(R){d("next",R)}function _(R){d("throw",R)}function m(R,h){R(h),a.shift(),a.length&&d(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ln(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=dn(t),[o,i]=n.tee();return{stream:cn(o),response:un(i)}}async function un(e){const t=[],n=e.getReader();for(;;){const{done:o,value:i}=await n.read();if(o)return _e(fn(t));t.push(i)}}function cn(e){return rn(this,arguments,function*(){const n=e.getReader();for(;;){const{value:o,done:i}=yield re(n.read());if(i)break;yield yield re(_e(o))}})}function dn(e){const t=e.getReader();return new ReadableStream({start(o){let i="";return a();function a(){return t.read().then(({value:s,done:d})=>{if(d){if(i.trim()){o.error(new $("Failed to parse stream"));return}o.close();return}i+=s;let v=i.match(Ke),C;for(;v;){try{C=JSON.parse(v[1])}catch{o.error(new $(`Error parsing JSON response: "${v[1]}"`));return}o.enqueue(C),i=i.substring(v[0].length),v=i.match(Ke)}return a()}).catch(s=>{let d=s;throw d.stack=s.stack,d.name==="AbortError"?d=new nt("Request aborted when reading from the stream"):d=new $("Error reading from the stream"),d})}}})}function fn(e){const t=e[e.length-1],n={promptFeedback:t?.promptFeedback};for(const o of e){if(o.candidates){let i=0;for(const a of o.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=a.citationMetadata,n.candidates[i].groundingMetadata=a.groundingMetadata,n.candidates[i].finishReason=a.finishReason,n.candidates[i].finishMessage=a.finishMessage,n.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[i].content||(n.candidates[i].content={role:a.content.role||"user",parts:[]});const s={};for(const d of a.content.parts)d.text&&(s.text=d.text),d.functionCall&&(s.functionCall=d.functionCall),d.executableCode&&(s.executableCode=d.executableCode),d.codeExecutionResult&&(s.codeExecutionResult=d.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),n.candidates[i].content.parts.push(s)}i++}o.usageMetadata&&(n.usageMetadata=o.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ot(e,t,n,o){const i=await ue(t,ee.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),o);return ln(i)}async function it(e,t,n,o){const a=await(await ue(t,ee.GENERATE_CONTENT,e,!1,JSON.stringify(n),o)).json();return{response:_e(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function le(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return gn(t)}function gn(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let o=!1,i=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),i=!0):(t.parts.push(a),o=!0);if(o&&i)throw new $("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!i)throw new $("No content is provided for sending chat message.");return o?t:n}function hn(e,t){var n;let o={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(n=t?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new J("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=e.contents}else if(i)o=Object.assign(Object.assign({},o),e.generateContentRequest);else{const a=le(e);o.contents=[a]}return{generateContentRequest:o}}function Pe(e){let t;return e.contents?t=e:t={contents:[le(e)]},e.systemInstruction&&(t.systemInstruction=at(e.systemInstruction)),t}function vn(e){return typeof e=="string"||Array.isArray(e)?{content:le(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],mn={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Cn(e){let t=!1;for(const n of e){const{role:o,parts:i}=n;if(!t&&o!=="user")throw new $(`First content should be with role 'user', got ${o}`);if(!De.includes(o))throw new $(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(De)}`);if(!Array.isArray(i))throw new $("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new $("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of i)for(const v of Ye)v in d&&(a[v]+=1);const s=mn[o];for(const d of Ye)if(!s.includes(d)&&a[d]>0)throw new $(`Content with role '${o}' can't contain '${d}' part`);t=!0}}function ze(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const o of n.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="SILENT_ERROR";class pn{constructor(t,n,o,i={}){this.model=n,this.params=o,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,o?.history&&(Cn(o.history),this._history=o.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var o,i,a,s,d,v;await this._sendPromise;const C=le(t),_={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,C]},m=Object.assign(Object.assign({},this._requestOptions),n);let R;return this._sendPromise=this._sendPromise.then(()=>it(this._apiKey,this.model,_,m)).then(h=>{var A;if(ze(h.response)){this._history.push(C);const F=Object.assign({parts:[],role:"model"},(A=h.response.candidates)===null||A===void 0?void 0:A[0].content);this._history.push(F)}else{const F=Z(h.response);F&&console.warn(`sendMessage() was unsuccessful. ${F}. Inspect response object for details.`)}R=h}).catch(h=>{throw this._sendPromise=Promise.resolve(),h}),await this._sendPromise,R}async sendMessageStream(t,n={}){var o,i,a,s,d,v;await this._sendPromise;const C=le(t),_={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,C]},m=Object.assign(Object.assign({},this._requestOptions),n),R=ot(this._apiKey,this.model,_,m);return this._sendPromise=this._sendPromise.then(()=>R).catch(h=>{throw new Error(Ze)}).then(h=>h.response).then(h=>{if(ze(h)){this._history.push(C);const A=Object.assign({},h.candidates[0].content);A.role||(A.role="model"),this._history.push(A)}else{const A=Z(h);A&&console.warn(`sendMessageStream() was unsuccessful. ${A}. Inspect response object for details.`)}}).catch(h=>{h.message!==Ze&&console.error(h)}),R}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function En(e,t,n,o){return(await ue(t,ee.COUNT_TOKENS,e,!1,JSON.stringify(n),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yn(e,t,n,o){return(await ue(t,ee.EMBED_CONTENT,e,!1,JSON.stringify(n),o)).json()}async function bn(e,t,n,o){const i=n.requests.map(s=>Object.assign(Object.assign({},s),{model:t}));return(await ue(t,ee.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,n,o={}){this.apiKey=t,this._requestOptions=o,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=at(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var o;const i=Pe(t),a=Object.assign(Object.assign({},this._requestOptions),n);return it(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},i),a)}async generateContentStream(t,n={}){var o;const i=Pe(t),a=Object.assign(Object.assign({},this._requestOptions),n);return ot(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},i),a)}startChat(t){var n;return new pn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const o=hn(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return En(this.apiKey,this.model,o,i)}async embedContent(t,n={}){const o=vn(t),i=Object.assign(Object.assign({},this._requestOptions),n);return yn(this.apiKey,this.model,o,i)}async batchEmbedContents(t,n={}){const o=Object.assign(Object.assign({},this._requestOptions),n);return bn(this.apiKey,this.model,t,o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new $("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Je(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,o){if(!t.name)throw new J("Cached content must contain a `name` field.");if(!t.model)throw new J("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const s of i)if(n?.[s]&&t[s]&&n?.[s]!==t[s]){if(s==="model"){const d=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,v=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(d===v)continue}throw new J(`Different value for "${s}" specified in modelParams (${n[s]}) and cachedContent (${t[s]})`)}const a=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Je(this.apiKey,a,o)}}export{On as G,An as Q,wt as a,Tt as b,kt as c,Ft as d,Nt as e,Rn as f,Xe as g,Bt as h,Vt as i,be as j,Kt as k,Sn as l,wn as r,Rt as u};
